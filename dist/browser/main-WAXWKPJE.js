var cp=Object.create;var ci=Object.defineProperty,lp=Object.defineProperties,up=Object.getOwnPropertyDescriptor,hp=Object.getOwnPropertyDescriptors,dp=Object.getOwnPropertyNames,nl=Object.getOwnPropertySymbols,fp=Object.getPrototypeOf,il=Object.prototype.hasOwnProperty,pp=Object.prototype.propertyIsEnumerable;var rl=(t,e,n)=>e in t?ci(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,z=(t,e)=>{for(var n in e||={})il.call(e,n)&&rl(t,n,e[n]);if(nl)for(var n of nl(e))pp.call(e,n)&&rl(t,n,e[n]);return t},_e=(t,e)=>lp(t,hp(e));var gp=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),mp=(t,e)=>{for(var n in e)ci(t,n,{get:e[n],enumerable:!0})},vp=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of dp(e))!il.call(t,s)&&s!==n&&ci(t,s,{get:()=>e[s],enumerable:!(r=up(e,s))||r.enumerable});return t};var _p=(t,e,n)=>(n=t!=null?cp(fp(t)):{},vp(e||!t||!t.__esModule?ci(n,"default",{value:t,enumerable:!0}):n,t));var Mf=gp((Ts,Uc)=>{"use strict";(function(t,e){if(typeof Ts=="object"&&typeof Uc=="object")Uc.exports=e();else if(typeof define=="function"&&define.amd)define([],e);else{var n=e();for(var r in n)(typeof Ts=="object"?Ts:t)[r]=n[r]}})(self,()=>(()=>{"use strict";var t={4567:function(s,i,o){var a=this&&this.__decorate||function(f,m,_,S){var b,v=arguments.length,w=v<3?m:S===null?S=Object.getOwnPropertyDescriptor(m,_):S;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(f,m,_,S);else for(var I=f.length-1;I>=0;I--)(b=f[I])&&(w=(v<3?b(w):v>3?b(m,_,w):b(m,_))||w);return v>3&&w&&Object.defineProperty(m,_,w),w},u=this&&this.__param||function(f,m){return function(_,S){m(_,S,f)}};Object.defineProperty(i,"__esModule",{value:!0}),i.AccessibilityManager=void 0;let c=o(9042),p=o(6114),g=o(9924),C=o(844),y=o(5596),l=o(4725),d=o(3656),h=i.AccessibilityManager=class extends C.Disposable{constructor(f,m){super(),this._terminal=f,this._renderService=m,this._liveRegionLineCount=0,this._charsToConsume=[],this._charsToAnnounce="",this._accessibilityContainer=document.createElement("div"),this._accessibilityContainer.classList.add("xterm-accessibility"),this._rowContainer=document.createElement("div"),this._rowContainer.setAttribute("role","list"),this._rowContainer.classList.add("xterm-accessibility-tree"),this._rowElements=[];for(let _=0;_<this._terminal.rows;_++)this._rowElements[_]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[_]);if(this._topBoundaryFocusListener=_=>this._handleBoundaryFocus(_,0),this._bottomBoundaryFocusListener=_=>this._handleBoundaryFocus(_,1),this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions(),this._accessibilityContainer.appendChild(this._rowContainer),this._liveRegion=document.createElement("div"),this._liveRegion.classList.add("live-region"),this._liveRegion.setAttribute("aria-live","assertive"),this._accessibilityContainer.appendChild(this._liveRegion),this._liveRegionDebouncer=this.register(new g.TimeBasedDebouncer(this._renderRows.bind(this))),!this._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");this._terminal.element.insertAdjacentElement("afterbegin",this._accessibilityContainer),this.register(this._terminal.onResize(_=>this._handleResize(_.rows))),this.register(this._terminal.onRender(_=>this._refreshRows(_.start,_.end))),this.register(this._terminal.onScroll(()=>this._refreshRows())),this.register(this._terminal.onA11yChar(_=>this._handleChar(_))),this.register(this._terminal.onLineFeed(()=>this._handleChar(`
`))),this.register(this._terminal.onA11yTab(_=>this._handleTab(_))),this.register(this._terminal.onKey(_=>this._handleKey(_.key))),this.register(this._terminal.onBlur(()=>this._clearLiveRegion())),this.register(this._renderService.onDimensionsChange(()=>this._refreshRowsDimensions())),this._screenDprMonitor=new y.ScreenDprMonitor(window),this.register(this._screenDprMonitor),this._screenDprMonitor.setListener(()=>this._refreshRowsDimensions()),this.register((0,d.addDisposableDomListener)(window,"resize",()=>this._refreshRowsDimensions())),this._refreshRows(),this.register((0,C.toDisposable)(()=>{this._accessibilityContainer.remove(),this._rowElements.length=0}))}_handleTab(f){for(let m=0;m<f;m++)this._handleChar(" ")}_handleChar(f){this._liveRegionLineCount<21&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==f&&(this._charsToAnnounce+=f):this._charsToAnnounce+=f,f===`
`&&(this._liveRegionLineCount++,this._liveRegionLineCount===21&&(this._liveRegion.textContent+=c.tooMuchOutput)),p.isMac&&this._liveRegion.textContent&&this._liveRegion.textContent.length>0&&!this._liveRegion.parentNode&&setTimeout(()=>{this._accessibilityContainer.appendChild(this._liveRegion)},0))}_clearLiveRegion(){this._liveRegion.textContent="",this._liveRegionLineCount=0,p.isMac&&this._liveRegion.remove()}_handleKey(f){this._clearLiveRegion(),new RegExp("\\p{Control}","u").test(f)||this._charsToConsume.push(f)}_refreshRows(f,m){this._liveRegionDebouncer.refresh(f,m,this._terminal.rows)}_renderRows(f,m){let _=this._terminal.buffer,S=_.lines.length.toString();for(let b=f;b<=m;b++){let v=_.translateBufferLineToString(_.ydisp+b,!0),w=(_.ydisp+b+1).toString(),I=this._rowElements[b];I&&(v.length===0?I.innerText="\xA0":I.textContent=v,I.setAttribute("aria-posinset",w),I.setAttribute("aria-setsize",S))}this._announceCharacters()}_announceCharacters(){this._charsToAnnounce.length!==0&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")}_handleBoundaryFocus(f,m){let _=f.target,S=this._rowElements[m===0?1:this._rowElements.length-2];if(_.getAttribute("aria-posinset")===(m===0?"1":`${this._terminal.buffer.lines.length}`)||f.relatedTarget!==S)return;let b,v;if(m===0?(b=_,v=this._rowElements.pop(),this._rowContainer.removeChild(v)):(b=this._rowElements.shift(),v=_,this._rowContainer.removeChild(b)),b.removeEventListener("focus",this._topBoundaryFocusListener),v.removeEventListener("focus",this._bottomBoundaryFocusListener),m===0){let w=this._createAccessibilityTreeNode();this._rowElements.unshift(w),this._rowContainer.insertAdjacentElement("afterbegin",w)}else{let w=this._createAccessibilityTreeNode();this._rowElements.push(w),this._rowContainer.appendChild(w)}this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(m===0?-1:1),this._rowElements[m===0?1:this._rowElements.length-2].focus(),f.preventDefault(),f.stopImmediatePropagation()}_handleResize(f){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(let m=this._rowContainer.children.length;m<this._terminal.rows;m++)this._rowElements[m]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[m]);for(;this._rowElements.length>f;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()}_createAccessibilityTreeNode(){let f=document.createElement("div");return f.setAttribute("role","listitem"),f.tabIndex=-1,this._refreshRowDimensions(f),f}_refreshRowsDimensions(){if(this._renderService.dimensions.css.cell.height){this._accessibilityContainer.style.width=`${this._renderService.dimensions.css.canvas.width}px`,this._rowElements.length!==this._terminal.rows&&this._handleResize(this._terminal.rows);for(let f=0;f<this._terminal.rows;f++)this._refreshRowDimensions(this._rowElements[f])}}_refreshRowDimensions(f){f.style.height=`${this._renderService.dimensions.css.cell.height}px`}};i.AccessibilityManager=h=a([u(1,l.IRenderService)],h)},3614:(s,i)=>{function o(p){return p.replace(/\r?\n/g,"\r")}function a(p,g){return g?"\x1B[200~"+p+"\x1B[201~":p}function u(p,g,C,y){p=a(p=o(p),C.decPrivateModes.bracketedPasteMode&&y.rawOptions.ignoreBracketedPasteMode!==!0),C.triggerDataEvent(p,!0),g.value=""}function c(p,g,C){let y=C.getBoundingClientRect(),l=p.clientX-y.left-10,d=p.clientY-y.top-10;g.style.width="20px",g.style.height="20px",g.style.left=`${l}px`,g.style.top=`${d}px`,g.style.zIndex="1000",g.focus()}Object.defineProperty(i,"__esModule",{value:!0}),i.rightClickHandler=i.moveTextAreaUnderMouseCursor=i.paste=i.handlePasteEvent=i.copyHandler=i.bracketTextForPaste=i.prepareTextForTerminal=void 0,i.prepareTextForTerminal=o,i.bracketTextForPaste=a,i.copyHandler=function(p,g){p.clipboardData&&p.clipboardData.setData("text/plain",g.selectionText),p.preventDefault()},i.handlePasteEvent=function(p,g,C,y){p.stopPropagation(),p.clipboardData&&u(p.clipboardData.getData("text/plain"),g,C,y)},i.paste=u,i.moveTextAreaUnderMouseCursor=c,i.rightClickHandler=function(p,g,C,y,l){c(p,g,C),l&&y.rightClickSelect(p),g.value=y.selectionText,g.select()}},7239:(s,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ColorContrastCache=void 0;let a=o(1505);i.ColorContrastCache=class{constructor(){this._color=new a.TwoKeyMap,this._css=new a.TwoKeyMap}setCss(u,c,p){this._css.set(u,c,p)}getCss(u,c){return this._css.get(u,c)}setColor(u,c,p){this._color.set(u,c,p)}getColor(u,c){return this._color.get(u,c)}clear(){this._color.clear(),this._css.clear()}}},3656:(s,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.addDisposableDomListener=void 0,i.addDisposableDomListener=function(o,a,u,c){o.addEventListener(a,u,c);let p=!1;return{dispose:()=>{p||(p=!0,o.removeEventListener(a,u,c))}}}},6465:function(s,i,o){var a=this&&this.__decorate||function(l,d,h,f){var m,_=arguments.length,S=_<3?d:f===null?f=Object.getOwnPropertyDescriptor(d,h):f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(l,d,h,f);else for(var b=l.length-1;b>=0;b--)(m=l[b])&&(S=(_<3?m(S):_>3?m(d,h,S):m(d,h))||S);return _>3&&S&&Object.defineProperty(d,h,S),S},u=this&&this.__param||function(l,d){return function(h,f){d(h,f,l)}};Object.defineProperty(i,"__esModule",{value:!0}),i.Linkifier2=void 0;let c=o(3656),p=o(8460),g=o(844),C=o(2585),y=i.Linkifier2=class extends g.Disposable{get currentLink(){return this._currentLink}constructor(l){super(),this._bufferService=l,this._linkProviders=[],this._linkCacheDisposables=[],this._isMouseOut=!0,this._wasResized=!1,this._activeLine=-1,this._onShowLinkUnderline=this.register(new p.EventEmitter),this.onShowLinkUnderline=this._onShowLinkUnderline.event,this._onHideLinkUnderline=this.register(new p.EventEmitter),this.onHideLinkUnderline=this._onHideLinkUnderline.event,this.register((0,g.getDisposeArrayDisposable)(this._linkCacheDisposables)),this.register((0,g.toDisposable)(()=>{this._lastMouseEvent=void 0})),this.register(this._bufferService.onResize(()=>{this._clearCurrentLink(),this._wasResized=!0}))}registerLinkProvider(l){return this._linkProviders.push(l),{dispose:()=>{let d=this._linkProviders.indexOf(l);d!==-1&&this._linkProviders.splice(d,1)}}}attachToDom(l,d,h){this._element=l,this._mouseService=d,this._renderService=h,this.register((0,c.addDisposableDomListener)(this._element,"mouseleave",()=>{this._isMouseOut=!0,this._clearCurrentLink()})),this.register((0,c.addDisposableDomListener)(this._element,"mousemove",this._handleMouseMove.bind(this))),this.register((0,c.addDisposableDomListener)(this._element,"mousedown",this._handleMouseDown.bind(this))),this.register((0,c.addDisposableDomListener)(this._element,"mouseup",this._handleMouseUp.bind(this)))}_handleMouseMove(l){if(this._lastMouseEvent=l,!this._element||!this._mouseService)return;let d=this._positionFromMouseEvent(l,this._element,this._mouseService);if(!d)return;this._isMouseOut=!1;let h=l.composedPath();for(let f=0;f<h.length;f++){let m=h[f];if(m.classList.contains("xterm"))break;if(m.classList.contains("xterm-hover"))return}this._lastBufferCell&&d.x===this._lastBufferCell.x&&d.y===this._lastBufferCell.y||(this._handleHover(d),this._lastBufferCell=d)}_handleHover(l){if(this._activeLine!==l.y||this._wasResized)return this._clearCurrentLink(),this._askForLink(l,!1),void(this._wasResized=!1);this._currentLink&&this._linkAtPosition(this._currentLink.link,l)||(this._clearCurrentLink(),this._askForLink(l,!0))}_askForLink(l,d){var h,f;this._activeProviderReplies&&d||((h=this._activeProviderReplies)===null||h===void 0||h.forEach(_=>{_?.forEach(S=>{S.link.dispose&&S.link.dispose()})}),this._activeProviderReplies=new Map,this._activeLine=l.y);let m=!1;for(let[_,S]of this._linkProviders.entries())d?!((f=this._activeProviderReplies)===null||f===void 0)&&f.get(_)&&(m=this._checkLinkProviderResult(_,l,m)):S.provideLinks(l.y,b=>{var v,w;if(this._isMouseOut)return;let I=b?.map(R=>({link:R}));(v=this._activeProviderReplies)===null||v===void 0||v.set(_,I),m=this._checkLinkProviderResult(_,l,m),((w=this._activeProviderReplies)===null||w===void 0?void 0:w.size)===this._linkProviders.length&&this._removeIntersectingLinks(l.y,this._activeProviderReplies)})}_removeIntersectingLinks(l,d){let h=new Set;for(let f=0;f<d.size;f++){let m=d.get(f);if(m)for(let _=0;_<m.length;_++){let S=m[_],b=S.link.range.start.y<l?0:S.link.range.start.x,v=S.link.range.end.y>l?this._bufferService.cols:S.link.range.end.x;for(let w=b;w<=v;w++){if(h.has(w)){m.splice(_--,1);break}h.add(w)}}}}_checkLinkProviderResult(l,d,h){var f;if(!this._activeProviderReplies)return h;let m=this._activeProviderReplies.get(l),_=!1;for(let S=0;S<l;S++)this._activeProviderReplies.has(S)&&!this._activeProviderReplies.get(S)||(_=!0);if(!_&&m){let S=m.find(b=>this._linkAtPosition(b.link,d));S&&(h=!0,this._handleNewLink(S))}if(this._activeProviderReplies.size===this._linkProviders.length&&!h)for(let S=0;S<this._activeProviderReplies.size;S++){let b=(f=this._activeProviderReplies.get(S))===null||f===void 0?void 0:f.find(v=>this._linkAtPosition(v.link,d));if(b){h=!0,this._handleNewLink(b);break}}return h}_handleMouseDown(){this._mouseDownLink=this._currentLink}_handleMouseUp(l){if(!this._element||!this._mouseService||!this._currentLink)return;let d=this._positionFromMouseEvent(l,this._element,this._mouseService);d&&this._mouseDownLink===this._currentLink&&this._linkAtPosition(this._currentLink.link,d)&&this._currentLink.link.activate(l,this._currentLink.link.text)}_clearCurrentLink(l,d){this._element&&this._currentLink&&this._lastMouseEvent&&(!l||!d||this._currentLink.link.range.start.y>=l&&this._currentLink.link.range.end.y<=d)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,(0,g.disposeArray)(this._linkCacheDisposables))}_handleNewLink(l){if(!this._element||!this._lastMouseEvent||!this._mouseService)return;let d=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);d&&this._linkAtPosition(l.link,d)&&(this._currentLink=l,this._currentLink.state={decorations:{underline:l.link.decorations===void 0||l.link.decorations.underline,pointerCursor:l.link.decorations===void 0||l.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,l.link,this._lastMouseEvent),l.link.decorations={},Object.defineProperties(l.link.decorations,{pointerCursor:{get:()=>{var h,f;return(f=(h=this._currentLink)===null||h===void 0?void 0:h.state)===null||f===void 0?void 0:f.decorations.pointerCursor},set:h=>{var f,m;!((f=this._currentLink)===null||f===void 0)&&f.state&&this._currentLink.state.decorations.pointerCursor!==h&&(this._currentLink.state.decorations.pointerCursor=h,this._currentLink.state.isHovered&&((m=this._element)===null||m===void 0||m.classList.toggle("xterm-cursor-pointer",h)))}},underline:{get:()=>{var h,f;return(f=(h=this._currentLink)===null||h===void 0?void 0:h.state)===null||f===void 0?void 0:f.decorations.underline},set:h=>{var f,m,_;!((f=this._currentLink)===null||f===void 0)&&f.state&&((_=(m=this._currentLink)===null||m===void 0?void 0:m.state)===null||_===void 0?void 0:_.decorations.underline)!==h&&(this._currentLink.state.decorations.underline=h,this._currentLink.state.isHovered&&this._fireUnderlineEvent(l.link,h))}}}),this._renderService&&this._linkCacheDisposables.push(this._renderService.onRenderedViewportChange(h=>{if(!this._currentLink)return;let f=h.start===0?0:h.start+1+this._bufferService.buffer.ydisp,m=this._bufferService.buffer.ydisp+1+h.end;if(this._currentLink.link.range.start.y>=f&&this._currentLink.link.range.end.y<=m&&(this._clearCurrentLink(f,m),this._lastMouseEvent&&this._element)){let _=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);_&&this._askForLink(_,!1)}})))}_linkHover(l,d,h){var f;!((f=this._currentLink)===null||f===void 0)&&f.state&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(d,!0),this._currentLink.state.decorations.pointerCursor&&l.classList.add("xterm-cursor-pointer")),d.hover&&d.hover(h,d.text)}_fireUnderlineEvent(l,d){let h=l.range,f=this._bufferService.buffer.ydisp,m=this._createLinkUnderlineEvent(h.start.x-1,h.start.y-f-1,h.end.x,h.end.y-f-1,void 0);(d?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(m)}_linkLeave(l,d,h){var f;!((f=this._currentLink)===null||f===void 0)&&f.state&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(d,!1),this._currentLink.state.decorations.pointerCursor&&l.classList.remove("xterm-cursor-pointer")),d.leave&&d.leave(h,d.text)}_linkAtPosition(l,d){let h=l.range.start.y*this._bufferService.cols+l.range.start.x,f=l.range.end.y*this._bufferService.cols+l.range.end.x,m=d.y*this._bufferService.cols+d.x;return h<=m&&m<=f}_positionFromMouseEvent(l,d,h){let f=h.getCoords(l,d,this._bufferService.cols,this._bufferService.rows);if(f)return{x:f[0],y:f[1]+this._bufferService.buffer.ydisp}}_createLinkUnderlineEvent(l,d,h,f,m){return{x1:l,y1:d,x2:h,y2:f,cols:this._bufferService.cols,fg:m}}};i.Linkifier2=y=a([u(0,C.IBufferService)],y)},9042:(s,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.tooMuchOutput=i.promptLabel=void 0,i.promptLabel="Terminal input",i.tooMuchOutput="Too much output to announce, navigate to rows manually to read"},3730:function(s,i,o){var a=this&&this.__decorate||function(y,l,d,h){var f,m=arguments.length,_=m<3?l:h===null?h=Object.getOwnPropertyDescriptor(l,d):h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")_=Reflect.decorate(y,l,d,h);else for(var S=y.length-1;S>=0;S--)(f=y[S])&&(_=(m<3?f(_):m>3?f(l,d,_):f(l,d))||_);return m>3&&_&&Object.defineProperty(l,d,_),_},u=this&&this.__param||function(y,l){return function(d,h){l(d,h,y)}};Object.defineProperty(i,"__esModule",{value:!0}),i.OscLinkProvider=void 0;let c=o(511),p=o(2585),g=i.OscLinkProvider=class{constructor(y,l,d){this._bufferService=y,this._optionsService=l,this._oscLinkService=d}provideLinks(y,l){var d;let h=this._bufferService.buffer.lines.get(y-1);if(!h)return void l(void 0);let f=[],m=this._optionsService.rawOptions.linkHandler,_=new c.CellData,S=h.getTrimmedLength(),b=-1,v=-1,w=!1;for(let I=0;I<S;I++)if(v!==-1||h.hasContent(I)){if(h.loadCell(I,_),_.hasExtendedAttrs()&&_.extended.urlId){if(v===-1){v=I,b=_.extended.urlId;continue}w=_.extended.urlId!==b}else v!==-1&&(w=!0);if(w||v!==-1&&I===S-1){let R=(d=this._oscLinkService.getLinkData(b))===null||d===void 0?void 0:d.uri;if(R){let x={start:{x:v+1,y},end:{x:I+(w||I!==S-1?0:1),y}},A=!1;if(!m?.allowNonHttpProtocols)try{let L=new URL(R);["http:","https:"].includes(L.protocol)||(A=!0)}catch{A=!0}A||f.push({text:R,range:x,activate:(L,F)=>m?m.activate(L,F,x):C(0,F),hover:(L,F)=>{var H;return(H=m?.hover)===null||H===void 0?void 0:H.call(m,L,F,x)},leave:(L,F)=>{var H;return(H=m?.leave)===null||H===void 0?void 0:H.call(m,L,F,x)}})}w=!1,_.hasExtendedAttrs()&&_.extended.urlId?(v=I,b=_.extended.urlId):(v=-1,b=-1)}}l(f)}};function C(y,l){if(confirm(`Do you want to navigate to ${l}?

WARNING: This link could potentially be dangerous`)){let d=window.open();if(d){try{d.opener=null}catch{}d.location.href=l}else console.warn("Opening link blocked as opener could not be cleared")}}i.OscLinkProvider=g=a([u(0,p.IBufferService),u(1,p.IOptionsService),u(2,p.IOscLinkService)],g)},6193:(s,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.RenderDebouncer=void 0,i.RenderDebouncer=class{constructor(o,a){this._parentWindow=o,this._renderCallback=a,this._refreshCallbacks=[]}dispose(){this._animationFrame&&(this._parentWindow.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}addRefreshCallback(o){return this._refreshCallbacks.push(o),this._animationFrame||(this._animationFrame=this._parentWindow.requestAnimationFrame(()=>this._innerRefresh())),this._animationFrame}refresh(o,a,u){this._rowCount=u,o=o!==void 0?o:0,a=a!==void 0?a:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,o):o,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,a):a,this._animationFrame||(this._animationFrame=this._parentWindow.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._animationFrame=void 0,this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return void this._runRefreshCallbacks();let o=Math.max(this._rowStart,0),a=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(o,a),this._runRefreshCallbacks()}_runRefreshCallbacks(){for(let o of this._refreshCallbacks)o(0);this._refreshCallbacks=[]}}},5596:(s,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ScreenDprMonitor=void 0;let a=o(844);class u extends a.Disposable{constructor(p){super(),this._parentWindow=p,this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this.register((0,a.toDisposable)(()=>{this.clearListener()}))}setListener(p){this._listener&&this.clearListener(),this._listener=p,this._outerListener=()=>{this._listener&&(this._listener(this._parentWindow.devicePixelRatio,this._currentDevicePixelRatio),this._updateDpr())},this._updateDpr()}_updateDpr(){var p;this._outerListener&&((p=this._resolutionMediaMatchList)===null||p===void 0||p.removeListener(this._outerListener),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._resolutionMediaMatchList=this._parentWindow.matchMedia(`screen and (resolution: ${this._parentWindow.devicePixelRatio}dppx)`),this._resolutionMediaMatchList.addListener(this._outerListener))}clearListener(){this._resolutionMediaMatchList&&this._listener&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._listener=void 0,this._outerListener=void 0)}}i.ScreenDprMonitor=u},3236:(s,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Terminal=void 0;let a=o(3614),u=o(3656),c=o(6465),p=o(9042),g=o(3730),C=o(1680),y=o(3107),l=o(5744),d=o(2950),h=o(1296),f=o(428),m=o(4269),_=o(5114),S=o(8934),b=o(3230),v=o(9312),w=o(4725),I=o(6731),R=o(8055),x=o(8969),A=o(8460),L=o(844),F=o(6114),H=o(8437),B=o(2584),E=o(7399),M=o(5941),T=o(9074),k=o(2585),j=o(5435),U=o(4567),q=typeof window<"u"?window.document:null;class W extends x.CoreTerminal{get onFocus(){return this._onFocus.event}get onBlur(){return this._onBlur.event}get onA11yChar(){return this._onA11yCharEmitter.event}get onA11yTab(){return this._onA11yTabEmitter.event}get onWillOpen(){return this._onWillOpen.event}constructor(D={}){super(D),this.browser=F,this._keyDownHandled=!1,this._keyDownSeen=!1,this._keyPressHandled=!1,this._unprocessedDeadKey=!1,this._accessibilityManager=this.register(new L.MutableDisposable),this._onCursorMove=this.register(new A.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onKey=this.register(new A.EventEmitter),this.onKey=this._onKey.event,this._onRender=this.register(new A.EventEmitter),this.onRender=this._onRender.event,this._onSelectionChange=this.register(new A.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onTitleChange=this.register(new A.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onBell=this.register(new A.EventEmitter),this.onBell=this._onBell.event,this._onFocus=this.register(new A.EventEmitter),this._onBlur=this.register(new A.EventEmitter),this._onA11yCharEmitter=this.register(new A.EventEmitter),this._onA11yTabEmitter=this.register(new A.EventEmitter),this._onWillOpen=this.register(new A.EventEmitter),this._setup(),this.linkifier2=this.register(this._instantiationService.createInstance(c.Linkifier2)),this.linkifier2.registerLinkProvider(this._instantiationService.createInstance(g.OscLinkProvider)),this._decorationService=this._instantiationService.createInstance(T.DecorationService),this._instantiationService.setService(k.IDecorationService,this._decorationService),this.register(this._inputHandler.onRequestBell(()=>this._onBell.fire())),this.register(this._inputHandler.onRequestRefreshRows((O,P)=>this.refresh(O,P))),this.register(this._inputHandler.onRequestSendFocus(()=>this._reportFocus())),this.register(this._inputHandler.onRequestReset(()=>this.reset())),this.register(this._inputHandler.onRequestWindowsOptionsReport(O=>this._reportWindowsOptions(O))),this.register(this._inputHandler.onColor(O=>this._handleColorEvent(O))),this.register((0,A.forwardEvent)(this._inputHandler.onCursorMove,this._onCursorMove)),this.register((0,A.forwardEvent)(this._inputHandler.onTitleChange,this._onTitleChange)),this.register((0,A.forwardEvent)(this._inputHandler.onA11yChar,this._onA11yCharEmitter)),this.register((0,A.forwardEvent)(this._inputHandler.onA11yTab,this._onA11yTabEmitter)),this.register(this._bufferService.onResize(O=>this._afterResize(O.cols,O.rows))),this.register((0,L.toDisposable)(()=>{var O,P;this._customKeyEventHandler=void 0,(P=(O=this.element)===null||O===void 0?void 0:O.parentNode)===null||P===void 0||P.removeChild(this.element)}))}_handleColorEvent(D){if(this._themeService)for(let O of D){let P,N="";switch(O.index){case 256:P="foreground",N="10";break;case 257:P="background",N="11";break;case 258:P="cursor",N="12";break;default:P="ansi",N="4;"+O.index}switch(O.type){case 0:let Q=R.color.toColorRGB(P==="ansi"?this._themeService.colors.ansi[O.index]:this._themeService.colors[P]);this.coreService.triggerDataEvent(`${B.C0.ESC}]${N};${(0,M.toRgbString)(Q)}${B.C1_ESCAPED.ST}`);break;case 1:if(P==="ansi")this._themeService.modifyColors($=>$.ansi[O.index]=R.rgba.toColor(...O.color));else{let $=P;this._themeService.modifyColors(de=>de[$]=R.rgba.toColor(...O.color))}break;case 2:this._themeService.restoreColor(O.index)}}}_setup(){super._setup(),this._customKeyEventHandler=void 0}get buffer(){return this.buffers.active}focus(){this.textarea&&this.textarea.focus({preventScroll:!0})}_handleScreenReaderModeOptionChange(D){D?!this._accessibilityManager.value&&this._renderService&&(this._accessibilityManager.value=this._instantiationService.createInstance(U.AccessibilityManager,this)):this._accessibilityManager.clear()}_handleTextAreaFocus(D){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(B.C0.ESC+"[I"),this.updateCursorStyle(D),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()}blur(){var D;return(D=this.textarea)===null||D===void 0?void 0:D.blur()}_handleTextAreaBlur(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(B.C0.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()}_syncTextArea(){if(!this.textarea||!this.buffer.isCursorInViewport||this._compositionHelper.isComposing||!this._renderService)return;let D=this.buffer.ybase+this.buffer.y,O=this.buffer.lines.get(D);if(!O)return;let P=Math.min(this.buffer.x,this.cols-1),N=this._renderService.dimensions.css.cell.height,Q=O.getWidth(P),$=this._renderService.dimensions.css.cell.width*Q,de=this.buffer.y*this._renderService.dimensions.css.cell.height,De=P*this._renderService.dimensions.css.cell.width;this.textarea.style.left=De+"px",this.textarea.style.top=de+"px",this.textarea.style.width=$+"px",this.textarea.style.height=N+"px",this.textarea.style.lineHeight=N+"px",this.textarea.style.zIndex="-5"}_initGlobal(){this._bindKeys(),this.register((0,u.addDisposableDomListener)(this.element,"copy",O=>{this.hasSelection()&&(0,a.copyHandler)(O,this._selectionService)}));let D=O=>(0,a.handlePasteEvent)(O,this.textarea,this.coreService,this.optionsService);this.register((0,u.addDisposableDomListener)(this.textarea,"paste",D)),this.register((0,u.addDisposableDomListener)(this.element,"paste",D)),F.isFirefox?this.register((0,u.addDisposableDomListener)(this.element,"mousedown",O=>{O.button===2&&(0,a.rightClickHandler)(O,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})):this.register((0,u.addDisposableDomListener)(this.element,"contextmenu",O=>{(0,a.rightClickHandler)(O,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})),F.isLinux&&this.register((0,u.addDisposableDomListener)(this.element,"auxclick",O=>{O.button===1&&(0,a.moveTextAreaUnderMouseCursor)(O,this.textarea,this.screenElement)}))}_bindKeys(){this.register((0,u.addDisposableDomListener)(this.textarea,"keyup",D=>this._keyUp(D),!0)),this.register((0,u.addDisposableDomListener)(this.textarea,"keydown",D=>this._keyDown(D),!0)),this.register((0,u.addDisposableDomListener)(this.textarea,"keypress",D=>this._keyPress(D),!0)),this.register((0,u.addDisposableDomListener)(this.textarea,"compositionstart",()=>this._compositionHelper.compositionstart())),this.register((0,u.addDisposableDomListener)(this.textarea,"compositionupdate",D=>this._compositionHelper.compositionupdate(D))),this.register((0,u.addDisposableDomListener)(this.textarea,"compositionend",()=>this._compositionHelper.compositionend())),this.register((0,u.addDisposableDomListener)(this.textarea,"input",D=>this._inputEvent(D),!0)),this.register(this.onRender(()=>this._compositionHelper.updateCompositionElements()))}open(D){var O;if(!D)throw new Error("Terminal requires a parent element.");D.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),this._document=D.ownerDocument,this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),D.appendChild(this.element);let P=q.createDocumentFragment();this._viewportElement=q.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),P.appendChild(this._viewportElement),this._viewportScrollArea=q.createElement("div"),this._viewportScrollArea.classList.add("xterm-scroll-area"),this._viewportElement.appendChild(this._viewportScrollArea),this.screenElement=q.createElement("div"),this.screenElement.classList.add("xterm-screen"),this._helperContainer=q.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),P.appendChild(this.screenElement),this.textarea=q.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",p.promptLabel),F.isChromeOS||this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this._coreBrowserService=this._instantiationService.createInstance(_.CoreBrowserService,this.textarea,(O=this._document.defaultView)!==null&&O!==void 0?O:window),this._instantiationService.setService(w.ICoreBrowserService,this._coreBrowserService),this.register((0,u.addDisposableDomListener)(this.textarea,"focus",N=>this._handleTextAreaFocus(N))),this.register((0,u.addDisposableDomListener)(this.textarea,"blur",()=>this._handleTextAreaBlur())),this._helperContainer.appendChild(this.textarea),this._charSizeService=this._instantiationService.createInstance(f.CharSizeService,this._document,this._helperContainer),this._instantiationService.setService(w.ICharSizeService,this._charSizeService),this._themeService=this._instantiationService.createInstance(I.ThemeService),this._instantiationService.setService(w.IThemeService,this._themeService),this._characterJoinerService=this._instantiationService.createInstance(m.CharacterJoinerService),this._instantiationService.setService(w.ICharacterJoinerService,this._characterJoinerService),this._renderService=this.register(this._instantiationService.createInstance(b.RenderService,this.rows,this.screenElement)),this._instantiationService.setService(w.IRenderService,this._renderService),this.register(this._renderService.onRenderedViewportChange(N=>this._onRender.fire(N))),this.onResize(N=>this._renderService.resize(N.cols,N.rows)),this._compositionView=q.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(d.CompositionHelper,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this.element.appendChild(P);try{this._onWillOpen.fire(this.element)}catch{}this._renderService.hasRenderer()||this._renderService.setRenderer(this._createRenderer()),this._mouseService=this._instantiationService.createInstance(S.MouseService),this._instantiationService.setService(w.IMouseService,this._mouseService),this.viewport=this._instantiationService.createInstance(C.Viewport,this._viewportElement,this._viewportScrollArea),this.viewport.onRequestScrollLines(N=>this.scrollLines(N.amount,N.suppressScrollEvent,1)),this.register(this._inputHandler.onRequestSyncScrollBar(()=>this.viewport.syncScrollArea())),this.register(this.viewport),this.register(this.onCursorMove(()=>{this._renderService.handleCursorMove(),this._syncTextArea()})),this.register(this.onResize(()=>this._renderService.handleResize(this.cols,this.rows))),this.register(this.onBlur(()=>this._renderService.handleBlur())),this.register(this.onFocus(()=>this._renderService.handleFocus())),this.register(this._renderService.onDimensionsChange(()=>this.viewport.syncScrollArea())),this._selectionService=this.register(this._instantiationService.createInstance(v.SelectionService,this.element,this.screenElement,this.linkifier2)),this._instantiationService.setService(w.ISelectionService,this._selectionService),this.register(this._selectionService.onRequestScrollLines(N=>this.scrollLines(N.amount,N.suppressScrollEvent))),this.register(this._selectionService.onSelectionChange(()=>this._onSelectionChange.fire())),this.register(this._selectionService.onRequestRedraw(N=>this._renderService.handleSelectionChanged(N.start,N.end,N.columnSelectMode))),this.register(this._selectionService.onLinuxMouseSelection(N=>{this.textarea.value=N,this.textarea.focus(),this.textarea.select()})),this.register(this._onScroll.event(N=>{this.viewport.syncScrollArea(),this._selectionService.refresh()})),this.register((0,u.addDisposableDomListener)(this._viewportElement,"scroll",()=>this._selectionService.refresh())),this.linkifier2.attachToDom(this.screenElement,this._mouseService,this._renderService),this.register(this._instantiationService.createInstance(y.BufferDecorationRenderer,this.screenElement)),this.register((0,u.addDisposableDomListener)(this.element,"mousedown",N=>this._selectionService.handleMouseDown(N))),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager.value=this._instantiationService.createInstance(U.AccessibilityManager,this)),this.register(this.optionsService.onSpecificOptionChange("screenReaderMode",N=>this._handleScreenReaderModeOptionChange(N))),this.options.overviewRulerWidth&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(l.OverviewRulerRenderer,this._viewportElement,this.screenElement))),this.optionsService.onSpecificOptionChange("overviewRulerWidth",N=>{!this._overviewRulerRenderer&&N&&this._viewportElement&&this.screenElement&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(l.OverviewRulerRenderer,this._viewportElement,this.screenElement)))}),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()}_createRenderer(){return this._instantiationService.createInstance(h.DomRenderer,this.element,this.screenElement,this._viewportElement,this.linkifier2)}bindMouse(){let D=this,O=this.element;function P($){let de=D._mouseService.getMouseReportCoords($,D.screenElement);if(!de)return!1;let De,ke;switch($.overrideType||$.type){case"mousemove":ke=32,$.buttons===void 0?(De=3,$.button!==void 0&&(De=$.button<3?$.button:3)):De=1&$.buttons?0:4&$.buttons?1:2&$.buttons?2:3;break;case"mouseup":ke=0,De=$.button<3?$.button:3;break;case"mousedown":ke=1,De=$.button<3?$.button:3;break;case"wheel":if(D.viewport.getLinesScrolled($)===0)return!1;ke=$.deltaY<0?0:1,De=4;break;default:return!1}return!(ke===void 0||De===void 0||De>4)&&D.coreMouseService.triggerMouseEvent({col:de.col,row:de.row,x:de.x,y:de.y,button:De,action:ke,ctrl:$.ctrlKey,alt:$.altKey,shift:$.shiftKey})}let N={mouseup:null,wheel:null,mousedrag:null,mousemove:null},Q={mouseup:$=>(P($),$.buttons||(this._document.removeEventListener("mouseup",N.mouseup),N.mousedrag&&this._document.removeEventListener("mousemove",N.mousedrag)),this.cancel($)),wheel:$=>(P($),this.cancel($,!0)),mousedrag:$=>{$.buttons&&P($)},mousemove:$=>{$.buttons||P($)}};this.register(this.coreMouseService.onProtocolChange($=>{$?(this.optionsService.rawOptions.logLevel==="debug"&&this._logService.debug("Binding to mouse events:",this.coreMouseService.explainEvents($)),this.element.classList.add("enable-mouse-events"),this._selectionService.disable()):(this._logService.debug("Unbinding from mouse events."),this.element.classList.remove("enable-mouse-events"),this._selectionService.enable()),8&$?N.mousemove||(O.addEventListener("mousemove",Q.mousemove),N.mousemove=Q.mousemove):(O.removeEventListener("mousemove",N.mousemove),N.mousemove=null),16&$?N.wheel||(O.addEventListener("wheel",Q.wheel,{passive:!1}),N.wheel=Q.wheel):(O.removeEventListener("wheel",N.wheel),N.wheel=null),2&$?N.mouseup||(O.addEventListener("mouseup",Q.mouseup),N.mouseup=Q.mouseup):(this._document.removeEventListener("mouseup",N.mouseup),O.removeEventListener("mouseup",N.mouseup),N.mouseup=null),4&$?N.mousedrag||(N.mousedrag=Q.mousedrag):(this._document.removeEventListener("mousemove",N.mousedrag),N.mousedrag=null)})),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this.register((0,u.addDisposableDomListener)(O,"mousedown",$=>{if($.preventDefault(),this.focus(),this.coreMouseService.areMouseEventsActive&&!this._selectionService.shouldForceSelection($))return P($),N.mouseup&&this._document.addEventListener("mouseup",N.mouseup),N.mousedrag&&this._document.addEventListener("mousemove",N.mousedrag),this.cancel($)})),this.register((0,u.addDisposableDomListener)(O,"wheel",$=>{if(!N.wheel){if(!this.buffer.hasScrollback){let de=this.viewport.getLinesScrolled($);if(de===0)return;let De=B.C0.ESC+(this.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+($.deltaY<0?"A":"B"),ke="";for(let sn=0;sn<Math.abs(de);sn++)ke+=De;return this.coreService.triggerDataEvent(ke,!0),this.cancel($,!0)}return this.viewport.handleWheel($)?this.cancel($):void 0}},{passive:!1})),this.register((0,u.addDisposableDomListener)(O,"touchstart",$=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchStart($),this.cancel($)},{passive:!0})),this.register((0,u.addDisposableDomListener)(O,"touchmove",$=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchMove($)?void 0:this.cancel($)},{passive:!1}))}refresh(D,O){var P;(P=this._renderService)===null||P===void 0||P.refreshRows(D,O)}updateCursorStyle(D){var O;!((O=this._selectionService)===null||O===void 0)&&O.shouldColumnSelect(D)?this.element.classList.add("column-select"):this.element.classList.remove("column-select")}_showCursor(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))}scrollLines(D,O,P=0){var N;P===1?(super.scrollLines(D,O,P),this.refresh(0,this.rows-1)):(N=this.viewport)===null||N===void 0||N.scrollLines(D)}paste(D){(0,a.paste)(D,this.textarea,this.coreService,this.optionsService)}attachCustomKeyEventHandler(D){this._customKeyEventHandler=D}registerLinkProvider(D){return this.linkifier2.registerLinkProvider(D)}registerCharacterJoiner(D){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");let O=this._characterJoinerService.register(D);return this.refresh(0,this.rows-1),O}deregisterCharacterJoiner(D){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(D)&&this.refresh(0,this.rows-1)}get markers(){return this.buffer.markers}registerMarker(D){return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+D)}registerDecoration(D){return this._decorationService.registerDecoration(D)}hasSelection(){return!!this._selectionService&&this._selectionService.hasSelection}select(D,O,P){this._selectionService.setSelection(D,O,P)}getSelection(){return this._selectionService?this._selectionService.selectionText:""}getSelectionPosition(){if(this._selectionService&&this._selectionService.hasSelection)return{start:{x:this._selectionService.selectionStart[0],y:this._selectionService.selectionStart[1]},end:{x:this._selectionService.selectionEnd[0],y:this._selectionService.selectionEnd[1]}}}clearSelection(){var D;(D=this._selectionService)===null||D===void 0||D.clearSelection()}selectAll(){var D;(D=this._selectionService)===null||D===void 0||D.selectAll()}selectLines(D,O){var P;(P=this._selectionService)===null||P===void 0||P.selectLines(D,O)}_keyDown(D){if(this._keyDownHandled=!1,this._keyDownSeen=!0,this._customKeyEventHandler&&this._customKeyEventHandler(D)===!1)return!1;let O=this.browser.isMac&&this.options.macOptionIsMeta&&D.altKey;if(!O&&!this._compositionHelper.keydown(D))return this.options.scrollOnUserInput&&this.buffer.ybase!==this.buffer.ydisp&&this.scrollToBottom(),!1;O||D.key!=="Dead"&&D.key!=="AltGraph"||(this._unprocessedDeadKey=!0);let P=(0,E.evaluateKeyboardEvent)(D,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(D),P.type===3||P.type===2){let N=this.rows-1;return this.scrollLines(P.type===2?-N:N),this.cancel(D,!0)}return P.type===1&&this.selectAll(),!!this._isThirdLevelShift(this.browser,D)||(P.cancel&&this.cancel(D,!0),!P.key||!!(D.key&&!D.ctrlKey&&!D.altKey&&!D.metaKey&&D.key.length===1&&D.key.charCodeAt(0)>=65&&D.key.charCodeAt(0)<=90)||(this._unprocessedDeadKey?(this._unprocessedDeadKey=!1,!0):(P.key!==B.C0.ETX&&P.key!==B.C0.CR||(this.textarea.value=""),this._onKey.fire({key:P.key,domEvent:D}),this._showCursor(),this.coreService.triggerDataEvent(P.key,!0),!this.optionsService.rawOptions.screenReaderMode||D.altKey||D.ctrlKey?this.cancel(D,!0):void(this._keyDownHandled=!0))))}_isThirdLevelShift(D,O){let P=D.isMac&&!this.options.macOptionIsMeta&&O.altKey&&!O.ctrlKey&&!O.metaKey||D.isWindows&&O.altKey&&O.ctrlKey&&!O.metaKey||D.isWindows&&O.getModifierState("AltGraph");return O.type==="keypress"?P:P&&(!O.keyCode||O.keyCode>47)}_keyUp(D){this._keyDownSeen=!1,this._customKeyEventHandler&&this._customKeyEventHandler(D)===!1||(function(O){return O.keyCode===16||O.keyCode===17||O.keyCode===18}(D)||this.focus(),this.updateCursorStyle(D),this._keyPressHandled=!1)}_keyPress(D){let O;if(this._keyPressHandled=!1,this._keyDownHandled||this._customKeyEventHandler&&this._customKeyEventHandler(D)===!1)return!1;if(this.cancel(D),D.charCode)O=D.charCode;else if(D.which===null||D.which===void 0)O=D.keyCode;else{if(D.which===0||D.charCode===0)return!1;O=D.which}return!(!O||(D.altKey||D.ctrlKey||D.metaKey)&&!this._isThirdLevelShift(this.browser,D)||(O=String.fromCharCode(O),this._onKey.fire({key:O,domEvent:D}),this._showCursor(),this.coreService.triggerDataEvent(O,!0),this._keyPressHandled=!0,this._unprocessedDeadKey=!1,0))}_inputEvent(D){if(D.data&&D.inputType==="insertText"&&(!D.composed||!this._keyDownSeen)&&!this.optionsService.rawOptions.screenReaderMode){if(this._keyPressHandled)return!1;this._unprocessedDeadKey=!1;let O=D.data;return this.coreService.triggerDataEvent(O,!0),this.cancel(D),!0}return!1}resize(D,O){D!==this.cols||O!==this.rows?super.resize(D,O):this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure()}_afterResize(D,O){var P,N;(P=this._charSizeService)===null||P===void 0||P.measure(),(N=this.viewport)===null||N===void 0||N.syncScrollArea(!0)}clear(){var D;if(this.buffer.ybase!==0||this.buffer.y!==0){this.buffer.clearAllMarkers(),this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(let O=1;O<this.rows;O++)this.buffer.lines.push(this.buffer.getBlankLine(H.DEFAULT_ATTR_DATA));this._onScroll.fire({position:this.buffer.ydisp,source:0}),(D=this.viewport)===null||D===void 0||D.reset(),this.refresh(0,this.rows-1)}}reset(){var D,O;this.options.rows=this.rows,this.options.cols=this.cols;let P=this._customKeyEventHandler;this._setup(),super.reset(),(D=this._selectionService)===null||D===void 0||D.reset(),this._decorationService.reset(),(O=this.viewport)===null||O===void 0||O.reset(),this._customKeyEventHandler=P,this.refresh(0,this.rows-1)}clearTextureAtlas(){var D;(D=this._renderService)===null||D===void 0||D.clearTextureAtlas()}_reportFocus(){var D;!((D=this.element)===null||D===void 0)&&D.classList.contains("focus")?this.coreService.triggerDataEvent(B.C0.ESC+"[I"):this.coreService.triggerDataEvent(B.C0.ESC+"[O")}_reportWindowsOptions(D){if(this._renderService)switch(D){case j.WindowsOptionsReportType.GET_WIN_SIZE_PIXELS:let O=this._renderService.dimensions.css.canvas.width.toFixed(0),P=this._renderService.dimensions.css.canvas.height.toFixed(0);this.coreService.triggerDataEvent(`${B.C0.ESC}[4;${P};${O}t`);break;case j.WindowsOptionsReportType.GET_CELL_SIZE_PIXELS:let N=this._renderService.dimensions.css.cell.width.toFixed(0),Q=this._renderService.dimensions.css.cell.height.toFixed(0);this.coreService.triggerDataEvent(`${B.C0.ESC}[6;${Q};${N}t`)}}cancel(D,O){if(this.options.cancelEvents||O)return D.preventDefault(),D.stopPropagation(),!1}}i.Terminal=W},9924:(s,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.TimeBasedDebouncer=void 0,i.TimeBasedDebouncer=class{constructor(o,a=1e3){this._renderCallback=o,this._debounceThresholdMS=a,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}dispose(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)}refresh(o,a,u){this._rowCount=u,o=o!==void 0?o:0,a=a!==void 0?a:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,o):o,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,a):a;let c=Date.now();if(c-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=c,this._innerRefresh();else if(!this._additionalRefreshRequested){let p=c-this._lastRefreshMs,g=this._debounceThresholdMS-p;this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout(()=>{this._lastRefreshMs=Date.now(),this._innerRefresh(),this._additionalRefreshRequested=!1,this._refreshTimeoutID=void 0},g)}}_innerRefresh(){if(this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return;let o=Math.max(this._rowStart,0),a=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(o,a)}}},1680:function(s,i,o){var a=this&&this.__decorate||function(d,h,f,m){var _,S=arguments.length,b=S<3?h:m===null?m=Object.getOwnPropertyDescriptor(h,f):m;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(d,h,f,m);else for(var v=d.length-1;v>=0;v--)(_=d[v])&&(b=(S<3?_(b):S>3?_(h,f,b):_(h,f))||b);return S>3&&b&&Object.defineProperty(h,f,b),b},u=this&&this.__param||function(d,h){return function(f,m){h(f,m,d)}};Object.defineProperty(i,"__esModule",{value:!0}),i.Viewport=void 0;let c=o(3656),p=o(4725),g=o(8460),C=o(844),y=o(2585),l=i.Viewport=class extends C.Disposable{constructor(d,h,f,m,_,S,b,v){super(),this._viewportElement=d,this._scrollArea=h,this._bufferService=f,this._optionsService=m,this._charSizeService=_,this._renderService=S,this._coreBrowserService=b,this.scrollBarWidth=0,this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._wheelPartialScroll=0,this._refreshAnimationFrame=null,this._ignoreNextScrollEvent=!1,this._smoothScrollState={startTime:0,origin:-1,target:-1},this._onRequestScrollLines=this.register(new g.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this.scrollBarWidth=this._viewportElement.offsetWidth-this._scrollArea.offsetWidth||15,this.register((0,c.addDisposableDomListener)(this._viewportElement,"scroll",this._handleScroll.bind(this))),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(w=>this._activeBuffer=w.activeBuffer)),this._renderDimensions=this._renderService.dimensions,this.register(this._renderService.onDimensionsChange(w=>this._renderDimensions=w)),this._handleThemeChange(v.colors),this.register(v.onChangeColors(w=>this._handleThemeChange(w))),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.syncScrollArea())),setTimeout(()=>this.syncScrollArea())}_handleThemeChange(d){this._viewportElement.style.backgroundColor=d.background.css}reset(){this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._coreBrowserService.window.requestAnimationFrame(()=>this.syncScrollArea())}_refresh(d){if(d)return this._innerRefresh(),void(this._refreshAnimationFrame!==null&&this._coreBrowserService.window.cancelAnimationFrame(this._refreshAnimationFrame));this._refreshAnimationFrame===null&&(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._charSizeService.height>0){this._currentRowHeight=this._renderService.dimensions.device.cell.height/this._coreBrowserService.dpr,this._currentDeviceCellHeight=this._renderService.dimensions.device.cell.height,this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;let h=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._renderService.dimensions.css.canvas.height);this._lastRecordedBufferHeight!==h&&(this._lastRecordedBufferHeight=h,this._scrollArea.style.height=this._lastRecordedBufferHeight+"px")}let d=this._bufferService.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==d&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=d),this._refreshAnimationFrame=null}syncScrollArea(d=!1){if(this._lastRecordedBufferLength!==this._bufferService.buffer.lines.length)return this._lastRecordedBufferLength=this._bufferService.buffer.lines.length,void this._refresh(d);this._lastRecordedViewportHeight===this._renderService.dimensions.css.canvas.height&&this._lastScrollTop===this._activeBuffer.ydisp*this._currentRowHeight&&this._renderDimensions.device.cell.height===this._currentDeviceCellHeight||this._refresh(d)}_handleScroll(d){if(this._lastScrollTop=this._viewportElement.scrollTop,!this._viewportElement.offsetParent)return;if(this._ignoreNextScrollEvent)return this._ignoreNextScrollEvent=!1,void this._onRequestScrollLines.fire({amount:0,suppressScrollEvent:!0});let h=Math.round(this._lastScrollTop/this._currentRowHeight)-this._bufferService.buffer.ydisp;this._onRequestScrollLines.fire({amount:h,suppressScrollEvent:!0})}_smoothScroll(){if(this._isDisposed||this._smoothScrollState.origin===-1||this._smoothScrollState.target===-1)return;let d=this._smoothScrollPercent();this._viewportElement.scrollTop=this._smoothScrollState.origin+Math.round(d*(this._smoothScrollState.target-this._smoothScrollState.origin)),d<1?this._coreBrowserService.window.requestAnimationFrame(()=>this._smoothScroll()):this._clearSmoothScrollState()}_smoothScrollPercent(){return this._optionsService.rawOptions.smoothScrollDuration&&this._smoothScrollState.startTime?Math.max(Math.min((Date.now()-this._smoothScrollState.startTime)/this._optionsService.rawOptions.smoothScrollDuration,1),0):1}_clearSmoothScrollState(){this._smoothScrollState.startTime=0,this._smoothScrollState.origin=-1,this._smoothScrollState.target=-1}_bubbleScroll(d,h){let f=this._viewportElement.scrollTop+this._lastRecordedViewportHeight;return!(h<0&&this._viewportElement.scrollTop!==0||h>0&&f<this._lastRecordedBufferHeight)||(d.cancelable&&d.preventDefault(),!1)}handleWheel(d){let h=this._getPixelsScrolled(d);return h!==0&&(this._optionsService.rawOptions.smoothScrollDuration?(this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target===-1?this._smoothScrollState.target=this._viewportElement.scrollTop+h:this._smoothScrollState.target+=h,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()):this._viewportElement.scrollTop+=h,this._bubbleScroll(d,h))}scrollLines(d){if(d!==0)if(this._optionsService.rawOptions.smoothScrollDuration){let h=d*this._currentRowHeight;this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target=this._smoothScrollState.origin+h,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()}else this._onRequestScrollLines.fire({amount:d,suppressScrollEvent:!1})}_getPixelsScrolled(d){if(d.deltaY===0||d.shiftKey)return 0;let h=this._applyScrollModifier(d.deltaY,d);return d.deltaMode===WheelEvent.DOM_DELTA_LINE?h*=this._currentRowHeight:d.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(h*=this._currentRowHeight*this._bufferService.rows),h}getBufferElements(d,h){var f;let m,_="",S=[],b=h??this._bufferService.buffer.lines.length,v=this._bufferService.buffer.lines;for(let w=d;w<b;w++){let I=v.get(w);if(!I)continue;let R=(f=v.get(w+1))===null||f===void 0?void 0:f.isWrapped;if(_+=I.translateToString(!R),!R||w===v.length-1){let x=document.createElement("div");x.textContent=_,S.push(x),_.length>0&&(m=x),_=""}}return{bufferElements:S,cursorElement:m}}getLinesScrolled(d){if(d.deltaY===0||d.shiftKey)return 0;let h=this._applyScrollModifier(d.deltaY,d);return d.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(h/=this._currentRowHeight+0,this._wheelPartialScroll+=h,h=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):d.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(h*=this._bufferService.rows),h}_applyScrollModifier(d,h){let f=this._optionsService.rawOptions.fastScrollModifier;return f==="alt"&&h.altKey||f==="ctrl"&&h.ctrlKey||f==="shift"&&h.shiftKey?d*this._optionsService.rawOptions.fastScrollSensitivity*this._optionsService.rawOptions.scrollSensitivity:d*this._optionsService.rawOptions.scrollSensitivity}handleTouchStart(d){this._lastTouchY=d.touches[0].pageY}handleTouchMove(d){let h=this._lastTouchY-d.touches[0].pageY;return this._lastTouchY=d.touches[0].pageY,h!==0&&(this._viewportElement.scrollTop+=h,this._bubbleScroll(d,h))}};i.Viewport=l=a([u(2,y.IBufferService),u(3,y.IOptionsService),u(4,p.ICharSizeService),u(5,p.IRenderService),u(6,p.ICoreBrowserService),u(7,p.IThemeService)],l)},3107:function(s,i,o){var a=this&&this.__decorate||function(l,d,h,f){var m,_=arguments.length,S=_<3?d:f===null?f=Object.getOwnPropertyDescriptor(d,h):f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(l,d,h,f);else for(var b=l.length-1;b>=0;b--)(m=l[b])&&(S=(_<3?m(S):_>3?m(d,h,S):m(d,h))||S);return _>3&&S&&Object.defineProperty(d,h,S),S},u=this&&this.__param||function(l,d){return function(h,f){d(h,f,l)}};Object.defineProperty(i,"__esModule",{value:!0}),i.BufferDecorationRenderer=void 0;let c=o(3656),p=o(4725),g=o(844),C=o(2585),y=i.BufferDecorationRenderer=class extends g.Disposable{constructor(l,d,h,f){super(),this._screenElement=l,this._bufferService=d,this._decorationService=h,this._renderService=f,this._decorationElements=new Map,this._altBufferIsActive=!1,this._dimensionsChanged=!1,this._container=document.createElement("div"),this._container.classList.add("xterm-decoration-container"),this._screenElement.appendChild(this._container),this.register(this._renderService.onRenderedViewportChange(()=>this._doRefreshDecorations())),this.register(this._renderService.onDimensionsChange(()=>{this._dimensionsChanged=!0,this._queueRefresh()})),this.register((0,c.addDisposableDomListener)(window,"resize",()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._altBufferIsActive=this._bufferService.buffer===this._bufferService.buffers.alt})),this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh())),this.register(this._decorationService.onDecorationRemoved(m=>this._removeDecoration(m))),this.register((0,g.toDisposable)(()=>{this._container.remove(),this._decorationElements.clear()}))}_queueRefresh(){this._animationFrame===void 0&&(this._animationFrame=this._renderService.addRefreshCallback(()=>{this._doRefreshDecorations(),this._animationFrame=void 0}))}_doRefreshDecorations(){for(let l of this._decorationService.decorations)this._renderDecoration(l);this._dimensionsChanged=!1}_renderDecoration(l){this._refreshStyle(l),this._dimensionsChanged&&this._refreshXPosition(l)}_createElement(l){var d,h;let f=document.createElement("div");f.classList.add("xterm-decoration"),f.classList.toggle("xterm-decoration-top-layer",((d=l?.options)===null||d===void 0?void 0:d.layer)==="top"),f.style.width=`${Math.round((l.options.width||1)*this._renderService.dimensions.css.cell.width)}px`,f.style.height=(l.options.height||1)*this._renderService.dimensions.css.cell.height+"px",f.style.top=(l.marker.line-this._bufferService.buffers.active.ydisp)*this._renderService.dimensions.css.cell.height+"px",f.style.lineHeight=`${this._renderService.dimensions.css.cell.height}px`;let m=(h=l.options.x)!==null&&h!==void 0?h:0;return m&&m>this._bufferService.cols&&(f.style.display="none"),this._refreshXPosition(l,f),f}_refreshStyle(l){let d=l.marker.line-this._bufferService.buffers.active.ydisp;if(d<0||d>=this._bufferService.rows)l.element&&(l.element.style.display="none",l.onRenderEmitter.fire(l.element));else{let h=this._decorationElements.get(l);h||(h=this._createElement(l),l.element=h,this._decorationElements.set(l,h),this._container.appendChild(h),l.onDispose(()=>{this._decorationElements.delete(l),h.remove()})),h.style.top=d*this._renderService.dimensions.css.cell.height+"px",h.style.display=this._altBufferIsActive?"none":"block",l.onRenderEmitter.fire(h)}}_refreshXPosition(l,d=l.element){var h;if(!d)return;let f=(h=l.options.x)!==null&&h!==void 0?h:0;(l.options.anchor||"left")==="right"?d.style.right=f?f*this._renderService.dimensions.css.cell.width+"px":"":d.style.left=f?f*this._renderService.dimensions.css.cell.width+"px":""}_removeDecoration(l){var d;(d=this._decorationElements.get(l))===null||d===void 0||d.remove(),this._decorationElements.delete(l),l.dispose()}};i.BufferDecorationRenderer=y=a([u(1,C.IBufferService),u(2,C.IDecorationService),u(3,p.IRenderService)],y)},5871:(s,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ColorZoneStore=void 0,i.ColorZoneStore=class{constructor(){this._zones=[],this._zonePool=[],this._zonePoolIndex=0,this._linePadding={full:0,left:0,center:0,right:0}}get zones(){return this._zonePool.length=Math.min(this._zonePool.length,this._zones.length),this._zones}clear(){this._zones.length=0,this._zonePoolIndex=0}addDecoration(o){if(o.options.overviewRulerOptions){for(let a of this._zones)if(a.color===o.options.overviewRulerOptions.color&&a.position===o.options.overviewRulerOptions.position){if(this._lineIntersectsZone(a,o.marker.line))return;if(this._lineAdjacentToZone(a,o.marker.line,o.options.overviewRulerOptions.position))return void this._addLineToZone(a,o.marker.line)}if(this._zonePoolIndex<this._zonePool.length)return this._zonePool[this._zonePoolIndex].color=o.options.overviewRulerOptions.color,this._zonePool[this._zonePoolIndex].position=o.options.overviewRulerOptions.position,this._zonePool[this._zonePoolIndex].startBufferLine=o.marker.line,this._zonePool[this._zonePoolIndex].endBufferLine=o.marker.line,void this._zones.push(this._zonePool[this._zonePoolIndex++]);this._zones.push({color:o.options.overviewRulerOptions.color,position:o.options.overviewRulerOptions.position,startBufferLine:o.marker.line,endBufferLine:o.marker.line}),this._zonePool.push(this._zones[this._zones.length-1]),this._zonePoolIndex++}}setPadding(o){this._linePadding=o}_lineIntersectsZone(o,a){return a>=o.startBufferLine&&a<=o.endBufferLine}_lineAdjacentToZone(o,a,u){return a>=o.startBufferLine-this._linePadding[u||"full"]&&a<=o.endBufferLine+this._linePadding[u||"full"]}_addLineToZone(o,a){o.startBufferLine=Math.min(o.startBufferLine,a),o.endBufferLine=Math.max(o.endBufferLine,a)}}},5744:function(s,i,o){var a=this&&this.__decorate||function(m,_,S,b){var v,w=arguments.length,I=w<3?_:b===null?b=Object.getOwnPropertyDescriptor(_,S):b;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")I=Reflect.decorate(m,_,S,b);else for(var R=m.length-1;R>=0;R--)(v=m[R])&&(I=(w<3?v(I):w>3?v(_,S,I):v(_,S))||I);return w>3&&I&&Object.defineProperty(_,S,I),I},u=this&&this.__param||function(m,_){return function(S,b){_(S,b,m)}};Object.defineProperty(i,"__esModule",{value:!0}),i.OverviewRulerRenderer=void 0;let c=o(5871),p=o(3656),g=o(4725),C=o(844),y=o(2585),l={full:0,left:0,center:0,right:0},d={full:0,left:0,center:0,right:0},h={full:0,left:0,center:0,right:0},f=i.OverviewRulerRenderer=class extends C.Disposable{get _width(){return this._optionsService.options.overviewRulerWidth||0}constructor(m,_,S,b,v,w,I){var R;super(),this._viewportElement=m,this._screenElement=_,this._bufferService=S,this._decorationService=b,this._renderService=v,this._optionsService=w,this._coreBrowseService=I,this._colorZoneStore=new c.ColorZoneStore,this._shouldUpdateDimensions=!0,this._shouldUpdateAnchor=!0,this._lastKnownBufferLength=0,this._canvas=document.createElement("canvas"),this._canvas.classList.add("xterm-decoration-overview-ruler"),this._refreshCanvasDimensions(),(R=this._viewportElement.parentElement)===null||R===void 0||R.insertBefore(this._canvas,this._viewportElement);let x=this._canvas.getContext("2d");if(!x)throw new Error("Ctx cannot be null");this._ctx=x,this._registerDecorationListeners(),this._registerBufferChangeListeners(),this._registerDimensionChangeListeners(),this.register((0,C.toDisposable)(()=>{var A;(A=this._canvas)===null||A===void 0||A.remove()}))}_registerDecorationListeners(){this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh(void 0,!0))),this.register(this._decorationService.onDecorationRemoved(()=>this._queueRefresh(void 0,!0)))}_registerBufferChangeListeners(){this.register(this._renderService.onRenderedViewportChange(()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._canvas.style.display=this._bufferService.buffer===this._bufferService.buffers.alt?"none":"block"})),this.register(this._bufferService.onScroll(()=>{this._lastKnownBufferLength!==this._bufferService.buffers.normal.lines.length&&(this._refreshDrawHeightConstants(),this._refreshColorZonePadding())}))}_registerDimensionChangeListeners(){this.register(this._renderService.onRender(()=>{this._containerHeight&&this._containerHeight===this._screenElement.clientHeight||(this._queueRefresh(!0),this._containerHeight=this._screenElement.clientHeight)})),this.register(this._optionsService.onSpecificOptionChange("overviewRulerWidth",()=>this._queueRefresh(!0))),this.register((0,p.addDisposableDomListener)(this._coreBrowseService.window,"resize",()=>this._queueRefresh(!0))),this._queueRefresh(!0)}_refreshDrawConstants(){let m=Math.floor(this._canvas.width/3),_=Math.ceil(this._canvas.width/3);d.full=this._canvas.width,d.left=m,d.center=_,d.right=m,this._refreshDrawHeightConstants(),h.full=0,h.left=0,h.center=d.left,h.right=d.left+d.center}_refreshDrawHeightConstants(){l.full=Math.round(2*this._coreBrowseService.dpr);let m=this._canvas.height/this._bufferService.buffer.lines.length,_=Math.round(Math.max(Math.min(m,12),6)*this._coreBrowseService.dpr);l.left=_,l.center=_,l.right=_}_refreshColorZonePadding(){this._colorZoneStore.setPadding({full:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*l.full),left:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*l.left),center:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*l.center),right:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*l.right)}),this._lastKnownBufferLength=this._bufferService.buffers.normal.lines.length}_refreshCanvasDimensions(){this._canvas.style.width=`${this._width}px`,this._canvas.width=Math.round(this._width*this._coreBrowseService.dpr),this._canvas.style.height=`${this._screenElement.clientHeight}px`,this._canvas.height=Math.round(this._screenElement.clientHeight*this._coreBrowseService.dpr),this._refreshDrawConstants(),this._refreshColorZonePadding()}_refreshDecorations(){this._shouldUpdateDimensions&&this._refreshCanvasDimensions(),this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._colorZoneStore.clear();for(let _ of this._decorationService.decorations)this._colorZoneStore.addDecoration(_);this._ctx.lineWidth=1;let m=this._colorZoneStore.zones;for(let _ of m)_.position!=="full"&&this._renderColorZone(_);for(let _ of m)_.position==="full"&&this._renderColorZone(_);this._shouldUpdateDimensions=!1,this._shouldUpdateAnchor=!1}_renderColorZone(m){this._ctx.fillStyle=m.color,this._ctx.fillRect(h[m.position||"full"],Math.round((this._canvas.height-1)*(m.startBufferLine/this._bufferService.buffers.active.lines.length)-l[m.position||"full"]/2),d[m.position||"full"],Math.round((this._canvas.height-1)*((m.endBufferLine-m.startBufferLine)/this._bufferService.buffers.active.lines.length)+l[m.position||"full"]))}_queueRefresh(m,_){this._shouldUpdateDimensions=m||this._shouldUpdateDimensions,this._shouldUpdateAnchor=_||this._shouldUpdateAnchor,this._animationFrame===void 0&&(this._animationFrame=this._coreBrowseService.window.requestAnimationFrame(()=>{this._refreshDecorations(),this._animationFrame=void 0}))}};i.OverviewRulerRenderer=f=a([u(2,y.IBufferService),u(3,y.IDecorationService),u(4,g.IRenderService),u(5,y.IOptionsService),u(6,g.ICoreBrowserService)],f)},2950:function(s,i,o){var a=this&&this.__decorate||function(y,l,d,h){var f,m=arguments.length,_=m<3?l:h===null?h=Object.getOwnPropertyDescriptor(l,d):h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")_=Reflect.decorate(y,l,d,h);else for(var S=y.length-1;S>=0;S--)(f=y[S])&&(_=(m<3?f(_):m>3?f(l,d,_):f(l,d))||_);return m>3&&_&&Object.defineProperty(l,d,_),_},u=this&&this.__param||function(y,l){return function(d,h){l(d,h,y)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CompositionHelper=void 0;let c=o(4725),p=o(2585),g=o(2584),C=i.CompositionHelper=class{get isComposing(){return this._isComposing}constructor(y,l,d,h,f,m){this._textarea=y,this._compositionView=l,this._bufferService=d,this._optionsService=h,this._coreService=f,this._renderService=m,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}compositionstart(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")}compositionupdate(y){this._compositionView.textContent=y.data,this.updateCompositionElements(),setTimeout(()=>{this._compositionPosition.end=this._textarea.value.length},0)}compositionend(){this._finalizeComposition(!0)}keydown(y){if(this._isComposing||this._isSendingComposition){if(y.keyCode===229||y.keyCode===16||y.keyCode===17||y.keyCode===18)return!1;this._finalizeComposition(!1)}return y.keyCode!==229||(this._handleAnyTextareaChanges(),!1)}_finalizeComposition(y){if(this._compositionView.classList.remove("active"),this._isComposing=!1,y){let l={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout(()=>{if(this._isSendingComposition){let d;this._isSendingComposition=!1,l.start+=this._dataAlreadySent.length,d=this._isComposing?this._textarea.value.substring(l.start,l.end):this._textarea.value.substring(l.start),d.length>0&&this._coreService.triggerDataEvent(d,!0)}},0)}else{this._isSendingComposition=!1;let l=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(l,!0)}}_handleAnyTextareaChanges(){let y=this._textarea.value;setTimeout(()=>{if(!this._isComposing){let l=this._textarea.value,d=l.replace(y,"");this._dataAlreadySent=d,l.length>y.length?this._coreService.triggerDataEvent(d,!0):l.length<y.length?this._coreService.triggerDataEvent(`${g.C0.DEL}`,!0):l.length===y.length&&l!==y&&this._coreService.triggerDataEvent(l,!0)}},0)}updateCompositionElements(y){if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){let l=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),d=this._renderService.dimensions.css.cell.height,h=this._bufferService.buffer.y*this._renderService.dimensions.css.cell.height,f=l*this._renderService.dimensions.css.cell.width;this._compositionView.style.left=f+"px",this._compositionView.style.top=h+"px",this._compositionView.style.height=d+"px",this._compositionView.style.lineHeight=d+"px",this._compositionView.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._compositionView.style.fontSize=this._optionsService.rawOptions.fontSize+"px";let m=this._compositionView.getBoundingClientRect();this._textarea.style.left=f+"px",this._textarea.style.top=h+"px",this._textarea.style.width=Math.max(m.width,1)+"px",this._textarea.style.height=Math.max(m.height,1)+"px",this._textarea.style.lineHeight=m.height+"px"}y||setTimeout(()=>this.updateCompositionElements(!0),0)}}};i.CompositionHelper=C=a([u(2,p.IBufferService),u(3,p.IOptionsService),u(4,p.ICoreService),u(5,c.IRenderService)],C)},9806:(s,i)=>{function o(a,u,c){let p=c.getBoundingClientRect(),g=a.getComputedStyle(c),C=parseInt(g.getPropertyValue("padding-left")),y=parseInt(g.getPropertyValue("padding-top"));return[u.clientX-p.left-C,u.clientY-p.top-y]}Object.defineProperty(i,"__esModule",{value:!0}),i.getCoords=i.getCoordsRelativeToElement=void 0,i.getCoordsRelativeToElement=o,i.getCoords=function(a,u,c,p,g,C,y,l,d){if(!C)return;let h=o(a,u,c);return h?(h[0]=Math.ceil((h[0]+(d?y/2:0))/y),h[1]=Math.ceil(h[1]/l),h[0]=Math.min(Math.max(h[0],1),p+(d?1:0)),h[1]=Math.min(Math.max(h[1],1),g),h):void 0}},9504:(s,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.moveToCellSequence=void 0;let a=o(2584);function u(l,d,h,f){let m=l-c(l,h),_=d-c(d,h),S=Math.abs(m-_)-function(b,v,w){let I=0,R=b-c(b,w),x=v-c(v,w);for(let A=0;A<Math.abs(R-x);A++){let L=p(b,v)==="A"?-1:1,F=w.buffer.lines.get(R+L*A);F?.isWrapped&&I++}return I}(l,d,h);return y(S,C(p(l,d),f))}function c(l,d){let h=0,f=d.buffer.lines.get(l),m=f?.isWrapped;for(;m&&l>=0&&l<d.rows;)h++,f=d.buffer.lines.get(--l),m=f?.isWrapped;return h}function p(l,d){return l>d?"A":"B"}function g(l,d,h,f,m,_){let S=l,b=d,v="";for(;S!==h||b!==f;)S+=m?1:-1,m&&S>_.cols-1?(v+=_.buffer.translateBufferLineToString(b,!1,l,S),S=0,l=0,b++):!m&&S<0&&(v+=_.buffer.translateBufferLineToString(b,!1,0,l+1),S=_.cols-1,l=S,b--);return v+_.buffer.translateBufferLineToString(b,!1,l,S)}function C(l,d){let h=d?"O":"[";return a.C0.ESC+h+l}function y(l,d){l=Math.floor(l);let h="";for(let f=0;f<l;f++)h+=d;return h}i.moveToCellSequence=function(l,d,h,f){let m=h.buffer.x,_=h.buffer.y;if(!h.buffer.hasScrollback)return function(v,w,I,R,x,A){return u(w,R,x,A).length===0?"":y(g(v,w,v,w-c(w,x),!1,x).length,C("D",A))}(m,_,0,d,h,f)+u(_,d,h,f)+function(v,w,I,R,x,A){let L;L=u(w,R,x,A).length>0?R-c(R,x):w;let F=R,H=function(B,E,M,T,k,j){let U;return U=u(M,T,k,j).length>0?T-c(T,k):E,B<M&&U<=T||B>=M&&U<T?"C":"D"}(v,w,I,R,x,A);return y(g(v,L,I,F,H==="C",x).length,C(H,A))}(m,_,l,d,h,f);let S;if(_===d)return S=m>l?"D":"C",y(Math.abs(m-l),C(S,f));S=_>d?"D":"C";let b=Math.abs(_-d);return y(function(v,w){return w.cols-v}(_>d?l:m,h)+(b-1)*h.cols+1+((_>d?m:l)-1),C(S,f))}},1296:function(s,i,o){var a=this&&this.__decorate||function(x,A,L,F){var H,B=arguments.length,E=B<3?A:F===null?F=Object.getOwnPropertyDescriptor(A,L):F;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(x,A,L,F);else for(var M=x.length-1;M>=0;M--)(H=x[M])&&(E=(B<3?H(E):B>3?H(A,L,E):H(A,L))||E);return B>3&&E&&Object.defineProperty(A,L,E),E},u=this&&this.__param||function(x,A){return function(L,F){A(L,F,x)}};Object.defineProperty(i,"__esModule",{value:!0}),i.DomRenderer=void 0;let c=o(3787),p=o(2550),g=o(2223),C=o(6171),y=o(4725),l=o(8055),d=o(8460),h=o(844),f=o(2585),m="xterm-dom-renderer-owner-",_="xterm-rows",S="xterm-fg-",b="xterm-bg-",v="xterm-focus",w="xterm-selection",I=1,R=i.DomRenderer=class extends h.Disposable{constructor(x,A,L,F,H,B,E,M,T,k){super(),this._element=x,this._screenElement=A,this._viewportElement=L,this._linkifier2=F,this._charSizeService=B,this._optionsService=E,this._bufferService=M,this._coreBrowserService=T,this._themeService=k,this._terminalClass=I++,this._rowElements=[],this.onRequestRedraw=this.register(new d.EventEmitter).event,this._rowContainer=document.createElement("div"),this._rowContainer.classList.add(_),this._rowContainer.style.lineHeight="normal",this._rowContainer.setAttribute("aria-hidden","true"),this._refreshRowElements(this._bufferService.cols,this._bufferService.rows),this._selectionContainer=document.createElement("div"),this._selectionContainer.classList.add(w),this._selectionContainer.setAttribute("aria-hidden","true"),this.dimensions=(0,C.createRenderDimensions)(),this._updateDimensions(),this.register(this._optionsService.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._themeService.onChangeColors(j=>this._injectCss(j))),this._injectCss(this._themeService.colors),this._rowFactory=H.createInstance(c.DomRendererRowFactory,document),this._element.classList.add(m+this._terminalClass),this._screenElement.appendChild(this._rowContainer),this._screenElement.appendChild(this._selectionContainer),this.register(this._linkifier2.onShowLinkUnderline(j=>this._handleLinkHover(j))),this.register(this._linkifier2.onHideLinkUnderline(j=>this._handleLinkLeave(j))),this.register((0,h.toDisposable)(()=>{this._element.classList.remove(m+this._terminalClass),this._rowContainer.remove(),this._selectionContainer.remove(),this._widthCache.dispose(),this._themeStyleElement.remove(),this._dimensionsStyleElement.remove()})),this._widthCache=new p.WidthCache(document),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}_updateDimensions(){let x=this._coreBrowserService.dpr;this.dimensions.device.char.width=this._charSizeService.width*x,this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*x),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.left=0,this.dimensions.device.char.top=0,this.dimensions.device.canvas.width=this.dimensions.device.cell.width*this._bufferService.cols,this.dimensions.device.canvas.height=this.dimensions.device.cell.height*this._bufferService.rows,this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/x),this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/x),this.dimensions.css.cell.width=this.dimensions.css.canvas.width/this._bufferService.cols,this.dimensions.css.cell.height=this.dimensions.css.canvas.height/this._bufferService.rows;for(let L of this._rowElements)L.style.width=`${this.dimensions.css.canvas.width}px`,L.style.height=`${this.dimensions.css.cell.height}px`,L.style.lineHeight=`${this.dimensions.css.cell.height}px`,L.style.overflow="hidden";this._dimensionsStyleElement||(this._dimensionsStyleElement=document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));let A=`${this._terminalSelector} .${_} span { display: inline-block; height: 100%; vertical-align: top;}`;this._dimensionsStyleElement.textContent=A,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._screenElement.style.height=`${this.dimensions.css.canvas.height}px`}_injectCss(x){this._themeStyleElement||(this._themeStyleElement=document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));let A=`${this._terminalSelector} .${_} { color: ${x.foreground.css}; font-family: ${this._optionsService.rawOptions.fontFamily}; font-size: ${this._optionsService.rawOptions.fontSize}px; font-kerning: none; white-space: pre}`;A+=`${this._terminalSelector} .${_} .xterm-dim { color: ${l.color.multiplyOpacity(x.foreground,.5).css};}`,A+=`${this._terminalSelector} span:not(.xterm-bold) { font-weight: ${this._optionsService.rawOptions.fontWeight};}${this._terminalSelector} span.xterm-bold { font-weight: ${this._optionsService.rawOptions.fontWeightBold};}${this._terminalSelector} span.xterm-italic { font-style: italic;}`,A+="@keyframes blink_box_shadow_"+this._terminalClass+" { 50% {  border-bottom-style: hidden; }}",A+="@keyframes blink_block_"+this._terminalClass+` { 0% {  background-color: ${x.cursor.css};  color: ${x.cursorAccent.css}; } 50% {  background-color: inherit;  color: ${x.cursor.css}; }}`,A+=`${this._terminalSelector} .${_}.${v} .xterm-cursor.xterm-cursor-blink:not(.xterm-cursor-block) { animation: blink_box_shadow_`+this._terminalClass+` 1s step-end infinite;}${this._terminalSelector} .${_}.${v} .xterm-cursor.xterm-cursor-blink.xterm-cursor-block { animation: blink_block_`+this._terminalClass+` 1s step-end infinite;}${this._terminalSelector} .${_} .xterm-cursor.xterm-cursor-block { background-color: ${x.cursor.css}; color: ${x.cursorAccent.css};}${this._terminalSelector} .${_} .xterm-cursor.xterm-cursor-outline { outline: 1px solid ${x.cursor.css}; outline-offset: -1px;}${this._terminalSelector} .${_} .xterm-cursor.xterm-cursor-bar { box-shadow: ${this._optionsService.rawOptions.cursorWidth}px 0 0 ${x.cursor.css} inset;}${this._terminalSelector} .${_} .xterm-cursor.xterm-cursor-underline { border-bottom: 1px ${x.cursor.css}; border-bottom-style: solid; height: calc(100% - 1px);}`,A+=`${this._terminalSelector} .${w} { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}${this._terminalSelector}.focus .${w} div { position: absolute; background-color: ${x.selectionBackgroundOpaque.css};}${this._terminalSelector} .${w} div { position: absolute; background-color: ${x.selectionInactiveBackgroundOpaque.css};}`;for(let[L,F]of x.ansi.entries())A+=`${this._terminalSelector} .${S}${L} { color: ${F.css}; }${this._terminalSelector} .${S}${L}.xterm-dim { color: ${l.color.multiplyOpacity(F,.5).css}; }${this._terminalSelector} .${b}${L} { background-color: ${F.css}; }`;A+=`${this._terminalSelector} .${S}${g.INVERTED_DEFAULT_COLOR} { color: ${l.color.opaque(x.background).css}; }${this._terminalSelector} .${S}${g.INVERTED_DEFAULT_COLOR}.xterm-dim { color: ${l.color.multiplyOpacity(l.color.opaque(x.background),.5).css}; }${this._terminalSelector} .${b}${g.INVERTED_DEFAULT_COLOR} { background-color: ${x.foreground.css}; }`,this._themeStyleElement.textContent=A}_setDefaultSpacing(){let x=this.dimensions.css.cell.width-this._widthCache.get("W",!1,!1);this._rowContainer.style.letterSpacing=`${x}px`,this._rowFactory.defaultSpacing=x}handleDevicePixelRatioChange(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}_refreshRowElements(x,A){for(let L=this._rowElements.length;L<=A;L++){let F=document.createElement("div");this._rowContainer.appendChild(F),this._rowElements.push(F)}for(;this._rowElements.length>A;)this._rowContainer.removeChild(this._rowElements.pop())}handleResize(x,A){this._refreshRowElements(x,A),this._updateDimensions()}handleCharSizeChanged(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}handleBlur(){this._rowContainer.classList.remove(v)}handleFocus(){this._rowContainer.classList.add(v),this.renderRows(this._bufferService.buffer.y,this._bufferService.buffer.y)}handleSelectionChanged(x,A,L){if(this._selectionContainer.replaceChildren(),this._rowFactory.handleSelectionChanged(x,A,L),this.renderRows(0,this._bufferService.rows-1),!x||!A)return;let F=x[1]-this._bufferService.buffer.ydisp,H=A[1]-this._bufferService.buffer.ydisp,B=Math.max(F,0),E=Math.min(H,this._bufferService.rows-1);if(B>=this._bufferService.rows||E<0)return;let M=document.createDocumentFragment();if(L){let T=x[0]>A[0];M.appendChild(this._createSelectionElement(B,T?A[0]:x[0],T?x[0]:A[0],E-B+1))}else{let T=F===B?x[0]:0,k=B===H?A[0]:this._bufferService.cols;M.appendChild(this._createSelectionElement(B,T,k));let j=E-B-1;if(M.appendChild(this._createSelectionElement(B+1,0,this._bufferService.cols,j)),B!==E){let U=H===E?A[0]:this._bufferService.cols;M.appendChild(this._createSelectionElement(E,0,U))}}this._selectionContainer.appendChild(M)}_createSelectionElement(x,A,L,F=1){let H=document.createElement("div");return H.style.height=F*this.dimensions.css.cell.height+"px",H.style.top=x*this.dimensions.css.cell.height+"px",H.style.left=A*this.dimensions.css.cell.width+"px",H.style.width=this.dimensions.css.cell.width*(L-A)+"px",H}handleCursorMove(){}_handleOptionsChanged(){this._updateDimensions(),this._injectCss(this._themeService.colors),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}clear(){for(let x of this._rowElements)x.replaceChildren()}renderRows(x,A){let L=this._bufferService.buffer,F=L.ybase+L.y,H=Math.min(L.x,this._bufferService.cols-1),B=this._optionsService.rawOptions.cursorBlink,E=this._optionsService.rawOptions.cursorStyle,M=this._optionsService.rawOptions.cursorInactiveStyle;for(let T=x;T<=A;T++){let k=T+L.ydisp,j=this._rowElements[T],U=L.lines.get(k);if(!j||!U)break;j.replaceChildren(...this._rowFactory.createRow(U,k,k===F,E,M,H,B,this.dimensions.css.cell.width,this._widthCache,-1,-1))}}get _terminalSelector(){return`.${m}${this._terminalClass}`}_handleLinkHover(x){this._setCellUnderline(x.x1,x.x2,x.y1,x.y2,x.cols,!0)}_handleLinkLeave(x){this._setCellUnderline(x.x1,x.x2,x.y1,x.y2,x.cols,!1)}_setCellUnderline(x,A,L,F,H,B){L<0&&(x=0),F<0&&(A=0);let E=this._bufferService.rows-1;L=Math.max(Math.min(L,E),0),F=Math.max(Math.min(F,E),0),H=Math.min(H,this._bufferService.cols);let M=this._bufferService.buffer,T=M.ybase+M.y,k=Math.min(M.x,H-1),j=this._optionsService.rawOptions.cursorBlink,U=this._optionsService.rawOptions.cursorStyle,q=this._optionsService.rawOptions.cursorInactiveStyle;for(let W=L;W<=F;++W){let me=W+M.ydisp,D=this._rowElements[W],O=M.lines.get(me);if(!D||!O)break;D.replaceChildren(...this._rowFactory.createRow(O,me,me===T,U,q,k,j,this.dimensions.css.cell.width,this._widthCache,B?W===L?x:0:-1,B?(W===F?A:H)-1:-1))}}};i.DomRenderer=R=a([u(4,f.IInstantiationService),u(5,y.ICharSizeService),u(6,f.IOptionsService),u(7,f.IBufferService),u(8,y.ICoreBrowserService),u(9,y.IThemeService)],R)},3787:function(s,i,o){var a=this&&this.__decorate||function(S,b,v,w){var I,R=arguments.length,x=R<3?b:w===null?w=Object.getOwnPropertyDescriptor(b,v):w;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")x=Reflect.decorate(S,b,v,w);else for(var A=S.length-1;A>=0;A--)(I=S[A])&&(x=(R<3?I(x):R>3?I(b,v,x):I(b,v))||x);return R>3&&x&&Object.defineProperty(b,v,x),x},u=this&&this.__param||function(S,b){return function(v,w){b(v,w,S)}};Object.defineProperty(i,"__esModule",{value:!0}),i.DomRendererRowFactory=void 0;let c=o(2223),p=o(643),g=o(511),C=o(2585),y=o(8055),l=o(4725),d=o(4269),h=o(6171),f=o(3734),m=i.DomRendererRowFactory=class{constructor(S,b,v,w,I,R,x){this._document=S,this._characterJoinerService=b,this._optionsService=v,this._coreBrowserService=w,this._coreService=I,this._decorationService=R,this._themeService=x,this._workCell=new g.CellData,this._columnSelectMode=!1,this.defaultSpacing=0}handleSelectionChanged(S,b,v){this._selectionStart=S,this._selectionEnd=b,this._columnSelectMode=v}createRow(S,b,v,w,I,R,x,A,L,F,H){let B=[],E=this._characterJoinerService.getJoinedCharacters(b),M=this._themeService.colors,T,k=S.getNoBgTrimmedLength();v&&k<R+1&&(k=R+1);let j=0,U="",q=0,W=0,me=0,D=!1,O=0,P=!1,N=0,Q=[],$=F!==-1&&H!==-1;for(let de=0;de<k;de++){S.loadCell(de,this._workCell);let De=this._workCell.getWidth();if(De===0)continue;let ke=!1,sn=de,ne=this._workCell;if(E.length>0&&de===E[0][0]){ke=!0;let ve=E.shift();ne=new d.JoinedCellData(this._workCell,S.translateToString(!0,ve[0],ve[1]),ve[1]-ve[0]),sn=ve[1]-1,De=ne.getWidth()}let Jn=this._isCellInSelection(de,b),Hs=v&&de===R,js=$&&de>=F&&de<=H,Us=!1;this._decorationService.forEachDecorationAtCell(de,b,void 0,ve=>{Us=!0});let ai=ne.getChars()||p.WHITESPACE_CELL_CHAR;if(ai===" "&&(ne.isUnderline()||ne.isOverline())&&(ai="\xA0"),N=De*A-L.get(ai,ne.isBold(),ne.isItalic()),T){if(j&&(Jn&&P||!Jn&&!P&&ne.bg===q)&&(Jn&&P&&M.selectionForeground||ne.fg===W)&&ne.extended.ext===me&&js===D&&N===O&&!Hs&&!ke&&!Us){U+=ai,j++;continue}j&&(T.textContent=U),T=this._document.createElement("span"),j=0,U=""}else T=this._document.createElement("span");if(q=ne.bg,W=ne.fg,me=ne.extended.ext,D=js,O=N,P=Jn,ke&&R>=de&&R<=sn&&(R=de),!this._coreService.isCursorHidden&&Hs){if(Q.push("xterm-cursor"),this._coreBrowserService.isFocused)x&&Q.push("xterm-cursor-blink"),Q.push(w==="bar"?"xterm-cursor-bar":w==="underline"?"xterm-cursor-underline":"xterm-cursor-block");else if(I)switch(I){case"outline":Q.push("xterm-cursor-outline");break;case"block":Q.push("xterm-cursor-block");break;case"bar":Q.push("xterm-cursor-bar");break;case"underline":Q.push("xterm-cursor-underline")}}if(ne.isBold()&&Q.push("xterm-bold"),ne.isItalic()&&Q.push("xterm-italic"),ne.isDim()&&Q.push("xterm-dim"),U=ne.isInvisible()?p.WHITESPACE_CELL_CHAR:ne.getChars()||p.WHITESPACE_CELL_CHAR,ne.isUnderline()&&(Q.push(`xterm-underline-${ne.extended.underlineStyle}`),U===" "&&(U="\xA0"),!ne.isUnderlineColorDefault()))if(ne.isUnderlineColorRGB())T.style.textDecorationColor=`rgb(${f.AttributeData.toColorRGB(ne.getUnderlineColor()).join(",")})`;else{let ve=ne.getUnderlineColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&ne.isBold()&&ve<8&&(ve+=8),T.style.textDecorationColor=M.ansi[ve].css}ne.isOverline()&&(Q.push("xterm-overline"),U===" "&&(U="\xA0")),ne.isStrikethrough()&&Q.push("xterm-strikethrough"),js&&(T.style.textDecoration="underline");let Ue=ne.getFgColor(),er=ne.getFgColorMode(),nt=ne.getBgColor(),tr=ne.getBgColorMode(),$s=!!ne.isInverse();if($s){let ve=Ue;Ue=nt,nt=ve;let ap=er;er=tr,tr=ap}let Dt,Vs,Et,nr=!1;switch(this._decorationService.forEachDecorationAtCell(de,b,void 0,ve=>{ve.options.layer!=="top"&&nr||(ve.backgroundColorRGB&&(tr=50331648,nt=ve.backgroundColorRGB.rgba>>8&16777215,Dt=ve.backgroundColorRGB),ve.foregroundColorRGB&&(er=50331648,Ue=ve.foregroundColorRGB.rgba>>8&16777215,Vs=ve.foregroundColorRGB),nr=ve.options.layer==="top")}),!nr&&Jn&&(Dt=this._coreBrowserService.isFocused?M.selectionBackgroundOpaque:M.selectionInactiveBackgroundOpaque,nt=Dt.rgba>>8&16777215,tr=50331648,nr=!0,M.selectionForeground&&(er=50331648,Ue=M.selectionForeground.rgba>>8&16777215,Vs=M.selectionForeground)),nr&&Q.push("xterm-decoration-top"),tr){case 16777216:case 33554432:Et=M.ansi[nt],Q.push(`xterm-bg-${nt}`);break;case 50331648:Et=y.rgba.toColor(nt>>16,nt>>8&255,255&nt),this._addStyle(T,`background-color:#${_((nt>>>0).toString(16),"0",6)}`);break;default:$s?(Et=M.foreground,Q.push(`xterm-bg-${c.INVERTED_DEFAULT_COLOR}`)):Et=M.background}switch(Dt||ne.isDim()&&(Dt=y.color.multiplyOpacity(Et,.5)),er){case 16777216:case 33554432:ne.isBold()&&Ue<8&&this._optionsService.rawOptions.drawBoldTextInBrightColors&&(Ue+=8),this._applyMinimumContrast(T,Et,M.ansi[Ue],ne,Dt,void 0)||Q.push(`xterm-fg-${Ue}`);break;case 50331648:let ve=y.rgba.toColor(Ue>>16&255,Ue>>8&255,255&Ue);this._applyMinimumContrast(T,Et,ve,ne,Dt,Vs)||this._addStyle(T,`color:#${_(Ue.toString(16),"0",6)}`);break;default:this._applyMinimumContrast(T,Et,M.foreground,ne,Dt,void 0)||$s&&Q.push(`xterm-fg-${c.INVERTED_DEFAULT_COLOR}`)}Q.length&&(T.className=Q.join(" "),Q.length=0),Hs||ke||Us?T.textContent=U:j++,N!==this.defaultSpacing&&(T.style.letterSpacing=`${N}px`),B.push(T),de=sn}return T&&j&&(T.textContent=U),B}_applyMinimumContrast(S,b,v,w,I,R){if(this._optionsService.rawOptions.minimumContrastRatio===1||(0,h.excludeFromContrastRatioDemands)(w.getCode()))return!1;let x=this._getContrastCache(w),A;if(I||R||(A=x.getColor(b.rgba,v.rgba)),A===void 0){let L=this._optionsService.rawOptions.minimumContrastRatio/(w.isDim()?2:1);A=y.color.ensureContrastRatio(I||b,R||v,L),x.setColor((I||b).rgba,(R||v).rgba,A??null)}return!!A&&(this._addStyle(S,`color:${A.css}`),!0)}_getContrastCache(S){return S.isDim()?this._themeService.colors.halfContrastCache:this._themeService.colors.contrastCache}_addStyle(S,b){S.setAttribute("style",`${S.getAttribute("style")||""}${b};`)}_isCellInSelection(S,b){let v=this._selectionStart,w=this._selectionEnd;return!(!v||!w)&&(this._columnSelectMode?v[0]<=w[0]?S>=v[0]&&b>=v[1]&&S<w[0]&&b<=w[1]:S<v[0]&&b>=v[1]&&S>=w[0]&&b<=w[1]:b>v[1]&&b<w[1]||v[1]===w[1]&&b===v[1]&&S>=v[0]&&S<w[0]||v[1]<w[1]&&b===w[1]&&S<w[0]||v[1]<w[1]&&b===v[1]&&S>=v[0])}};function _(S,b,v){for(;S.length<v;)S=b+S;return S}i.DomRendererRowFactory=m=a([u(1,l.ICharacterJoinerService),u(2,C.IOptionsService),u(3,l.ICoreBrowserService),u(4,C.ICoreService),u(5,C.IDecorationService),u(6,l.IThemeService)],m)},2550:(s,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.WidthCache=void 0,i.WidthCache=class{constructor(o){this._flat=new Float32Array(256),this._font="",this._fontSize=0,this._weight="normal",this._weightBold="bold",this._measureElements=[],this._container=o.createElement("div"),this._container.style.position="absolute",this._container.style.top="-50000px",this._container.style.width="50000px",this._container.style.whiteSpace="pre",this._container.style.fontKerning="none";let a=o.createElement("span"),u=o.createElement("span");u.style.fontWeight="bold";let c=o.createElement("span");c.style.fontStyle="italic";let p=o.createElement("span");p.style.fontWeight="bold",p.style.fontStyle="italic",this._measureElements=[a,u,c,p],this._container.appendChild(a),this._container.appendChild(u),this._container.appendChild(c),this._container.appendChild(p),o.body.appendChild(this._container),this.clear()}dispose(){this._container.remove(),this._measureElements.length=0,this._holey=void 0}clear(){this._flat.fill(-9999),this._holey=new Map}setFont(o,a,u,c){o===this._font&&a===this._fontSize&&u===this._weight&&c===this._weightBold||(this._font=o,this._fontSize=a,this._weight=u,this._weightBold=c,this._container.style.fontFamily=this._font,this._container.style.fontSize=`${this._fontSize}px`,this._measureElements[0].style.fontWeight=`${u}`,this._measureElements[1].style.fontWeight=`${c}`,this._measureElements[2].style.fontWeight=`${u}`,this._measureElements[3].style.fontWeight=`${c}`,this.clear())}get(o,a,u){let c=0;if(!a&&!u&&o.length===1&&(c=o.charCodeAt(0))<256)return this._flat[c]!==-9999?this._flat[c]:this._flat[c]=this._measure(o,0);let p=o;a&&(p+="B"),u&&(p+="I");let g=this._holey.get(p);if(g===void 0){let C=0;a&&(C|=1),u&&(C|=2),g=this._measure(o,C),this._holey.set(p,g)}return g}_measure(o,a){let u=this._measureElements[a];return u.textContent=o.repeat(32),u.offsetWidth/32}}},2223:(s,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.TEXT_BASELINE=i.DIM_OPACITY=i.INVERTED_DEFAULT_COLOR=void 0;let a=o(6114);i.INVERTED_DEFAULT_COLOR=257,i.DIM_OPACITY=.5,i.TEXT_BASELINE=a.isFirefox||a.isLegacyEdge?"bottom":"ideographic"},6171:(s,i)=>{function o(a){return 57508<=a&&a<=57558}Object.defineProperty(i,"__esModule",{value:!0}),i.createRenderDimensions=i.excludeFromContrastRatioDemands=i.isRestrictedPowerlineGlyph=i.isPowerlineGlyph=i.throwIfFalsy=void 0,i.throwIfFalsy=function(a){if(!a)throw new Error("value must not be falsy");return a},i.isPowerlineGlyph=o,i.isRestrictedPowerlineGlyph=function(a){return 57520<=a&&a<=57527},i.excludeFromContrastRatioDemands=function(a){return o(a)||function(u){return 9472<=u&&u<=9631}(a)},i.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}}},456:(s,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.SelectionModel=void 0,i.SelectionModel=class{constructor(o){this._bufferService=o,this.isSelectAllActive=!1,this.selectionStartLength=0}clearSelection(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0}get finalSelectionStart(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart}get finalSelectionEnd(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){let o=this.selectionStart[0]+this.selectionStartLength;return o>this._bufferService.cols?o%this._bufferService.cols==0?[this._bufferService.cols,this.selectionStart[1]+Math.floor(o/this._bufferService.cols)-1]:[o%this._bufferService.cols,this.selectionStart[1]+Math.floor(o/this._bufferService.cols)]:[o,this.selectionStart[1]]}if(this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]){let o=this.selectionStart[0]+this.selectionStartLength;return o>this._bufferService.cols?[o%this._bufferService.cols,this.selectionStart[1]+Math.floor(o/this._bufferService.cols)]:[Math.max(o,this.selectionEnd[0]),this.selectionEnd[1]]}return this.selectionEnd}}areSelectionValuesReversed(){let o=this.selectionStart,a=this.selectionEnd;return!(!o||!a)&&(o[1]>a[1]||o[1]===a[1]&&o[0]>a[0])}handleTrim(o){return this.selectionStart&&(this.selectionStart[1]-=o),this.selectionEnd&&(this.selectionEnd[1]-=o),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)}}},428:function(s,i,o){var a=this&&this.__decorate||function(l,d,h,f){var m,_=arguments.length,S=_<3?d:f===null?f=Object.getOwnPropertyDescriptor(d,h):f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(l,d,h,f);else for(var b=l.length-1;b>=0;b--)(m=l[b])&&(S=(_<3?m(S):_>3?m(d,h,S):m(d,h))||S);return _>3&&S&&Object.defineProperty(d,h,S),S},u=this&&this.__param||function(l,d){return function(h,f){d(h,f,l)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CharSizeService=void 0;let c=o(2585),p=o(8460),g=o(844),C=i.CharSizeService=class extends g.Disposable{get hasValidSize(){return this.width>0&&this.height>0}constructor(l,d,h){super(),this._optionsService=h,this.width=0,this.height=0,this._onCharSizeChange=this.register(new p.EventEmitter),this.onCharSizeChange=this._onCharSizeChange.event,this._measureStrategy=new y(l,d,this._optionsService),this.register(this._optionsService.onMultipleOptionChange(["fontFamily","fontSize"],()=>this.measure()))}measure(){let l=this._measureStrategy.measure();l.width===this.width&&l.height===this.height||(this.width=l.width,this.height=l.height,this._onCharSizeChange.fire())}};i.CharSizeService=C=a([u(2,c.IOptionsService)],C);class y{constructor(d,h,f){this._document=d,this._parentElement=h,this._optionsService=f,this._result={width:0,height:0},this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W".repeat(32),this._measureElement.setAttribute("aria-hidden","true"),this._measureElement.style.whiteSpace="pre",this._measureElement.style.fontKerning="none",this._parentElement.appendChild(this._measureElement)}measure(){this._measureElement.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._measureElement.style.fontSize=`${this._optionsService.rawOptions.fontSize}px`;let d={height:Number(this._measureElement.offsetHeight),width:Number(this._measureElement.offsetWidth)};return d.width!==0&&d.height!==0&&(this._result.width=d.width/32,this._result.height=Math.ceil(d.height)),this._result}}},4269:function(s,i,o){var a=this&&this.__decorate||function(d,h,f,m){var _,S=arguments.length,b=S<3?h:m===null?m=Object.getOwnPropertyDescriptor(h,f):m;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(d,h,f,m);else for(var v=d.length-1;v>=0;v--)(_=d[v])&&(b=(S<3?_(b):S>3?_(h,f,b):_(h,f))||b);return S>3&&b&&Object.defineProperty(h,f,b),b},u=this&&this.__param||function(d,h){return function(f,m){h(f,m,d)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CharacterJoinerService=i.JoinedCellData=void 0;let c=o(3734),p=o(643),g=o(511),C=o(2585);class y extends c.AttributeData{constructor(h,f,m){super(),this.content=0,this.combinedData="",this.fg=h.fg,this.bg=h.bg,this.combinedData=f,this._width=m}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(h){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}i.JoinedCellData=y;let l=i.CharacterJoinerService=class xf{constructor(h){this._bufferService=h,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new g.CellData}register(h){let f={id:this._nextCharacterJoinerId++,handler:h};return this._characterJoiners.push(f),f.id}deregister(h){for(let f=0;f<this._characterJoiners.length;f++)if(this._characterJoiners[f].id===h)return this._characterJoiners.splice(f,1),!0;return!1}getJoinedCharacters(h){if(this._characterJoiners.length===0)return[];let f=this._bufferService.buffer.lines.get(h);if(!f||f.length===0)return[];let m=[],_=f.translateToString(!0),S=0,b=0,v=0,w=f.getFg(0),I=f.getBg(0);for(let R=0;R<f.getTrimmedLength();R++)if(f.loadCell(R,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==w||this._workCell.bg!==I){if(R-S>1){let x=this._getJoinedRanges(_,v,b,f,S);for(let A=0;A<x.length;A++)m.push(x[A])}S=R,v=b,w=this._workCell.fg,I=this._workCell.bg}b+=this._workCell.getChars().length||p.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-S>1){let R=this._getJoinedRanges(_,v,b,f,S);for(let x=0;x<R.length;x++)m.push(R[x])}return m}_getJoinedRanges(h,f,m,_,S){let b=h.substring(f,m),v=[];try{v=this._characterJoiners[0].handler(b)}catch(w){console.error(w)}for(let w=1;w<this._characterJoiners.length;w++)try{let I=this._characterJoiners[w].handler(b);for(let R=0;R<I.length;R++)xf._mergeRanges(v,I[R])}catch(I){console.error(I)}return this._stringRangesToCellRanges(v,_,S),v}_stringRangesToCellRanges(h,f,m){let _=0,S=!1,b=0,v=h[_];if(v){for(let w=m;w<this._bufferService.cols;w++){let I=f.getWidth(w),R=f.getString(w).length||p.WHITESPACE_CELL_CHAR.length;if(I!==0){if(!S&&v[0]<=b&&(v[0]=w,S=!0),v[1]<=b){if(v[1]=w,v=h[++_],!v)break;v[0]<=b?(v[0]=w,S=!0):S=!1}b+=R}}v&&(v[1]=this._bufferService.cols)}}static _mergeRanges(h,f){let m=!1;for(let _=0;_<h.length;_++){let S=h[_];if(m){if(f[1]<=S[0])return h[_-1][1]=f[1],h;if(f[1]<=S[1])return h[_-1][1]=Math.max(f[1],S[1]),h.splice(_,1),h;h.splice(_,1),_--}else{if(f[1]<=S[0])return h.splice(_,0,f),h;if(f[1]<=S[1])return S[0]=Math.min(f[0],S[0]),h;f[0]<S[1]&&(S[0]=Math.min(f[0],S[0]),m=!0)}}return m?h[h.length-1][1]=f[1]:h.push(f),h}};i.CharacterJoinerService=l=a([u(0,C.IBufferService)],l)},5114:(s,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CoreBrowserService=void 0,i.CoreBrowserService=class{constructor(o,a){this._textarea=o,this.window=a,this._isFocused=!1,this._cachedIsFocused=void 0,this._textarea.addEventListener("focus",()=>this._isFocused=!0),this._textarea.addEventListener("blur",()=>this._isFocused=!1)}get dpr(){return this.window.devicePixelRatio}get isFocused(){return this._cachedIsFocused===void 0&&(this._cachedIsFocused=this._isFocused&&this._textarea.ownerDocument.hasFocus(),queueMicrotask(()=>this._cachedIsFocused=void 0)),this._cachedIsFocused}}},8934:function(s,i,o){var a=this&&this.__decorate||function(C,y,l,d){var h,f=arguments.length,m=f<3?y:d===null?d=Object.getOwnPropertyDescriptor(y,l):d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")m=Reflect.decorate(C,y,l,d);else for(var _=C.length-1;_>=0;_--)(h=C[_])&&(m=(f<3?h(m):f>3?h(y,l,m):h(y,l))||m);return f>3&&m&&Object.defineProperty(y,l,m),m},u=this&&this.__param||function(C,y){return function(l,d){y(l,d,C)}};Object.defineProperty(i,"__esModule",{value:!0}),i.MouseService=void 0;let c=o(4725),p=o(9806),g=i.MouseService=class{constructor(C,y){this._renderService=C,this._charSizeService=y}getCoords(C,y,l,d,h){return(0,p.getCoords)(window,C,y,l,d,this._charSizeService.hasValidSize,this._renderService.dimensions.css.cell.width,this._renderService.dimensions.css.cell.height,h)}getMouseReportCoords(C,y){let l=(0,p.getCoordsRelativeToElement)(window,C,y);if(this._charSizeService.hasValidSize)return l[0]=Math.min(Math.max(l[0],0),this._renderService.dimensions.css.canvas.width-1),l[1]=Math.min(Math.max(l[1],0),this._renderService.dimensions.css.canvas.height-1),{col:Math.floor(l[0]/this._renderService.dimensions.css.cell.width),row:Math.floor(l[1]/this._renderService.dimensions.css.cell.height),x:Math.floor(l[0]),y:Math.floor(l[1])}}};i.MouseService=g=a([u(0,c.IRenderService),u(1,c.ICharSizeService)],g)},3230:function(s,i,o){var a=this&&this.__decorate||function(m,_,S,b){var v,w=arguments.length,I=w<3?_:b===null?b=Object.getOwnPropertyDescriptor(_,S):b;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")I=Reflect.decorate(m,_,S,b);else for(var R=m.length-1;R>=0;R--)(v=m[R])&&(I=(w<3?v(I):w>3?v(_,S,I):v(_,S))||I);return w>3&&I&&Object.defineProperty(_,S,I),I},u=this&&this.__param||function(m,_){return function(S,b){_(S,b,m)}};Object.defineProperty(i,"__esModule",{value:!0}),i.RenderService=void 0;let c=o(3656),p=o(6193),g=o(5596),C=o(4725),y=o(8460),l=o(844),d=o(7226),h=o(2585),f=i.RenderService=class extends l.Disposable{get dimensions(){return this._renderer.value.dimensions}constructor(m,_,S,b,v,w,I,R){if(super(),this._rowCount=m,this._charSizeService=b,this._renderer=this.register(new l.MutableDisposable),this._pausedResizeTask=new d.DebouncedIdleTask,this._isPaused=!1,this._needsFullRefresh=!1,this._isNextRenderRedrawOnly=!0,this._needsSelectionRefresh=!1,this._canvasWidth=0,this._canvasHeight=0,this._selectionState={start:void 0,end:void 0,columnSelectMode:!1},this._onDimensionsChange=this.register(new y.EventEmitter),this.onDimensionsChange=this._onDimensionsChange.event,this._onRenderedViewportChange=this.register(new y.EventEmitter),this.onRenderedViewportChange=this._onRenderedViewportChange.event,this._onRender=this.register(new y.EventEmitter),this.onRender=this._onRender.event,this._onRefreshRequest=this.register(new y.EventEmitter),this.onRefreshRequest=this._onRefreshRequest.event,this._renderDebouncer=new p.RenderDebouncer(I.window,(x,A)=>this._renderRows(x,A)),this.register(this._renderDebouncer),this._screenDprMonitor=new g.ScreenDprMonitor(I.window),this._screenDprMonitor.setListener(()=>this.handleDevicePixelRatioChange()),this.register(this._screenDprMonitor),this.register(w.onResize(()=>this._fullRefresh())),this.register(w.buffers.onBufferActivate(()=>{var x;return(x=this._renderer.value)===null||x===void 0?void 0:x.clear()})),this.register(S.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._charSizeService.onCharSizeChange(()=>this.handleCharSizeChanged())),this.register(v.onDecorationRegistered(()=>this._fullRefresh())),this.register(v.onDecorationRemoved(()=>this._fullRefresh())),this.register(S.onMultipleOptionChange(["customGlyphs","drawBoldTextInBrightColors","letterSpacing","lineHeight","fontFamily","fontSize","fontWeight","fontWeightBold","minimumContrastRatio"],()=>{this.clear(),this.handleResize(w.cols,w.rows),this._fullRefresh()})),this.register(S.onMultipleOptionChange(["cursorBlink","cursorStyle"],()=>this.refreshRows(w.buffer.y,w.buffer.y,!0))),this.register((0,c.addDisposableDomListener)(I.window,"resize",()=>this.handleDevicePixelRatioChange())),this.register(R.onChangeColors(()=>this._fullRefresh())),"IntersectionObserver"in I.window){let x=new I.window.IntersectionObserver(A=>this._handleIntersectionChange(A[A.length-1]),{threshold:0});x.observe(_),this.register({dispose:()=>x.disconnect()})}}_handleIntersectionChange(m){this._isPaused=m.isIntersecting===void 0?m.intersectionRatio===0:!m.isIntersecting,this._isPaused||this._charSizeService.hasValidSize||this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this._pausedResizeTask.flush(),this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)}refreshRows(m,_,S=!1){this._isPaused?this._needsFullRefresh=!0:(S||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(m,_,this._rowCount))}_renderRows(m,_){this._renderer.value&&(m=Math.min(m,this._rowCount-1),_=Math.min(_,this._rowCount-1),this._renderer.value.renderRows(m,_),this._needsSelectionRefresh&&(this._renderer.value.handleSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRenderedViewportChange.fire({start:m,end:_}),this._onRender.fire({start:m,end:_}),this._isNextRenderRedrawOnly=!0)}resize(m,_){this._rowCount=_,this._fireOnCanvasResize()}_handleOptionsChanged(){this._renderer.value&&(this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize())}_fireOnCanvasResize(){this._renderer.value&&(this._renderer.value.dimensions.css.canvas.width===this._canvasWidth&&this._renderer.value.dimensions.css.canvas.height===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.value.dimensions))}hasRenderer(){return!!this._renderer.value}setRenderer(m){this._renderer.value=m,this._renderer.value.onRequestRedraw(_=>this.refreshRows(_.start,_.end,!0)),this._needsSelectionRefresh=!0,this._fullRefresh()}addRefreshCallback(m){return this._renderDebouncer.addRefreshCallback(m)}_fullRefresh(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)}clearTextureAtlas(){var m,_;this._renderer.value&&((_=(m=this._renderer.value).clearTextureAtlas)===null||_===void 0||_.call(m),this._fullRefresh())}handleDevicePixelRatioChange(){this._charSizeService.measure(),this._renderer.value&&(this._renderer.value.handleDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1))}handleResize(m,_){this._renderer.value&&(this._isPaused?this._pausedResizeTask.set(()=>this._renderer.value.handleResize(m,_)):this._renderer.value.handleResize(m,_),this._fullRefresh())}handleCharSizeChanged(){var m;(m=this._renderer.value)===null||m===void 0||m.handleCharSizeChanged()}handleBlur(){var m;(m=this._renderer.value)===null||m===void 0||m.handleBlur()}handleFocus(){var m;(m=this._renderer.value)===null||m===void 0||m.handleFocus()}handleSelectionChanged(m,_,S){var b;this._selectionState.start=m,this._selectionState.end=_,this._selectionState.columnSelectMode=S,(b=this._renderer.value)===null||b===void 0||b.handleSelectionChanged(m,_,S)}handleCursorMove(){var m;(m=this._renderer.value)===null||m===void 0||m.handleCursorMove()}clear(){var m;(m=this._renderer.value)===null||m===void 0||m.clear()}};i.RenderService=f=a([u(2,h.IOptionsService),u(3,C.ICharSizeService),u(4,h.IDecorationService),u(5,h.IBufferService),u(6,C.ICoreBrowserService),u(7,C.IThemeService)],f)},9312:function(s,i,o){var a=this&&this.__decorate||function(v,w,I,R){var x,A=arguments.length,L=A<3?w:R===null?R=Object.getOwnPropertyDescriptor(w,I):R;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")L=Reflect.decorate(v,w,I,R);else for(var F=v.length-1;F>=0;F--)(x=v[F])&&(L=(A<3?x(L):A>3?x(w,I,L):x(w,I))||L);return A>3&&L&&Object.defineProperty(w,I,L),L},u=this&&this.__param||function(v,w){return function(I,R){w(I,R,v)}};Object.defineProperty(i,"__esModule",{value:!0}),i.SelectionService=void 0;let c=o(9806),p=o(9504),g=o(456),C=o(4725),y=o(8460),l=o(844),d=o(6114),h=o(4841),f=o(511),m=o(2585),_="\xA0",S=new RegExp(_,"g"),b=i.SelectionService=class extends l.Disposable{constructor(v,w,I,R,x,A,L,F,H){super(),this._element=v,this._screenElement=w,this._linkifier=I,this._bufferService=R,this._coreService=x,this._mouseService=A,this._optionsService=L,this._renderService=F,this._coreBrowserService=H,this._dragScrollAmount=0,this._enabled=!0,this._workCell=new f.CellData,this._mouseDownTimeStamp=0,this._oldHasSelection=!1,this._oldSelectionStart=void 0,this._oldSelectionEnd=void 0,this._onLinuxMouseSelection=this.register(new y.EventEmitter),this.onLinuxMouseSelection=this._onLinuxMouseSelection.event,this._onRedrawRequest=this.register(new y.EventEmitter),this.onRequestRedraw=this._onRedrawRequest.event,this._onSelectionChange=this.register(new y.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onRequestScrollLines=this.register(new y.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this._mouseMoveListener=B=>this._handleMouseMove(B),this._mouseUpListener=B=>this._handleMouseUp(B),this._coreService.onUserInput(()=>{this.hasSelection&&this.clearSelection()}),this._trimListener=this._bufferService.buffer.lines.onTrim(B=>this._handleTrim(B)),this.register(this._bufferService.buffers.onBufferActivate(B=>this._handleBufferActivate(B))),this.enable(),this._model=new g.SelectionModel(this._bufferService),this._activeSelectionMode=0,this.register((0,l.toDisposable)(()=>{this._removeMouseDownListeners()}))}reset(){this.clearSelection()}disable(){this.clearSelection(),this._enabled=!1}enable(){this._enabled=!0}get selectionStart(){return this._model.finalSelectionStart}get selectionEnd(){return this._model.finalSelectionEnd}get hasSelection(){let v=this._model.finalSelectionStart,w=this._model.finalSelectionEnd;return!(!v||!w||v[0]===w[0]&&v[1]===w[1])}get selectionText(){let v=this._model.finalSelectionStart,w=this._model.finalSelectionEnd;if(!v||!w)return"";let I=this._bufferService.buffer,R=[];if(this._activeSelectionMode===3){if(v[0]===w[0])return"";let x=v[0]<w[0]?v[0]:w[0],A=v[0]<w[0]?w[0]:v[0];for(let L=v[1];L<=w[1];L++){let F=I.translateBufferLineToString(L,!0,x,A);R.push(F)}}else{let x=v[1]===w[1]?w[0]:void 0;R.push(I.translateBufferLineToString(v[1],!0,v[0],x));for(let A=v[1]+1;A<=w[1]-1;A++){let L=I.lines.get(A),F=I.translateBufferLineToString(A,!0);L?.isWrapped?R[R.length-1]+=F:R.push(F)}if(v[1]!==w[1]){let A=I.lines.get(w[1]),L=I.translateBufferLineToString(w[1],!0,0,w[0]);A&&A.isWrapped?R[R.length-1]+=L:R.push(L)}}return R.map(x=>x.replace(S," ")).join(d.isWindows?`\r
`:`
`)}clearSelection(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()}refresh(v){this._refreshAnimationFrame||(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._refresh())),d.isLinux&&v&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)}_refresh(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:this._activeSelectionMode===3})}_isClickInSelection(v){let w=this._getMouseBufferCoords(v),I=this._model.finalSelectionStart,R=this._model.finalSelectionEnd;return!!(I&&R&&w)&&this._areCoordsInSelection(w,I,R)}isCellInSelection(v,w){let I=this._model.finalSelectionStart,R=this._model.finalSelectionEnd;return!(!I||!R)&&this._areCoordsInSelection([v,w],I,R)}_areCoordsInSelection(v,w,I){return v[1]>w[1]&&v[1]<I[1]||w[1]===I[1]&&v[1]===w[1]&&v[0]>=w[0]&&v[0]<I[0]||w[1]<I[1]&&v[1]===I[1]&&v[0]<I[0]||w[1]<I[1]&&v[1]===w[1]&&v[0]>=w[0]}_selectWordAtCursor(v,w){var I,R;let x=(R=(I=this._linkifier.currentLink)===null||I===void 0?void 0:I.link)===null||R===void 0?void 0:R.range;if(x)return this._model.selectionStart=[x.start.x-1,x.start.y-1],this._model.selectionStartLength=(0,h.getRangeLength)(x,this._bufferService.cols),this._model.selectionEnd=void 0,!0;let A=this._getMouseBufferCoords(v);return!!A&&(this._selectWordAt(A,w),this._model.selectionEnd=void 0,!0)}selectAll(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()}selectLines(v,w){this._model.clearSelection(),v=Math.max(v,0),w=Math.min(w,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,v],this._model.selectionEnd=[this._bufferService.cols,w],this.refresh(),this._onSelectionChange.fire()}_handleTrim(v){this._model.handleTrim(v)&&this.refresh()}_getMouseBufferCoords(v){let w=this._mouseService.getCoords(v,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(w)return w[0]--,w[1]--,w[1]+=this._bufferService.buffer.ydisp,w}_getMouseEventScrollAmount(v){let w=(0,c.getCoordsRelativeToElement)(this._coreBrowserService.window,v,this._screenElement)[1],I=this._renderService.dimensions.css.canvas.height;return w>=0&&w<=I?0:(w>I&&(w-=I),w=Math.min(Math.max(w,-50),50),w/=50,w/Math.abs(w)+Math.round(14*w))}shouldForceSelection(v){return d.isMac?v.altKey&&this._optionsService.rawOptions.macOptionClickForcesSelection:v.shiftKey}handleMouseDown(v){if(this._mouseDownTimeStamp=v.timeStamp,(v.button!==2||!this.hasSelection)&&v.button===0){if(!this._enabled){if(!this.shouldForceSelection(v))return;v.stopPropagation()}v.preventDefault(),this._dragScrollAmount=0,this._enabled&&v.shiftKey?this._handleIncrementalClick(v):v.detail===1?this._handleSingleClick(v):v.detail===2?this._handleDoubleClick(v):v.detail===3&&this._handleTripleClick(v),this._addMouseDownListeners(),this.refresh(!0)}}_addMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=this._coreBrowserService.window.setInterval(()=>this._dragScroll(),50)}_removeMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),this._coreBrowserService.window.clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0}_handleIncrementalClick(v){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(v))}_handleSingleClick(v){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(v)?3:0,this._model.selectionStart=this._getMouseBufferCoords(v),!this._model.selectionStart)return;this._model.selectionEnd=void 0;let w=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);w&&w.length!==this._model.selectionStart[0]&&w.hasWidth(this._model.selectionStart[0])===0&&this._model.selectionStart[0]++}_handleDoubleClick(v){this._selectWordAtCursor(v,!0)&&(this._activeSelectionMode=1)}_handleTripleClick(v){let w=this._getMouseBufferCoords(v);w&&(this._activeSelectionMode=2,this._selectLineAt(w[1]))}shouldColumnSelect(v){return v.altKey&&!(d.isMac&&this._optionsService.rawOptions.macOptionClickForcesSelection)}_handleMouseMove(v){if(v.stopImmediatePropagation(),!this._model.selectionStart)return;let w=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(v),!this._model.selectionEnd)return void this.refresh(!0);this._activeSelectionMode===2?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:this._activeSelectionMode===1&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(v),this._activeSelectionMode!==3&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));let I=this._bufferService.buffer;if(this._model.selectionEnd[1]<I.lines.length){let R=I.lines.get(this._model.selectionEnd[1]);R&&R.hasWidth(this._model.selectionEnd[0])===0&&this._model.selectionEnd[0]++}w&&w[0]===this._model.selectionEnd[0]&&w[1]===this._model.selectionEnd[1]||this.refresh(!0)}_dragScroll(){if(this._model.selectionEnd&&this._model.selectionStart&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});let v=this._bufferService.buffer;this._dragScrollAmount>0?(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(v.ydisp+this._bufferService.rows,v.lines.length-1)):(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=v.ydisp),this.refresh()}}_handleMouseUp(v){let w=v.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&w<500&&v.altKey&&this._optionsService.rawOptions.altClickMovesCursor){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){let I=this._mouseService.getCoords(v,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(I&&I[0]!==void 0&&I[1]!==void 0){let R=(0,p.moveToCellSequence)(I[0]-1,I[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(R,!0)}}}else this._fireEventIfSelectionChanged()}_fireEventIfSelectionChanged(){let v=this._model.finalSelectionStart,w=this._model.finalSelectionEnd,I=!(!v||!w||v[0]===w[0]&&v[1]===w[1]);I?v&&w&&(this._oldSelectionStart&&this._oldSelectionEnd&&v[0]===this._oldSelectionStart[0]&&v[1]===this._oldSelectionStart[1]&&w[0]===this._oldSelectionEnd[0]&&w[1]===this._oldSelectionEnd[1]||this._fireOnSelectionChange(v,w,I)):this._oldHasSelection&&this._fireOnSelectionChange(v,w,I)}_fireOnSelectionChange(v,w,I){this._oldSelectionStart=v,this._oldSelectionEnd=w,this._oldHasSelection=I,this._onSelectionChange.fire()}_handleBufferActivate(v){this.clearSelection(),this._trimListener.dispose(),this._trimListener=v.activeBuffer.lines.onTrim(w=>this._handleTrim(w))}_convertViewportColToCharacterIndex(v,w){let I=w;for(let R=0;w>=R;R++){let x=v.loadCell(R,this._workCell).getChars().length;this._workCell.getWidth()===0?I--:x>1&&w!==R&&(I+=x-1)}return I}setSelection(v,w,I){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[v,w],this._model.selectionStartLength=I,this.refresh(),this._fireEventIfSelectionChanged()}rightClickSelect(v){this._isClickInSelection(v)||(this._selectWordAtCursor(v,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())}_getWordAt(v,w,I=!0,R=!0){if(v[0]>=this._bufferService.cols)return;let x=this._bufferService.buffer,A=x.lines.get(v[1]);if(!A)return;let L=x.translateBufferLineToString(v[1],!1),F=this._convertViewportColToCharacterIndex(A,v[0]),H=F,B=v[0]-F,E=0,M=0,T=0,k=0;if(L.charAt(F)===" "){for(;F>0&&L.charAt(F-1)===" ";)F--;for(;H<L.length&&L.charAt(H+1)===" ";)H++}else{let q=v[0],W=v[0];A.getWidth(q)===0&&(E++,q--),A.getWidth(W)===2&&(M++,W++);let me=A.getString(W).length;for(me>1&&(k+=me-1,H+=me-1);q>0&&F>0&&!this._isCharWordSeparator(A.loadCell(q-1,this._workCell));){A.loadCell(q-1,this._workCell);let D=this._workCell.getChars().length;this._workCell.getWidth()===0?(E++,q--):D>1&&(T+=D-1,F-=D-1),F--,q--}for(;W<A.length&&H+1<L.length&&!this._isCharWordSeparator(A.loadCell(W+1,this._workCell));){A.loadCell(W+1,this._workCell);let D=this._workCell.getChars().length;this._workCell.getWidth()===2?(M++,W++):D>1&&(k+=D-1,H+=D-1),H++,W++}}H++;let j=F+B-E+T,U=Math.min(this._bufferService.cols,H-F+E+M-T-k);if(w||L.slice(F,H).trim()!==""){if(I&&j===0&&A.getCodePoint(0)!==32){let q=x.lines.get(v[1]-1);if(q&&A.isWrapped&&q.getCodePoint(this._bufferService.cols-1)!==32){let W=this._getWordAt([this._bufferService.cols-1,v[1]-1],!1,!0,!1);if(W){let me=this._bufferService.cols-W.start;j-=me,U+=me}}}if(R&&j+U===this._bufferService.cols&&A.getCodePoint(this._bufferService.cols-1)!==32){let q=x.lines.get(v[1]+1);if(q?.isWrapped&&q.getCodePoint(0)!==32){let W=this._getWordAt([0,v[1]+1],!1,!1,!0);W&&(U+=W.length)}}return{start:j,length:U}}}_selectWordAt(v,w){let I=this._getWordAt(v,w);if(I){for(;I.start<0;)I.start+=this._bufferService.cols,v[1]--;this._model.selectionStart=[I.start,v[1]],this._model.selectionStartLength=I.length}}_selectToWordAt(v){let w=this._getWordAt(v,!0);if(w){let I=v[1];for(;w.start<0;)w.start+=this._bufferService.cols,I--;if(!this._model.areSelectionValuesReversed())for(;w.start+w.length>this._bufferService.cols;)w.length-=this._bufferService.cols,I++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?w.start:w.start+w.length,I]}}_isCharWordSeparator(v){return v.getWidth()!==0&&this._optionsService.rawOptions.wordSeparator.indexOf(v.getChars())>=0}_selectLineAt(v){let w=this._bufferService.buffer.getWrappedRangeForLine(v),I={start:{x:0,y:w.first},end:{x:this._bufferService.cols-1,y:w.last}};this._model.selectionStart=[0,w.first],this._model.selectionEnd=void 0,this._model.selectionStartLength=(0,h.getRangeLength)(I,this._bufferService.cols)}};i.SelectionService=b=a([u(3,m.IBufferService),u(4,m.ICoreService),u(5,C.IMouseService),u(6,m.IOptionsService),u(7,C.IRenderService),u(8,C.ICoreBrowserService)],b)},4725:(s,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.IThemeService=i.ICharacterJoinerService=i.ISelectionService=i.IRenderService=i.IMouseService=i.ICoreBrowserService=i.ICharSizeService=void 0;let a=o(8343);i.ICharSizeService=(0,a.createDecorator)("CharSizeService"),i.ICoreBrowserService=(0,a.createDecorator)("CoreBrowserService"),i.IMouseService=(0,a.createDecorator)("MouseService"),i.IRenderService=(0,a.createDecorator)("RenderService"),i.ISelectionService=(0,a.createDecorator)("SelectionService"),i.ICharacterJoinerService=(0,a.createDecorator)("CharacterJoinerService"),i.IThemeService=(0,a.createDecorator)("ThemeService")},6731:function(s,i,o){var a=this&&this.__decorate||function(b,v,w,I){var R,x=arguments.length,A=x<3?v:I===null?I=Object.getOwnPropertyDescriptor(v,w):I;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")A=Reflect.decorate(b,v,w,I);else for(var L=b.length-1;L>=0;L--)(R=b[L])&&(A=(x<3?R(A):x>3?R(v,w,A):R(v,w))||A);return x>3&&A&&Object.defineProperty(v,w,A),A},u=this&&this.__param||function(b,v){return function(w,I){v(w,I,b)}};Object.defineProperty(i,"__esModule",{value:!0}),i.ThemeService=i.DEFAULT_ANSI_COLORS=void 0;let c=o(7239),p=o(8055),g=o(8460),C=o(844),y=o(2585),l=p.css.toColor("#ffffff"),d=p.css.toColor("#000000"),h=p.css.toColor("#ffffff"),f=p.css.toColor("#000000"),m={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};i.DEFAULT_ANSI_COLORS=Object.freeze((()=>{let b=[p.css.toColor("#2e3436"),p.css.toColor("#cc0000"),p.css.toColor("#4e9a06"),p.css.toColor("#c4a000"),p.css.toColor("#3465a4"),p.css.toColor("#75507b"),p.css.toColor("#06989a"),p.css.toColor("#d3d7cf"),p.css.toColor("#555753"),p.css.toColor("#ef2929"),p.css.toColor("#8ae234"),p.css.toColor("#fce94f"),p.css.toColor("#729fcf"),p.css.toColor("#ad7fa8"),p.css.toColor("#34e2e2"),p.css.toColor("#eeeeec")],v=[0,95,135,175,215,255];for(let w=0;w<216;w++){let I=v[w/36%6|0],R=v[w/6%6|0],x=v[w%6];b.push({css:p.channels.toCss(I,R,x),rgba:p.channels.toRgba(I,R,x)})}for(let w=0;w<24;w++){let I=8+10*w;b.push({css:p.channels.toCss(I,I,I),rgba:p.channels.toRgba(I,I,I)})}return b})());let _=i.ThemeService=class extends C.Disposable{get colors(){return this._colors}constructor(b){super(),this._optionsService=b,this._contrastCache=new c.ColorContrastCache,this._halfContrastCache=new c.ColorContrastCache,this._onChangeColors=this.register(new g.EventEmitter),this.onChangeColors=this._onChangeColors.event,this._colors={foreground:l,background:d,cursor:h,cursorAccent:f,selectionForeground:void 0,selectionBackgroundTransparent:m,selectionBackgroundOpaque:p.color.blend(d,m),selectionInactiveBackgroundTransparent:m,selectionInactiveBackgroundOpaque:p.color.blend(d,m),ansi:i.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache,halfContrastCache:this._halfContrastCache},this._updateRestoreColors(),this._setTheme(this._optionsService.rawOptions.theme),this.register(this._optionsService.onSpecificOptionChange("minimumContrastRatio",()=>this._contrastCache.clear())),this.register(this._optionsService.onSpecificOptionChange("theme",()=>this._setTheme(this._optionsService.rawOptions.theme)))}_setTheme(b={}){let v=this._colors;if(v.foreground=S(b.foreground,l),v.background=S(b.background,d),v.cursor=S(b.cursor,h),v.cursorAccent=S(b.cursorAccent,f),v.selectionBackgroundTransparent=S(b.selectionBackground,m),v.selectionBackgroundOpaque=p.color.blend(v.background,v.selectionBackgroundTransparent),v.selectionInactiveBackgroundTransparent=S(b.selectionInactiveBackground,v.selectionBackgroundTransparent),v.selectionInactiveBackgroundOpaque=p.color.blend(v.background,v.selectionInactiveBackgroundTransparent),v.selectionForeground=b.selectionForeground?S(b.selectionForeground,p.NULL_COLOR):void 0,v.selectionForeground===p.NULL_COLOR&&(v.selectionForeground=void 0),p.color.isOpaque(v.selectionBackgroundTransparent)&&(v.selectionBackgroundTransparent=p.color.opacity(v.selectionBackgroundTransparent,.3)),p.color.isOpaque(v.selectionInactiveBackgroundTransparent)&&(v.selectionInactiveBackgroundTransparent=p.color.opacity(v.selectionInactiveBackgroundTransparent,.3)),v.ansi=i.DEFAULT_ANSI_COLORS.slice(),v.ansi[0]=S(b.black,i.DEFAULT_ANSI_COLORS[0]),v.ansi[1]=S(b.red,i.DEFAULT_ANSI_COLORS[1]),v.ansi[2]=S(b.green,i.DEFAULT_ANSI_COLORS[2]),v.ansi[3]=S(b.yellow,i.DEFAULT_ANSI_COLORS[3]),v.ansi[4]=S(b.blue,i.DEFAULT_ANSI_COLORS[4]),v.ansi[5]=S(b.magenta,i.DEFAULT_ANSI_COLORS[5]),v.ansi[6]=S(b.cyan,i.DEFAULT_ANSI_COLORS[6]),v.ansi[7]=S(b.white,i.DEFAULT_ANSI_COLORS[7]),v.ansi[8]=S(b.brightBlack,i.DEFAULT_ANSI_COLORS[8]),v.ansi[9]=S(b.brightRed,i.DEFAULT_ANSI_COLORS[9]),v.ansi[10]=S(b.brightGreen,i.DEFAULT_ANSI_COLORS[10]),v.ansi[11]=S(b.brightYellow,i.DEFAULT_ANSI_COLORS[11]),v.ansi[12]=S(b.brightBlue,i.DEFAULT_ANSI_COLORS[12]),v.ansi[13]=S(b.brightMagenta,i.DEFAULT_ANSI_COLORS[13]),v.ansi[14]=S(b.brightCyan,i.DEFAULT_ANSI_COLORS[14]),v.ansi[15]=S(b.brightWhite,i.DEFAULT_ANSI_COLORS[15]),b.extendedAnsi){let w=Math.min(v.ansi.length-16,b.extendedAnsi.length);for(let I=0;I<w;I++)v.ansi[I+16]=S(b.extendedAnsi[I],i.DEFAULT_ANSI_COLORS[I+16])}this._contrastCache.clear(),this._halfContrastCache.clear(),this._updateRestoreColors(),this._onChangeColors.fire(this.colors)}restoreColor(b){this._restoreColor(b),this._onChangeColors.fire(this.colors)}_restoreColor(b){if(b!==void 0)switch(b){case 256:this._colors.foreground=this._restoreColors.foreground;break;case 257:this._colors.background=this._restoreColors.background;break;case 258:this._colors.cursor=this._restoreColors.cursor;break;default:this._colors.ansi[b]=this._restoreColors.ansi[b]}else for(let v=0;v<this._restoreColors.ansi.length;++v)this._colors.ansi[v]=this._restoreColors.ansi[v]}modifyColors(b){b(this._colors),this._onChangeColors.fire(this.colors)}_updateRestoreColors(){this._restoreColors={foreground:this._colors.foreground,background:this._colors.background,cursor:this._colors.cursor,ansi:this._colors.ansi.slice()}}};function S(b,v){if(b!==void 0)try{return p.css.toColor(b)}catch{}return v}i.ThemeService=_=a([u(0,y.IOptionsService)],_)},6349:(s,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CircularList=void 0;let a=o(8460),u=o(844);class c extends u.Disposable{constructor(g){super(),this._maxLength=g,this.onDeleteEmitter=this.register(new a.EventEmitter),this.onDelete=this.onDeleteEmitter.event,this.onInsertEmitter=this.register(new a.EventEmitter),this.onInsert=this.onInsertEmitter.event,this.onTrimEmitter=this.register(new a.EventEmitter),this.onTrim=this.onTrimEmitter.event,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}get maxLength(){return this._maxLength}set maxLength(g){if(this._maxLength===g)return;let C=new Array(g);for(let y=0;y<Math.min(g,this.length);y++)C[y]=this._array[this._getCyclicIndex(y)];this._array=C,this._maxLength=g,this._startIndex=0}get length(){return this._length}set length(g){if(g>this._length)for(let C=this._length;C<g;C++)this._array[C]=void 0;this._length=g}get(g){return this._array[this._getCyclicIndex(g)]}set(g,C){this._array[this._getCyclicIndex(g)]=C}push(g){this._array[this._getCyclicIndex(this._length)]=g,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++}recycle(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]}get isFull(){return this._length===this._maxLength}pop(){return this._array[this._getCyclicIndex(this._length---1)]}splice(g,C,...y){if(C){for(let l=g;l<this._length-C;l++)this._array[this._getCyclicIndex(l)]=this._array[this._getCyclicIndex(l+C)];this._length-=C,this.onDeleteEmitter.fire({index:g,amount:C})}for(let l=this._length-1;l>=g;l--)this._array[this._getCyclicIndex(l+y.length)]=this._array[this._getCyclicIndex(l)];for(let l=0;l<y.length;l++)this._array[this._getCyclicIndex(g+l)]=y[l];if(y.length&&this.onInsertEmitter.fire({index:g,amount:y.length}),this._length+y.length>this._maxLength){let l=this._length+y.length-this._maxLength;this._startIndex+=l,this._length=this._maxLength,this.onTrimEmitter.fire(l)}else this._length+=y.length}trimStart(g){g>this._length&&(g=this._length),this._startIndex+=g,this._length-=g,this.onTrimEmitter.fire(g)}shiftElements(g,C,y){if(!(C<=0)){if(g<0||g>=this._length)throw new Error("start argument out of range");if(g+y<0)throw new Error("Cannot shift elements in list beyond index 0");if(y>0){for(let d=C-1;d>=0;d--)this.set(g+d+y,this.get(g+d));let l=g+C+y-this._length;if(l>0)for(this._length+=l;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(let l=0;l<C;l++)this.set(g+l+y,this.get(g+l))}}_getCyclicIndex(g){return(this._startIndex+g)%this._maxLength}}i.CircularList=c},1439:(s,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.clone=void 0,i.clone=function o(a,u=5){if(typeof a!="object")return a;let c=Array.isArray(a)?[]:{};for(let p in a)c[p]=u<=1?a[p]:a[p]&&o(a[p],u-1);return c}},8055:(s,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.contrastRatio=i.toPaddedHex=i.rgba=i.rgb=i.css=i.color=i.channels=i.NULL_COLOR=void 0;let a=o(6114),u=0,c=0,p=0,g=0;var C,y,l,d,h;function f(_){let S=_.toString(16);return S.length<2?"0"+S:S}function m(_,S){return _<S?(S+.05)/(_+.05):(_+.05)/(S+.05)}i.NULL_COLOR={css:"#00000000",rgba:0},function(_){_.toCss=function(S,b,v,w){return w!==void 0?`#${f(S)}${f(b)}${f(v)}${f(w)}`:`#${f(S)}${f(b)}${f(v)}`},_.toRgba=function(S,b,v,w=255){return(S<<24|b<<16|v<<8|w)>>>0}}(C||(i.channels=C={})),function(_){function S(b,v){return g=Math.round(255*v),[u,c,p]=h.toChannels(b.rgba),{css:C.toCss(u,c,p,g),rgba:C.toRgba(u,c,p,g)}}_.blend=function(b,v){if(g=(255&v.rgba)/255,g===1)return{css:v.css,rgba:v.rgba};let w=v.rgba>>24&255,I=v.rgba>>16&255,R=v.rgba>>8&255,x=b.rgba>>24&255,A=b.rgba>>16&255,L=b.rgba>>8&255;return u=x+Math.round((w-x)*g),c=A+Math.round((I-A)*g),p=L+Math.round((R-L)*g),{css:C.toCss(u,c,p),rgba:C.toRgba(u,c,p)}},_.isOpaque=function(b){return(255&b.rgba)==255},_.ensureContrastRatio=function(b,v,w){let I=h.ensureContrastRatio(b.rgba,v.rgba,w);if(I)return h.toColor(I>>24&255,I>>16&255,I>>8&255)},_.opaque=function(b){let v=(255|b.rgba)>>>0;return[u,c,p]=h.toChannels(v),{css:C.toCss(u,c,p),rgba:v}},_.opacity=S,_.multiplyOpacity=function(b,v){return g=255&b.rgba,S(b,g*v/255)},_.toColorRGB=function(b){return[b.rgba>>24&255,b.rgba>>16&255,b.rgba>>8&255]}}(y||(i.color=y={})),function(_){let S,b;if(!a.isNode){let v=document.createElement("canvas");v.width=1,v.height=1;let w=v.getContext("2d",{willReadFrequently:!0});w&&(S=w,S.globalCompositeOperation="copy",b=S.createLinearGradient(0,0,1,1))}_.toColor=function(v){if(v.match(/#[\da-f]{3,8}/i))switch(v.length){case 4:return u=parseInt(v.slice(1,2).repeat(2),16),c=parseInt(v.slice(2,3).repeat(2),16),p=parseInt(v.slice(3,4).repeat(2),16),h.toColor(u,c,p);case 5:return u=parseInt(v.slice(1,2).repeat(2),16),c=parseInt(v.slice(2,3).repeat(2),16),p=parseInt(v.slice(3,4).repeat(2),16),g=parseInt(v.slice(4,5).repeat(2),16),h.toColor(u,c,p,g);case 7:return{css:v,rgba:(parseInt(v.slice(1),16)<<8|255)>>>0};case 9:return{css:v,rgba:parseInt(v.slice(1),16)>>>0}}let w=v.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(w)return u=parseInt(w[1]),c=parseInt(w[2]),p=parseInt(w[3]),g=Math.round(255*(w[5]===void 0?1:parseFloat(w[5]))),h.toColor(u,c,p,g);if(!S||!b)throw new Error("css.toColor: Unsupported css format");if(S.fillStyle=b,S.fillStyle=v,typeof S.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(S.fillRect(0,0,1,1),[u,c,p,g]=S.getImageData(0,0,1,1).data,g!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:C.toRgba(u,c,p,g),css:v}}}(l||(i.css=l={})),function(_){function S(b,v,w){let I=b/255,R=v/255,x=w/255;return .2126*(I<=.03928?I/12.92:Math.pow((I+.055)/1.055,2.4))+.7152*(R<=.03928?R/12.92:Math.pow((R+.055)/1.055,2.4))+.0722*(x<=.03928?x/12.92:Math.pow((x+.055)/1.055,2.4))}_.relativeLuminance=function(b){return S(b>>16&255,b>>8&255,255&b)},_.relativeLuminance2=S}(d||(i.rgb=d={})),function(_){function S(v,w,I){let R=v>>24&255,x=v>>16&255,A=v>>8&255,L=w>>24&255,F=w>>16&255,H=w>>8&255,B=m(d.relativeLuminance2(L,F,H),d.relativeLuminance2(R,x,A));for(;B<I&&(L>0||F>0||H>0);)L-=Math.max(0,Math.ceil(.1*L)),F-=Math.max(0,Math.ceil(.1*F)),H-=Math.max(0,Math.ceil(.1*H)),B=m(d.relativeLuminance2(L,F,H),d.relativeLuminance2(R,x,A));return(L<<24|F<<16|H<<8|255)>>>0}function b(v,w,I){let R=v>>24&255,x=v>>16&255,A=v>>8&255,L=w>>24&255,F=w>>16&255,H=w>>8&255,B=m(d.relativeLuminance2(L,F,H),d.relativeLuminance2(R,x,A));for(;B<I&&(L<255||F<255||H<255);)L=Math.min(255,L+Math.ceil(.1*(255-L))),F=Math.min(255,F+Math.ceil(.1*(255-F))),H=Math.min(255,H+Math.ceil(.1*(255-H))),B=m(d.relativeLuminance2(L,F,H),d.relativeLuminance2(R,x,A));return(L<<24|F<<16|H<<8|255)>>>0}_.ensureContrastRatio=function(v,w,I){let R=d.relativeLuminance(v>>8),x=d.relativeLuminance(w>>8);if(m(R,x)<I){if(x<R){let F=S(v,w,I),H=m(R,d.relativeLuminance(F>>8));if(H<I){let B=b(v,w,I);return H>m(R,d.relativeLuminance(B>>8))?F:B}return F}let A=b(v,w,I),L=m(R,d.relativeLuminance(A>>8));if(L<I){let F=S(v,w,I);return L>m(R,d.relativeLuminance(F>>8))?A:F}return A}},_.reduceLuminance=S,_.increaseLuminance=b,_.toChannels=function(v){return[v>>24&255,v>>16&255,v>>8&255,255&v]},_.toColor=function(v,w,I,R){return{css:C.toCss(v,w,I,R),rgba:C.toRgba(v,w,I,R)}}}(h||(i.rgba=h={})),i.toPaddedHex=f,i.contrastRatio=m},8969:(s,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CoreTerminal=void 0;let a=o(844),u=o(2585),c=o(4348),p=o(7866),g=o(744),C=o(7302),y=o(6975),l=o(8460),d=o(1753),h=o(1480),f=o(7994),m=o(9282),_=o(5435),S=o(5981),b=o(2660),v=!1;class w extends a.Disposable{get onScroll(){return this._onScrollApi||(this._onScrollApi=this.register(new l.EventEmitter),this._onScroll.event(R=>{var x;(x=this._onScrollApi)===null||x===void 0||x.fire(R.position)})),this._onScrollApi.event}get cols(){return this._bufferService.cols}get rows(){return this._bufferService.rows}get buffers(){return this._bufferService.buffers}get options(){return this.optionsService.options}set options(R){for(let x in R)this.optionsService.options[x]=R[x]}constructor(R){super(),this._windowsWrappingHeuristics=this.register(new a.MutableDisposable),this._onBinary=this.register(new l.EventEmitter),this.onBinary=this._onBinary.event,this._onData=this.register(new l.EventEmitter),this.onData=this._onData.event,this._onLineFeed=this.register(new l.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onResize=this.register(new l.EventEmitter),this.onResize=this._onResize.event,this._onWriteParsed=this.register(new l.EventEmitter),this.onWriteParsed=this._onWriteParsed.event,this._onScroll=this.register(new l.EventEmitter),this._instantiationService=new c.InstantiationService,this.optionsService=this.register(new C.OptionsService(R)),this._instantiationService.setService(u.IOptionsService,this.optionsService),this._bufferService=this.register(this._instantiationService.createInstance(g.BufferService)),this._instantiationService.setService(u.IBufferService,this._bufferService),this._logService=this.register(this._instantiationService.createInstance(p.LogService)),this._instantiationService.setService(u.ILogService,this._logService),this.coreService=this.register(this._instantiationService.createInstance(y.CoreService)),this._instantiationService.setService(u.ICoreService,this.coreService),this.coreMouseService=this.register(this._instantiationService.createInstance(d.CoreMouseService)),this._instantiationService.setService(u.ICoreMouseService,this.coreMouseService),this.unicodeService=this.register(this._instantiationService.createInstance(h.UnicodeService)),this._instantiationService.setService(u.IUnicodeService,this.unicodeService),this._charsetService=this._instantiationService.createInstance(f.CharsetService),this._instantiationService.setService(u.ICharsetService,this._charsetService),this._oscLinkService=this._instantiationService.createInstance(b.OscLinkService),this._instantiationService.setService(u.IOscLinkService,this._oscLinkService),this._inputHandler=this.register(new _.InputHandler(this._bufferService,this._charsetService,this.coreService,this._logService,this.optionsService,this._oscLinkService,this.coreMouseService,this.unicodeService)),this.register((0,l.forwardEvent)(this._inputHandler.onLineFeed,this._onLineFeed)),this.register(this._inputHandler),this.register((0,l.forwardEvent)(this._bufferService.onResize,this._onResize)),this.register((0,l.forwardEvent)(this.coreService.onData,this._onData)),this.register((0,l.forwardEvent)(this.coreService.onBinary,this._onBinary)),this.register(this.coreService.onRequestScrollToBottom(()=>this.scrollToBottom())),this.register(this.coreService.onUserInput(()=>this._writeBuffer.handleUserInput())),this.register(this.optionsService.onMultipleOptionChange(["windowsMode","windowsPty"],()=>this._handleWindowsPtyOptionChange())),this.register(this._bufferService.onScroll(x=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this.register(this._inputHandler.onScroll(x=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this._writeBuffer=this.register(new S.WriteBuffer((x,A)=>this._inputHandler.parse(x,A))),this.register((0,l.forwardEvent)(this._writeBuffer.onWriteParsed,this._onWriteParsed))}write(R,x){this._writeBuffer.write(R,x)}writeSync(R,x){this._logService.logLevel<=u.LogLevelEnum.WARN&&!v&&(this._logService.warn("writeSync is unreliable and will be removed soon."),v=!0),this._writeBuffer.writeSync(R,x)}resize(R,x){isNaN(R)||isNaN(x)||(R=Math.max(R,g.MINIMUM_COLS),x=Math.max(x,g.MINIMUM_ROWS),this._bufferService.resize(R,x))}scroll(R,x=!1){this._bufferService.scroll(R,x)}scrollLines(R,x,A){this._bufferService.scrollLines(R,x,A)}scrollPages(R){this.scrollLines(R*(this.rows-1))}scrollToTop(){this.scrollLines(-this._bufferService.buffer.ydisp)}scrollToBottom(){this.scrollLines(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp)}scrollToLine(R){let x=R-this._bufferService.buffer.ydisp;x!==0&&this.scrollLines(x)}registerEscHandler(R,x){return this._inputHandler.registerEscHandler(R,x)}registerDcsHandler(R,x){return this._inputHandler.registerDcsHandler(R,x)}registerCsiHandler(R,x){return this._inputHandler.registerCsiHandler(R,x)}registerOscHandler(R,x){return this._inputHandler.registerOscHandler(R,x)}_setup(){this._handleWindowsPtyOptionChange()}reset(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()}_handleWindowsPtyOptionChange(){let R=!1,x=this.optionsService.rawOptions.windowsPty;x&&x.buildNumber!==void 0&&x.buildNumber!==void 0?R=x.backend==="conpty"&&x.buildNumber<21376:this.optionsService.rawOptions.windowsMode&&(R=!0),R?this._enableWindowsWrappingHeuristics():this._windowsWrappingHeuristics.clear()}_enableWindowsWrappingHeuristics(){if(!this._windowsWrappingHeuristics.value){let R=[];R.push(this.onLineFeed(m.updateWindowsModeWrappedState.bind(null,this._bufferService))),R.push(this.registerCsiHandler({final:"H"},()=>((0,m.updateWindowsModeWrappedState)(this._bufferService),!1))),this._windowsWrappingHeuristics.value=(0,a.toDisposable)(()=>{for(let x of R)x.dispose()})}}}i.CoreTerminal=w},8460:(s,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.forwardEvent=i.EventEmitter=void 0,i.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=o=>(this._listeners.push(o),{dispose:()=>{if(!this._disposed){for(let a=0;a<this._listeners.length;a++)if(this._listeners[a]===o)return void this._listeners.splice(a,1)}}})),this._event}fire(o,a){let u=[];for(let c=0;c<this._listeners.length;c++)u.push(this._listeners[c]);for(let c=0;c<u.length;c++)u[c].call(void 0,o,a)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},i.forwardEvent=function(o,a){return o(u=>a.fire(u))}},5435:function(s,i,o){var a=this&&this.__decorate||function(B,E,M,T){var k,j=arguments.length,U=j<3?E:T===null?T=Object.getOwnPropertyDescriptor(E,M):T;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")U=Reflect.decorate(B,E,M,T);else for(var q=B.length-1;q>=0;q--)(k=B[q])&&(U=(j<3?k(U):j>3?k(E,M,U):k(E,M))||U);return j>3&&U&&Object.defineProperty(E,M,U),U},u=this&&this.__param||function(B,E){return function(M,T){E(M,T,B)}};Object.defineProperty(i,"__esModule",{value:!0}),i.InputHandler=i.WindowsOptionsReportType=void 0;let c=o(2584),p=o(7116),g=o(2015),C=o(844),y=o(482),l=o(8437),d=o(8460),h=o(643),f=o(511),m=o(3734),_=o(2585),S=o(6242),b=o(6351),v=o(5941),w={"(":0,")":1,"*":2,"+":3,"-":1,".":2},I=131072;function R(B,E){if(B>24)return E.setWinLines||!1;switch(B){case 1:return!!E.restoreWin;case 2:return!!E.minimizeWin;case 3:return!!E.setWinPosition;case 4:return!!E.setWinSizePixels;case 5:return!!E.raiseWin;case 6:return!!E.lowerWin;case 7:return!!E.refreshWin;case 8:return!!E.setWinSizeChars;case 9:return!!E.maximizeWin;case 10:return!!E.fullscreenWin;case 11:return!!E.getWinState;case 13:return!!E.getWinPosition;case 14:return!!E.getWinSizePixels;case 15:return!!E.getScreenSizePixels;case 16:return!!E.getCellSizePixels;case 18:return!!E.getWinSizeChars;case 19:return!!E.getScreenSizeChars;case 20:return!!E.getIconTitle;case 21:return!!E.getWinTitle;case 22:return!!E.pushTitle;case 23:return!!E.popTitle;case 24:return!!E.setWinLines}return!1}var x;(function(B){B[B.GET_WIN_SIZE_PIXELS=0]="GET_WIN_SIZE_PIXELS",B[B.GET_CELL_SIZE_PIXELS=1]="GET_CELL_SIZE_PIXELS"})(x||(i.WindowsOptionsReportType=x={}));let A=0;class L extends C.Disposable{getAttrData(){return this._curAttrData}constructor(E,M,T,k,j,U,q,W,me=new g.EscapeSequenceParser){super(),this._bufferService=E,this._charsetService=M,this._coreService=T,this._logService=k,this._optionsService=j,this._oscLinkService=U,this._coreMouseService=q,this._unicodeService=W,this._parser=me,this._parseBuffer=new Uint32Array(4096),this._stringDecoder=new y.StringToUtf32,this._utf8Decoder=new y.Utf8ToUtf32,this._workCell=new f.CellData,this._windowTitle="",this._iconName="",this._windowTitleStack=[],this._iconNameStack=[],this._curAttrData=l.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=l.DEFAULT_ATTR_DATA.clone(),this._onRequestBell=this.register(new d.EventEmitter),this.onRequestBell=this._onRequestBell.event,this._onRequestRefreshRows=this.register(new d.EventEmitter),this.onRequestRefreshRows=this._onRequestRefreshRows.event,this._onRequestReset=this.register(new d.EventEmitter),this.onRequestReset=this._onRequestReset.event,this._onRequestSendFocus=this.register(new d.EventEmitter),this.onRequestSendFocus=this._onRequestSendFocus.event,this._onRequestSyncScrollBar=this.register(new d.EventEmitter),this.onRequestSyncScrollBar=this._onRequestSyncScrollBar.event,this._onRequestWindowsOptionsReport=this.register(new d.EventEmitter),this.onRequestWindowsOptionsReport=this._onRequestWindowsOptionsReport.event,this._onA11yChar=this.register(new d.EventEmitter),this.onA11yChar=this._onA11yChar.event,this._onA11yTab=this.register(new d.EventEmitter),this.onA11yTab=this._onA11yTab.event,this._onCursorMove=this.register(new d.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onLineFeed=this.register(new d.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onScroll=this.register(new d.EventEmitter),this.onScroll=this._onScroll.event,this._onTitleChange=this.register(new d.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onColor=this.register(new d.EventEmitter),this.onColor=this._onColor.event,this._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},this._specialColors=[256,257,258],this.register(this._parser),this._dirtyRowTracker=new F(this._bufferService),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(D=>this._activeBuffer=D.activeBuffer)),this._parser.setCsiHandlerFallback((D,O)=>{this._logService.debug("Unknown CSI code: ",{identifier:this._parser.identToString(D),params:O.toArray()})}),this._parser.setEscHandlerFallback(D=>{this._logService.debug("Unknown ESC code: ",{identifier:this._parser.identToString(D)})}),this._parser.setExecuteHandlerFallback(D=>{this._logService.debug("Unknown EXECUTE code: ",{code:D})}),this._parser.setOscHandlerFallback((D,O,P)=>{this._logService.debug("Unknown OSC code: ",{identifier:D,action:O,data:P})}),this._parser.setDcsHandlerFallback((D,O,P)=>{O==="HOOK"&&(P=P.toArray()),this._logService.debug("Unknown DCS code: ",{identifier:this._parser.identToString(D),action:O,payload:P})}),this._parser.setPrintHandler((D,O,P)=>this.print(D,O,P)),this._parser.registerCsiHandler({final:"@"},D=>this.insertChars(D)),this._parser.registerCsiHandler({intermediates:" ",final:"@"},D=>this.scrollLeft(D)),this._parser.registerCsiHandler({final:"A"},D=>this.cursorUp(D)),this._parser.registerCsiHandler({intermediates:" ",final:"A"},D=>this.scrollRight(D)),this._parser.registerCsiHandler({final:"B"},D=>this.cursorDown(D)),this._parser.registerCsiHandler({final:"C"},D=>this.cursorForward(D)),this._parser.registerCsiHandler({final:"D"},D=>this.cursorBackward(D)),this._parser.registerCsiHandler({final:"E"},D=>this.cursorNextLine(D)),this._parser.registerCsiHandler({final:"F"},D=>this.cursorPrecedingLine(D)),this._parser.registerCsiHandler({final:"G"},D=>this.cursorCharAbsolute(D)),this._parser.registerCsiHandler({final:"H"},D=>this.cursorPosition(D)),this._parser.registerCsiHandler({final:"I"},D=>this.cursorForwardTab(D)),this._parser.registerCsiHandler({final:"J"},D=>this.eraseInDisplay(D,!1)),this._parser.registerCsiHandler({prefix:"?",final:"J"},D=>this.eraseInDisplay(D,!0)),this._parser.registerCsiHandler({final:"K"},D=>this.eraseInLine(D,!1)),this._parser.registerCsiHandler({prefix:"?",final:"K"},D=>this.eraseInLine(D,!0)),this._parser.registerCsiHandler({final:"L"},D=>this.insertLines(D)),this._parser.registerCsiHandler({final:"M"},D=>this.deleteLines(D)),this._parser.registerCsiHandler({final:"P"},D=>this.deleteChars(D)),this._parser.registerCsiHandler({final:"S"},D=>this.scrollUp(D)),this._parser.registerCsiHandler({final:"T"},D=>this.scrollDown(D)),this._parser.registerCsiHandler({final:"X"},D=>this.eraseChars(D)),this._parser.registerCsiHandler({final:"Z"},D=>this.cursorBackwardTab(D)),this._parser.registerCsiHandler({final:"`"},D=>this.charPosAbsolute(D)),this._parser.registerCsiHandler({final:"a"},D=>this.hPositionRelative(D)),this._parser.registerCsiHandler({final:"b"},D=>this.repeatPrecedingCharacter(D)),this._parser.registerCsiHandler({final:"c"},D=>this.sendDeviceAttributesPrimary(D)),this._parser.registerCsiHandler({prefix:">",final:"c"},D=>this.sendDeviceAttributesSecondary(D)),this._parser.registerCsiHandler({final:"d"},D=>this.linePosAbsolute(D)),this._parser.registerCsiHandler({final:"e"},D=>this.vPositionRelative(D)),this._parser.registerCsiHandler({final:"f"},D=>this.hVPosition(D)),this._parser.registerCsiHandler({final:"g"},D=>this.tabClear(D)),this._parser.registerCsiHandler({final:"h"},D=>this.setMode(D)),this._parser.registerCsiHandler({prefix:"?",final:"h"},D=>this.setModePrivate(D)),this._parser.registerCsiHandler({final:"l"},D=>this.resetMode(D)),this._parser.registerCsiHandler({prefix:"?",final:"l"},D=>this.resetModePrivate(D)),this._parser.registerCsiHandler({final:"m"},D=>this.charAttributes(D)),this._parser.registerCsiHandler({final:"n"},D=>this.deviceStatus(D)),this._parser.registerCsiHandler({prefix:"?",final:"n"},D=>this.deviceStatusPrivate(D)),this._parser.registerCsiHandler({intermediates:"!",final:"p"},D=>this.softReset(D)),this._parser.registerCsiHandler({intermediates:" ",final:"q"},D=>this.setCursorStyle(D)),this._parser.registerCsiHandler({final:"r"},D=>this.setScrollRegion(D)),this._parser.registerCsiHandler({final:"s"},D=>this.saveCursor(D)),this._parser.registerCsiHandler({final:"t"},D=>this.windowOptions(D)),this._parser.registerCsiHandler({final:"u"},D=>this.restoreCursor(D)),this._parser.registerCsiHandler({intermediates:"'",final:"}"},D=>this.insertColumns(D)),this._parser.registerCsiHandler({intermediates:"'",final:"~"},D=>this.deleteColumns(D)),this._parser.registerCsiHandler({intermediates:'"',final:"q"},D=>this.selectProtected(D)),this._parser.registerCsiHandler({intermediates:"$",final:"p"},D=>this.requestMode(D,!0)),this._parser.registerCsiHandler({prefix:"?",intermediates:"$",final:"p"},D=>this.requestMode(D,!1)),this._parser.setExecuteHandler(c.C0.BEL,()=>this.bell()),this._parser.setExecuteHandler(c.C0.LF,()=>this.lineFeed()),this._parser.setExecuteHandler(c.C0.VT,()=>this.lineFeed()),this._parser.setExecuteHandler(c.C0.FF,()=>this.lineFeed()),this._parser.setExecuteHandler(c.C0.CR,()=>this.carriageReturn()),this._parser.setExecuteHandler(c.C0.BS,()=>this.backspace()),this._parser.setExecuteHandler(c.C0.HT,()=>this.tab()),this._parser.setExecuteHandler(c.C0.SO,()=>this.shiftOut()),this._parser.setExecuteHandler(c.C0.SI,()=>this.shiftIn()),this._parser.setExecuteHandler(c.C1.IND,()=>this.index()),this._parser.setExecuteHandler(c.C1.NEL,()=>this.nextLine()),this._parser.setExecuteHandler(c.C1.HTS,()=>this.tabSet()),this._parser.registerOscHandler(0,new S.OscHandler(D=>(this.setTitle(D),this.setIconName(D),!0))),this._parser.registerOscHandler(1,new S.OscHandler(D=>this.setIconName(D))),this._parser.registerOscHandler(2,new S.OscHandler(D=>this.setTitle(D))),this._parser.registerOscHandler(4,new S.OscHandler(D=>this.setOrReportIndexedColor(D))),this._parser.registerOscHandler(8,new S.OscHandler(D=>this.setHyperlink(D))),this._parser.registerOscHandler(10,new S.OscHandler(D=>this.setOrReportFgColor(D))),this._parser.registerOscHandler(11,new S.OscHandler(D=>this.setOrReportBgColor(D))),this._parser.registerOscHandler(12,new S.OscHandler(D=>this.setOrReportCursorColor(D))),this._parser.registerOscHandler(104,new S.OscHandler(D=>this.restoreIndexedColor(D))),this._parser.registerOscHandler(110,new S.OscHandler(D=>this.restoreFgColor(D))),this._parser.registerOscHandler(111,new S.OscHandler(D=>this.restoreBgColor(D))),this._parser.registerOscHandler(112,new S.OscHandler(D=>this.restoreCursorColor(D))),this._parser.registerEscHandler({final:"7"},()=>this.saveCursor()),this._parser.registerEscHandler({final:"8"},()=>this.restoreCursor()),this._parser.registerEscHandler({final:"D"},()=>this.index()),this._parser.registerEscHandler({final:"E"},()=>this.nextLine()),this._parser.registerEscHandler({final:"H"},()=>this.tabSet()),this._parser.registerEscHandler({final:"M"},()=>this.reverseIndex()),this._parser.registerEscHandler({final:"="},()=>this.keypadApplicationMode()),this._parser.registerEscHandler({final:">"},()=>this.keypadNumericMode()),this._parser.registerEscHandler({final:"c"},()=>this.fullReset()),this._parser.registerEscHandler({final:"n"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"o"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"|"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"}"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"~"},()=>this.setgLevel(1)),this._parser.registerEscHandler({intermediates:"%",final:"@"},()=>this.selectDefaultCharset()),this._parser.registerEscHandler({intermediates:"%",final:"G"},()=>this.selectDefaultCharset());for(let D in p.CHARSETS)this._parser.registerEscHandler({intermediates:"(",final:D},()=>this.selectCharset("("+D)),this._parser.registerEscHandler({intermediates:")",final:D},()=>this.selectCharset(")"+D)),this._parser.registerEscHandler({intermediates:"*",final:D},()=>this.selectCharset("*"+D)),this._parser.registerEscHandler({intermediates:"+",final:D},()=>this.selectCharset("+"+D)),this._parser.registerEscHandler({intermediates:"-",final:D},()=>this.selectCharset("-"+D)),this._parser.registerEscHandler({intermediates:".",final:D},()=>this.selectCharset("."+D)),this._parser.registerEscHandler({intermediates:"/",final:D},()=>this.selectCharset("/"+D));this._parser.registerEscHandler({intermediates:"#",final:"8"},()=>this.screenAlignmentPattern()),this._parser.setErrorHandler(D=>(this._logService.error("Parsing error: ",D),D)),this._parser.registerDcsHandler({intermediates:"$",final:"q"},new b.DcsHandler((D,O)=>this.requestStatusString(D,O)))}_preserveStack(E,M,T,k){this._parseStack.paused=!0,this._parseStack.cursorStartX=E,this._parseStack.cursorStartY=M,this._parseStack.decodedLength=T,this._parseStack.position=k}_logSlowResolvingAsync(E){this._logService.logLevel<=_.LogLevelEnum.WARN&&Promise.race([E,new Promise((M,T)=>setTimeout(()=>T("#SLOW_TIMEOUT"),5e3))]).catch(M=>{if(M!=="#SLOW_TIMEOUT")throw M;console.warn("async parser handler taking longer than 5000 ms")})}_getCurrentLinkId(){return this._curAttrData.extended.urlId}parse(E,M){let T,k=this._activeBuffer.x,j=this._activeBuffer.y,U=0,q=this._parseStack.paused;if(q){if(T=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,M))return this._logSlowResolvingAsync(T),T;k=this._parseStack.cursorStartX,j=this._parseStack.cursorStartY,this._parseStack.paused=!1,E.length>I&&(U=this._parseStack.position+I)}if(this._logService.logLevel<=_.LogLevelEnum.DEBUG&&this._logService.debug("parsing data"+(typeof E=="string"?` "${E}"`:` "${Array.prototype.map.call(E,W=>String.fromCharCode(W)).join("")}"`),typeof E=="string"?E.split("").map(W=>W.charCodeAt(0)):E),this._parseBuffer.length<E.length&&this._parseBuffer.length<I&&(this._parseBuffer=new Uint32Array(Math.min(E.length,I))),q||this._dirtyRowTracker.clearRange(),E.length>I)for(let W=U;W<E.length;W+=I){let me=W+I<E.length?W+I:E.length,D=typeof E=="string"?this._stringDecoder.decode(E.substring(W,me),this._parseBuffer):this._utf8Decoder.decode(E.subarray(W,me),this._parseBuffer);if(T=this._parser.parse(this._parseBuffer,D))return this._preserveStack(k,j,D,W),this._logSlowResolvingAsync(T),T}else if(!q){let W=typeof E=="string"?this._stringDecoder.decode(E,this._parseBuffer):this._utf8Decoder.decode(E,this._parseBuffer);if(T=this._parser.parse(this._parseBuffer,W))return this._preserveStack(k,j,W,0),this._logSlowResolvingAsync(T),T}this._activeBuffer.x===k&&this._activeBuffer.y===j||this._onCursorMove.fire(),this._onRequestRefreshRows.fire(this._dirtyRowTracker.start,this._dirtyRowTracker.end)}print(E,M,T){let k,j,U=this._charsetService.charset,q=this._optionsService.rawOptions.screenReaderMode,W=this._bufferService.cols,me=this._coreService.decPrivateModes.wraparound,D=this._coreService.modes.insertMode,O=this._curAttrData,P=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._activeBuffer.x&&T-M>0&&P.getWidth(this._activeBuffer.x-1)===2&&P.setCellFromCodePoint(this._activeBuffer.x-1,0,1,O.fg,O.bg,O.extended);for(let N=M;N<T;++N){if(k=E[N],j=this._unicodeService.wcwidth(k),k<127&&U){let Q=U[String.fromCharCode(k)];Q&&(k=Q.charCodeAt(0))}if(q&&this._onA11yChar.fire((0,y.stringFromCodePoint)(k)),this._getCurrentLinkId()&&this._oscLinkService.addLineToLink(this._getCurrentLinkId(),this._activeBuffer.ybase+this._activeBuffer.y),j||!this._activeBuffer.x){if(this._activeBuffer.x+j-1>=W){if(me){for(;this._activeBuffer.x<W;)P.setCellFromCodePoint(this._activeBuffer.x++,0,1,O.fg,O.bg,O.extended);this._activeBuffer.x=0,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),P=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y)}else if(this._activeBuffer.x=W-1,j===2)continue}if(D&&(P.insertCells(this._activeBuffer.x,j,this._activeBuffer.getNullCell(O),O),P.getWidth(W-1)===2&&P.setCellFromCodePoint(W-1,h.NULL_CELL_CODE,h.NULL_CELL_WIDTH,O.fg,O.bg,O.extended)),P.setCellFromCodePoint(this._activeBuffer.x++,k,j,O.fg,O.bg,O.extended),j>0)for(;--j;)P.setCellFromCodePoint(this._activeBuffer.x++,0,0,O.fg,O.bg,O.extended)}else P.getWidth(this._activeBuffer.x-1)?P.addCodepointToCell(this._activeBuffer.x-1,k):P.addCodepointToCell(this._activeBuffer.x-2,k)}T-M>0&&(P.loadCell(this._activeBuffer.x-1,this._workCell),this._workCell.getWidth()===2||this._workCell.getCode()>65535?this._parser.precedingCodepoint=0:this._workCell.isCombined()?this._parser.precedingCodepoint=this._workCell.getChars().charCodeAt(0):this._parser.precedingCodepoint=this._workCell.content),this._activeBuffer.x<W&&T-M>0&&P.getWidth(this._activeBuffer.x)===0&&!P.hasContent(this._activeBuffer.x)&&P.setCellFromCodePoint(this._activeBuffer.x,0,1,O.fg,O.bg,O.extended),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}registerCsiHandler(E,M){return E.final!=="t"||E.prefix||E.intermediates?this._parser.registerCsiHandler(E,M):this._parser.registerCsiHandler(E,T=>!R(T.params[0],this._optionsService.rawOptions.windowOptions)||M(T))}registerDcsHandler(E,M){return this._parser.registerDcsHandler(E,new b.DcsHandler(M))}registerEscHandler(E,M){return this._parser.registerEscHandler(E,M)}registerOscHandler(E,M){return this._parser.registerOscHandler(E,new S.OscHandler(M))}bell(){return this._onRequestBell.fire(),!0}lineFeed(){return this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._optionsService.rawOptions.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows?this._activeBuffer.y=this._bufferService.rows-1:this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0}carriageReturn(){return this._activeBuffer.x=0,!0}backspace(){var E;if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(this._activeBuffer.x===0&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&(!((E=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y))===null||E===void 0)&&E.isWrapped)){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;let M=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);M.hasWidth(this._activeBuffer.x)&&!M.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0}tab(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let E=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.rawOptions.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-E),!0}shiftOut(){return this._charsetService.setgLevel(1),!0}shiftIn(){return this._charsetService.setgLevel(0),!0}_restrictCursor(E=this._bufferService.cols-1){this._activeBuffer.x=Math.min(E,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_setCursor(E,M){this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=E,this._activeBuffer.y=this._activeBuffer.scrollTop+M):(this._activeBuffer.x=E,this._activeBuffer.y=M),this._restrictCursor(),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_moveCursor(E,M){this._restrictCursor(),this._setCursor(this._activeBuffer.x+E,this._activeBuffer.y+M)}cursorUp(E){let M=this._activeBuffer.y-this._activeBuffer.scrollTop;return M>=0?this._moveCursor(0,-Math.min(M,E.params[0]||1)):this._moveCursor(0,-(E.params[0]||1)),!0}cursorDown(E){let M=this._activeBuffer.scrollBottom-this._activeBuffer.y;return M>=0?this._moveCursor(0,Math.min(M,E.params[0]||1)):this._moveCursor(0,E.params[0]||1),!0}cursorForward(E){return this._moveCursor(E.params[0]||1,0),!0}cursorBackward(E){return this._moveCursor(-(E.params[0]||1),0),!0}cursorNextLine(E){return this.cursorDown(E),this._activeBuffer.x=0,!0}cursorPrecedingLine(E){return this.cursorUp(E),this._activeBuffer.x=0,!0}cursorCharAbsolute(E){return this._setCursor((E.params[0]||1)-1,this._activeBuffer.y),!0}cursorPosition(E){return this._setCursor(E.length>=2?(E.params[1]||1)-1:0,(E.params[0]||1)-1),!0}charPosAbsolute(E){return this._setCursor((E.params[0]||1)-1,this._activeBuffer.y),!0}hPositionRelative(E){return this._moveCursor(E.params[0]||1,0),!0}linePosAbsolute(E){return this._setCursor(this._activeBuffer.x,(E.params[0]||1)-1),!0}vPositionRelative(E){return this._moveCursor(0,E.params[0]||1),!0}hVPosition(E){return this.cursorPosition(E),!0}tabClear(E){let M=E.params[0];return M===0?delete this._activeBuffer.tabs[this._activeBuffer.x]:M===3&&(this._activeBuffer.tabs={}),!0}cursorForwardTab(E){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let M=E.params[0]||1;for(;M--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0}cursorBackwardTab(E){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let M=E.params[0]||1;for(;M--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0}selectProtected(E){let M=E.params[0];return M===1&&(this._curAttrData.bg|=536870912),M!==2&&M!==0||(this._curAttrData.bg&=-536870913),!0}_eraseInBufferLine(E,M,T,k=!1,j=!1){let U=this._activeBuffer.lines.get(this._activeBuffer.ybase+E);U.replaceCells(M,T,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData(),j),k&&(U.isWrapped=!1)}_resetBufferLine(E,M=!1){let T=this._activeBuffer.lines.get(this._activeBuffer.ybase+E);T&&(T.fill(this._activeBuffer.getNullCell(this._eraseAttrData()),M),this._bufferService.buffer.clearMarkers(this._activeBuffer.ybase+E),T.isWrapped=!1)}eraseInDisplay(E,M=!1){let T;switch(this._restrictCursor(this._bufferService.cols),E.params[0]){case 0:for(T=this._activeBuffer.y,this._dirtyRowTracker.markDirty(T),this._eraseInBufferLine(T++,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,M);T<this._bufferService.rows;T++)this._resetBufferLine(T,M);this._dirtyRowTracker.markDirty(T);break;case 1:for(T=this._activeBuffer.y,this._dirtyRowTracker.markDirty(T),this._eraseInBufferLine(T,0,this._activeBuffer.x+1,!0,M),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get(T+1).isWrapped=!1);T--;)this._resetBufferLine(T,M);this._dirtyRowTracker.markDirty(0);break;case 2:for(T=this._bufferService.rows,this._dirtyRowTracker.markDirty(T-1);T--;)this._resetBufferLine(T,M);this._dirtyRowTracker.markDirty(0);break;case 3:let k=this._activeBuffer.lines.length-this._bufferService.rows;k>0&&(this._activeBuffer.lines.trimStart(k),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-k,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-k,0),this._onScroll.fire(0))}return!0}eraseInLine(E,M=!1){switch(this._restrictCursor(this._bufferService.cols),E.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,M);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1,!1,M);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols,!0,M)}return this._dirtyRowTracker.markDirty(this._activeBuffer.y),!0}insertLines(E){this._restrictCursor();let M=E.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let T=this._activeBuffer.ybase+this._activeBuffer.y,k=this._bufferService.rows-1-this._activeBuffer.scrollBottom,j=this._bufferService.rows-1+this._activeBuffer.ybase-k+1;for(;M--;)this._activeBuffer.lines.splice(j-1,1),this._activeBuffer.lines.splice(T,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}deleteLines(E){this._restrictCursor();let M=E.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let T=this._activeBuffer.ybase+this._activeBuffer.y,k;for(k=this._bufferService.rows-1-this._activeBuffer.scrollBottom,k=this._bufferService.rows-1+this._activeBuffer.ybase-k;M--;)this._activeBuffer.lines.splice(T,1),this._activeBuffer.lines.splice(k,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}insertChars(E){this._restrictCursor();let M=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return M&&(M.insertCells(this._activeBuffer.x,E.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}deleteChars(E){this._restrictCursor();let M=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return M&&(M.deleteCells(this._activeBuffer.x,E.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}scrollUp(E){let M=E.params[0]||1;for(;M--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollDown(E){let M=E.params[0]||1;for(;M--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(l.DEFAULT_ATTR_DATA));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollLeft(E){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let M=E.params[0]||1;for(let T=this._activeBuffer.scrollTop;T<=this._activeBuffer.scrollBottom;++T){let k=this._activeBuffer.lines.get(this._activeBuffer.ybase+T);k.deleteCells(0,M,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),k.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollRight(E){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let M=E.params[0]||1;for(let T=this._activeBuffer.scrollTop;T<=this._activeBuffer.scrollBottom;++T){let k=this._activeBuffer.lines.get(this._activeBuffer.ybase+T);k.insertCells(0,M,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),k.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}insertColumns(E){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let M=E.params[0]||1;for(let T=this._activeBuffer.scrollTop;T<=this._activeBuffer.scrollBottom;++T){let k=this._activeBuffer.lines.get(this._activeBuffer.ybase+T);k.insertCells(this._activeBuffer.x,M,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),k.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}deleteColumns(E){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let M=E.params[0]||1;for(let T=this._activeBuffer.scrollTop;T<=this._activeBuffer.scrollBottom;++T){let k=this._activeBuffer.lines.get(this._activeBuffer.ybase+T);k.deleteCells(this._activeBuffer.x,M,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),k.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}eraseChars(E){this._restrictCursor();let M=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return M&&(M.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(E.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}repeatPrecedingCharacter(E){if(!this._parser.precedingCodepoint)return!0;let M=E.params[0]||1,T=new Uint32Array(M);for(let k=0;k<M;++k)T[k]=this._parser.precedingCodepoint;return this.print(T,0,T.length),!0}sendDeviceAttributesPrimary(E){return E.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(c.C0.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(c.C0.ESC+"[?6c")),!0}sendDeviceAttributesSecondary(E){return E.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(c.C0.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(c.C0.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(E.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(c.C0.ESC+"[>83;40003;0c")),!0}_is(E){return(this._optionsService.rawOptions.termName+"").indexOf(E)===0}setMode(E){for(let M=0;M<E.length;M++)switch(E.params[M]){case 4:this._coreService.modes.insertMode=!0;break;case 20:this._optionsService.options.convertEol=!0}return!0}setModePrivate(E){for(let M=0;M<E.length;M++)switch(E.params[M]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,p.DEFAULT_CHARSET),this._charsetService.setgCharset(1,p.DEFAULT_CHARSET),this._charsetService.setgCharset(2,p.DEFAULT_CHARSET),this._charsetService.setgCharset(3,p.DEFAULT_CHARSET);break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:this._optionsService.options.cursorBlink=!0;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 1016:this._coreMouseService.activeEncoding="SGR_PIXELS";break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0}return!0}resetMode(E){for(let M=0;M<E.length;M++)switch(E.params[M]){case 4:this._coreService.modes.insertMode=!1;break;case 20:this._optionsService.options.convertEol=!1}return!0}resetModePrivate(E){for(let M=0;M<E.length;M++)switch(E.params[M]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:this._optionsService.options.cursorBlink=!1;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:case 1016:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),E.params[M]===1049&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1}return!0}requestMode(E,M){let T=this._coreService.decPrivateModes,{activeProtocol:k,activeEncoding:j}=this._coreMouseService,U=this._coreService,{buffers:q,cols:W}=this._bufferService,{active:me,alt:D}=q,O=this._optionsService.rawOptions,P=de=>de?1:2,N=E.params[0];return Q=N,$=M?N===2?4:N===4?P(U.modes.insertMode):N===12?3:N===20?P(O.convertEol):0:N===1?P(T.applicationCursorKeys):N===3?O.windowOptions.setWinLines?W===80?2:W===132?1:0:0:N===6?P(T.origin):N===7?P(T.wraparound):N===8?3:N===9?P(k==="X10"):N===12?P(O.cursorBlink):N===25?P(!U.isCursorHidden):N===45?P(T.reverseWraparound):N===66?P(T.applicationKeypad):N===67?4:N===1e3?P(k==="VT200"):N===1002?P(k==="DRAG"):N===1003?P(k==="ANY"):N===1004?P(T.sendFocus):N===1005?4:N===1006?P(j==="SGR"):N===1015?4:N===1016?P(j==="SGR_PIXELS"):N===1048?1:N===47||N===1047||N===1049?P(me===D):N===2004?P(T.bracketedPasteMode):0,U.triggerDataEvent(`${c.C0.ESC}[${M?"":"?"}${Q};${$}$y`),!0;var Q,$}_updateAttrColor(E,M,T,k,j){return M===2?(E|=50331648,E&=-16777216,E|=m.AttributeData.fromColorRGB([T,k,j])):M===5&&(E&=-50331904,E|=33554432|255&T),E}_extractColor(E,M,T){let k=[0,0,-1,0,0,0],j=0,U=0;do{if(k[U+j]=E.params[M+U],E.hasSubParams(M+U)){let q=E.getSubParams(M+U),W=0;do k[1]===5&&(j=1),k[U+W+1+j]=q[W];while(++W<q.length&&W+U+1+j<k.length);break}if(k[1]===5&&U+j>=2||k[1]===2&&U+j>=5)break;k[1]&&(j=1)}while(++U+M<E.length&&U+j<k.length);for(let q=2;q<k.length;++q)k[q]===-1&&(k[q]=0);switch(k[0]){case 38:T.fg=this._updateAttrColor(T.fg,k[1],k[3],k[4],k[5]);break;case 48:T.bg=this._updateAttrColor(T.bg,k[1],k[3],k[4],k[5]);break;case 58:T.extended=T.extended.clone(),T.extended.underlineColor=this._updateAttrColor(T.extended.underlineColor,k[1],k[3],k[4],k[5])}return U}_processUnderline(E,M){M.extended=M.extended.clone(),(!~E||E>5)&&(E=1),M.extended.underlineStyle=E,M.fg|=268435456,E===0&&(M.fg&=-268435457),M.updateExtended()}_processSGR0(E){E.fg=l.DEFAULT_ATTR_DATA.fg,E.bg=l.DEFAULT_ATTR_DATA.bg,E.extended=E.extended.clone(),E.extended.underlineStyle=0,E.extended.underlineColor&=-67108864,E.updateExtended()}charAttributes(E){if(E.length===1&&E.params[0]===0)return this._processSGR0(this._curAttrData),!0;let M=E.length,T,k=this._curAttrData;for(let j=0;j<M;j++)T=E.params[j],T>=30&&T<=37?(k.fg&=-50331904,k.fg|=16777216|T-30):T>=40&&T<=47?(k.bg&=-50331904,k.bg|=16777216|T-40):T>=90&&T<=97?(k.fg&=-50331904,k.fg|=16777224|T-90):T>=100&&T<=107?(k.bg&=-50331904,k.bg|=16777224|T-100):T===0?this._processSGR0(k):T===1?k.fg|=134217728:T===3?k.bg|=67108864:T===4?(k.fg|=268435456,this._processUnderline(E.hasSubParams(j)?E.getSubParams(j)[0]:1,k)):T===5?k.fg|=536870912:T===7?k.fg|=67108864:T===8?k.fg|=1073741824:T===9?k.fg|=2147483648:T===2?k.bg|=134217728:T===21?this._processUnderline(2,k):T===22?(k.fg&=-134217729,k.bg&=-134217729):T===23?k.bg&=-67108865:T===24?(k.fg&=-268435457,this._processUnderline(0,k)):T===25?k.fg&=-536870913:T===27?k.fg&=-67108865:T===28?k.fg&=-1073741825:T===29?k.fg&=2147483647:T===39?(k.fg&=-67108864,k.fg|=16777215&l.DEFAULT_ATTR_DATA.fg):T===49?(k.bg&=-67108864,k.bg|=16777215&l.DEFAULT_ATTR_DATA.bg):T===38||T===48||T===58?j+=this._extractColor(E,j,k):T===53?k.bg|=1073741824:T===55?k.bg&=-1073741825:T===59?(k.extended=k.extended.clone(),k.extended.underlineColor=-1,k.updateExtended()):T===100?(k.fg&=-67108864,k.fg|=16777215&l.DEFAULT_ATTR_DATA.fg,k.bg&=-67108864,k.bg|=16777215&l.DEFAULT_ATTR_DATA.bg):this._logService.debug("Unknown SGR attribute: %d.",T);return!0}deviceStatus(E){switch(E.params[0]){case 5:this._coreService.triggerDataEvent(`${c.C0.ESC}[0n`);break;case 6:let M=this._activeBuffer.y+1,T=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${c.C0.ESC}[${M};${T}R`)}return!0}deviceStatusPrivate(E){if(E.params[0]===6){let M=this._activeBuffer.y+1,T=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${c.C0.ESC}[?${M};${T}R`)}return!0}softReset(E){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=l.DEFAULT_ATTR_DATA.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0}setCursorStyle(E){let M=E.params[0]||1;switch(M){case 1:case 2:this._optionsService.options.cursorStyle="block";break;case 3:case 4:this._optionsService.options.cursorStyle="underline";break;case 5:case 6:this._optionsService.options.cursorStyle="bar"}let T=M%2==1;return this._optionsService.options.cursorBlink=T,!0}setScrollRegion(E){let M=E.params[0]||1,T;return(E.length<2||(T=E.params[1])>this._bufferService.rows||T===0)&&(T=this._bufferService.rows),T>M&&(this._activeBuffer.scrollTop=M-1,this._activeBuffer.scrollBottom=T-1,this._setCursor(0,0)),!0}windowOptions(E){if(!R(E.params[0],this._optionsService.rawOptions.windowOptions))return!0;let M=E.length>1?E.params[1]:0;switch(E.params[0]){case 14:M!==2&&this._onRequestWindowsOptionsReport.fire(x.GET_WIN_SIZE_PIXELS);break;case 16:this._onRequestWindowsOptionsReport.fire(x.GET_CELL_SIZE_PIXELS);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(`${c.C0.ESC}[8;${this._bufferService.rows};${this._bufferService.cols}t`);break;case 22:M!==0&&M!==2||(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>10&&this._windowTitleStack.shift()),M!==0&&M!==1||(this._iconNameStack.push(this._iconName),this._iconNameStack.length>10&&this._iconNameStack.shift());break;case 23:M!==0&&M!==2||this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),M!==0&&M!==1||this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop())}return!0}saveCursor(E){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0}restoreCursor(E){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0}setTitle(E){return this._windowTitle=E,this._onTitleChange.fire(E),!0}setIconName(E){return this._iconName=E,!0}setOrReportIndexedColor(E){let M=[],T=E.split(";");for(;T.length>1;){let k=T.shift(),j=T.shift();if(/^\d+$/.exec(k)){let U=parseInt(k);if(H(U))if(j==="?")M.push({type:0,index:U});else{let q=(0,v.parseColor)(j);q&&M.push({type:1,index:U,color:q})}}}return M.length&&this._onColor.fire(M),!0}setHyperlink(E){let M=E.split(";");return!(M.length<2)&&(M[1]?this._createHyperlink(M[0],M[1]):!M[0]&&this._finishHyperlink())}_createHyperlink(E,M){this._getCurrentLinkId()&&this._finishHyperlink();let T=E.split(":"),k,j=T.findIndex(U=>U.startsWith("id="));return j!==-1&&(k=T[j].slice(3)||void 0),this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=this._oscLinkService.registerLink({id:k,uri:M}),this._curAttrData.updateExtended(),!0}_finishHyperlink(){return this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=0,this._curAttrData.updateExtended(),!0}_setOrReportSpecialColor(E,M){let T=E.split(";");for(let k=0;k<T.length&&!(M>=this._specialColors.length);++k,++M)if(T[k]==="?")this._onColor.fire([{type:0,index:this._specialColors[M]}]);else{let j=(0,v.parseColor)(T[k]);j&&this._onColor.fire([{type:1,index:this._specialColors[M],color:j}])}return!0}setOrReportFgColor(E){return this._setOrReportSpecialColor(E,0)}setOrReportBgColor(E){return this._setOrReportSpecialColor(E,1)}setOrReportCursorColor(E){return this._setOrReportSpecialColor(E,2)}restoreIndexedColor(E){if(!E)return this._onColor.fire([{type:2}]),!0;let M=[],T=E.split(";");for(let k=0;k<T.length;++k)if(/^\d+$/.exec(T[k])){let j=parseInt(T[k]);H(j)&&M.push({type:2,index:j})}return M.length&&this._onColor.fire(M),!0}restoreFgColor(E){return this._onColor.fire([{type:2,index:256}]),!0}restoreBgColor(E){return this._onColor.fire([{type:2,index:257}]),!0}restoreCursorColor(E){return this._onColor.fire([{type:2,index:258}]),!0}nextLine(){return this._activeBuffer.x=0,this.index(),!0}keypadApplicationMode(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0}keypadNumericMode(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0}selectDefaultCharset(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,p.DEFAULT_CHARSET),!0}selectCharset(E){return E.length!==2?(this.selectDefaultCharset(),!0):(E[0]==="/"||this._charsetService.setgCharset(w[E[0]],p.CHARSETS[E[1]]||p.DEFAULT_CHARSET),!0)}index(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0}tabSet(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0}reverseIndex(){if(this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop){let E=this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop;this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,E,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)}else this._activeBuffer.y--,this._restrictCursor();return!0}fullReset(){return this._parser.reset(),this._onRequestReset.fire(),!0}reset(){this._curAttrData=l.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=l.DEFAULT_ATTR_DATA.clone()}_eraseAttrData(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=67108863&this._curAttrData.bg,this._eraseAttrDataInternal}setgLevel(E){return this._charsetService.setgLevel(E),!0}screenAlignmentPattern(){let E=new f.CellData;E.content=4194373,E.fg=this._curAttrData.fg,E.bg=this._curAttrData.bg,this._setCursor(0,0);for(let M=0;M<this._bufferService.rows;++M){let T=this._activeBuffer.ybase+this._activeBuffer.y+M,k=this._activeBuffer.lines.get(T);k&&(k.fill(E),k.isWrapped=!1)}return this._dirtyRowTracker.markAllDirty(),this._setCursor(0,0),!0}requestStatusString(E,M){let T=this._bufferService.buffer,k=this._optionsService.rawOptions;return(j=>(this._coreService.triggerDataEvent(`${c.C0.ESC}${j}${c.C0.ESC}\\`),!0))(E==='"q'?`P1$r${this._curAttrData.isProtected()?1:0}"q`:E==='"p'?'P1$r61;1"p':E==="r"?`P1$r${T.scrollTop+1};${T.scrollBottom+1}r`:E==="m"?"P1$r0m":E===" q"?`P1$r${{block:2,underline:4,bar:6}[k.cursorStyle]-(k.cursorBlink?1:0)} q`:"P0$r")}markRangeDirty(E,M){this._dirtyRowTracker.markRangeDirty(E,M)}}i.InputHandler=L;let F=class{constructor(B){this._bufferService=B,this.clearRange()}clearRange(){this.start=this._bufferService.buffer.y,this.end=this._bufferService.buffer.y}markDirty(B){B<this.start?this.start=B:B>this.end&&(this.end=B)}markRangeDirty(B,E){B>E&&(A=B,B=E,E=A),B<this.start&&(this.start=B),E>this.end&&(this.end=E)}markAllDirty(){this.markRangeDirty(0,this._bufferService.rows-1)}};function H(B){return 0<=B&&B<256}F=a([u(0,_.IBufferService)],F)},844:(s,i)=>{function o(a){for(let u of a)u.dispose();a.length=0}Object.defineProperty(i,"__esModule",{value:!0}),i.getDisposeArrayDisposable=i.disposeArray=i.toDisposable=i.MutableDisposable=i.Disposable=void 0,i.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(let a of this._disposables)a.dispose();this._disposables.length=0}register(a){return this._disposables.push(a),a}unregister(a){let u=this._disposables.indexOf(a);u!==-1&&this._disposables.splice(u,1)}},i.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(a){var u;this._isDisposed||a===this._value||((u=this._value)===null||u===void 0||u.dispose(),this._value=a)}clear(){this.value=void 0}dispose(){var a;this._isDisposed=!0,(a=this._value)===null||a===void 0||a.dispose(),this._value=void 0}},i.toDisposable=function(a){return{dispose:a}},i.disposeArray=o,i.getDisposeArrayDisposable=function(a){return{dispose:()=>o(a)}}},1505:(s,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.FourKeyMap=i.TwoKeyMap=void 0;class o{constructor(){this._data={}}set(u,c,p){this._data[u]||(this._data[u]={}),this._data[u][c]=p}get(u,c){return this._data[u]?this._data[u][c]:void 0}clear(){this._data={}}}i.TwoKeyMap=o,i.FourKeyMap=class{constructor(){this._data=new o}set(a,u,c,p,g){this._data.get(a,u)||this._data.set(a,u,new o),this._data.get(a,u).set(c,p,g)}get(a,u,c,p){var g;return(g=this._data.get(a,u))===null||g===void 0?void 0:g.get(c,p)}clear(){this._data.clear()}}},6114:(s,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.isChromeOS=i.isLinux=i.isWindows=i.isIphone=i.isIpad=i.isMac=i.getSafariVersion=i.isSafari=i.isLegacyEdge=i.isFirefox=i.isNode=void 0,i.isNode=typeof navigator>"u";let o=i.isNode?"node":navigator.userAgent,a=i.isNode?"node":navigator.platform;i.isFirefox=o.includes("Firefox"),i.isLegacyEdge=o.includes("Edge"),i.isSafari=/^((?!chrome|android).)*safari/i.test(o),i.getSafariVersion=function(){if(!i.isSafari)return 0;let u=o.match(/Version\/(\d+)/);return u===null||u.length<2?0:parseInt(u[1])},i.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(a),i.isIpad=a==="iPad",i.isIphone=a==="iPhone",i.isWindows=["Windows","Win16","Win32","WinCE"].includes(a),i.isLinux=a.indexOf("Linux")>=0,i.isChromeOS=/\bCrOS\b/.test(o)},6106:(s,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.SortedList=void 0;let o=0;i.SortedList=class{constructor(a){this._getKey=a,this._array=[]}clear(){this._array.length=0}insert(a){this._array.length!==0?(o=this._search(this._getKey(a)),this._array.splice(o,0,a)):this._array.push(a)}delete(a){if(this._array.length===0)return!1;let u=this._getKey(a);if(u===void 0||(o=this._search(u),o===-1)||this._getKey(this._array[o])!==u)return!1;do if(this._array[o]===a)return this._array.splice(o,1),!0;while(++o<this._array.length&&this._getKey(this._array[o])===u);return!1}*getKeyIterator(a){if(this._array.length!==0&&(o=this._search(a),!(o<0||o>=this._array.length)&&this._getKey(this._array[o])===a))do yield this._array[o];while(++o<this._array.length&&this._getKey(this._array[o])===a)}forEachByKey(a,u){if(this._array.length!==0&&(o=this._search(a),!(o<0||o>=this._array.length)&&this._getKey(this._array[o])===a))do u(this._array[o]);while(++o<this._array.length&&this._getKey(this._array[o])===a)}values(){return[...this._array].values()}_search(a){let u=0,c=this._array.length-1;for(;c>=u;){let p=u+c>>1,g=this._getKey(this._array[p]);if(g>a)c=p-1;else{if(!(g<a)){for(;p>0&&this._getKey(this._array[p-1])===a;)p--;return p}u=p+1}}return u}}},7226:(s,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.DebouncedIdleTask=i.IdleTaskQueue=i.PriorityTaskQueue=void 0;let a=o(6114);class u{constructor(){this._tasks=[],this._i=0}enqueue(g){this._tasks.push(g),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(g){this._idleCallback=void 0;let C=0,y=0,l=g.timeRemaining(),d=0;for(;this._i<this._tasks.length;){if(C=Date.now(),this._tasks[this._i]()||this._i++,C=Math.max(1,Date.now()-C),y=Math.max(C,y),d=g.timeRemaining(),1.5*y>d)return l-C<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(l-C))}ms`),void this._start();l=d}this.clear()}}class c extends u{_requestCallback(g){return setTimeout(()=>g(this._createDeadline(16)))}_cancelCallback(g){clearTimeout(g)}_createDeadline(g){let C=Date.now()+g;return{timeRemaining:()=>Math.max(0,C-Date.now())}}}i.PriorityTaskQueue=c,i.IdleTaskQueue=!a.isNode&&"requestIdleCallback"in window?class extends u{_requestCallback(p){return requestIdleCallback(p)}_cancelCallback(p){cancelIdleCallback(p)}}:c,i.DebouncedIdleTask=class{constructor(){this._queue=new i.IdleTaskQueue}set(p){this._queue.clear(),this._queue.enqueue(p)}flush(){this._queue.flush()}}},9282:(s,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.updateWindowsModeWrappedState=void 0;let a=o(643);i.updateWindowsModeWrappedState=function(u){let c=u.buffer.lines.get(u.buffer.ybase+u.buffer.y-1),p=c?.get(u.cols-1),g=u.buffer.lines.get(u.buffer.ybase+u.buffer.y);g&&p&&(g.isWrapped=p[a.CHAR_DATA_CODE_INDEX]!==a.NULL_CELL_CODE&&p[a.CHAR_DATA_CODE_INDEX]!==a.WHITESPACE_CELL_CODE)}},3734:(s,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ExtendedAttrs=i.AttributeData=void 0;class o{constructor(){this.fg=0,this.bg=0,this.extended=new a}static toColorRGB(c){return[c>>>16&255,c>>>8&255,255&c]}static fromColorRGB(c){return(255&c[0])<<16|(255&c[1])<<8|255&c[2]}clone(){let c=new o;return c.fg=this.fg,c.bg=this.bg,c.extended=this.extended.clone(),c}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}isOverline(){return 1073741824&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return(50331648&this.fg)==50331648}isBgRGB(){return(50331648&this.bg)==50331648}isFgPalette(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432}isBgPalette(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432}isFgDefault(){return(50331648&this.fg)==0}isBgDefault(){return(50331648&this.bg)==0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}}i.AttributeData=o;class a{get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(c){this._ext=c}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(c){this._ext&=-469762049,this._ext|=c<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(c){this._ext&=-67108864,this._ext|=67108863&c}get urlId(){return this._urlId}set urlId(c){this._urlId=c}constructor(c=0,p=0){this._ext=0,this._urlId=0,this._ext=c,this._urlId=p}clone(){return new a(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}}i.ExtendedAttrs=a},9092:(s,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Buffer=i.MAX_BUFFER_SIZE=void 0;let a=o(6349),u=o(7226),c=o(3734),p=o(8437),g=o(4634),C=o(511),y=o(643),l=o(4863),d=o(7116);i.MAX_BUFFER_SIZE=4294967295,i.Buffer=class{constructor(h,f,m){this._hasScrollback=h,this._optionsService=f,this._bufferService=m,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.tabs={},this.savedY=0,this.savedX=0,this.savedCurAttrData=p.DEFAULT_ATTR_DATA.clone(),this.savedCharset=d.DEFAULT_CHARSET,this.markers=[],this._nullCell=C.CellData.fromCharData([0,y.NULL_CELL_CHAR,y.NULL_CELL_WIDTH,y.NULL_CELL_CODE]),this._whitespaceCell=C.CellData.fromCharData([0,y.WHITESPACE_CELL_CHAR,y.WHITESPACE_CELL_WIDTH,y.WHITESPACE_CELL_CODE]),this._isClearing=!1,this._memoryCleanupQueue=new u.IdleTaskQueue,this._memoryCleanupPosition=0,this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new a.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}getNullCell(h){return h?(this._nullCell.fg=h.fg,this._nullCell.bg=h.bg,this._nullCell.extended=h.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new c.ExtendedAttrs),this._nullCell}getWhitespaceCell(h){return h?(this._whitespaceCell.fg=h.fg,this._whitespaceCell.bg=h.bg,this._whitespaceCell.extended=h.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new c.ExtendedAttrs),this._whitespaceCell}getBlankLine(h,f){return new p.BufferLine(this._bufferService.cols,this.getNullCell(h),f)}get hasScrollback(){return this._hasScrollback&&this.lines.maxLength>this._rows}get isCursorInViewport(){let h=this.ybase+this.y-this.ydisp;return h>=0&&h<this._rows}_getCorrectBufferLength(h){if(!this._hasScrollback)return h;let f=h+this._optionsService.rawOptions.scrollback;return f>i.MAX_BUFFER_SIZE?i.MAX_BUFFER_SIZE:f}fillViewportRows(h){if(this.lines.length===0){h===void 0&&(h=p.DEFAULT_ATTR_DATA);let f=this._rows;for(;f--;)this.lines.push(this.getBlankLine(h))}}clear(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new a.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}resize(h,f){let m=this.getNullCell(p.DEFAULT_ATTR_DATA),_=0,S=this._getCorrectBufferLength(f);if(S>this.lines.maxLength&&(this.lines.maxLength=S),this.lines.length>0){if(this._cols<h)for(let v=0;v<this.lines.length;v++)_+=+this.lines.get(v).resize(h,m);let b=0;if(this._rows<f)for(let v=this._rows;v<f;v++)this.lines.length<f+this.ybase&&(this._optionsService.rawOptions.windowsMode||this._optionsService.rawOptions.windowsPty.backend!==void 0||this._optionsService.rawOptions.windowsPty.buildNumber!==void 0?this.lines.push(new p.BufferLine(h,m)):this.ybase>0&&this.lines.length<=this.ybase+this.y+b+1?(this.ybase--,b++,this.ydisp>0&&this.ydisp--):this.lines.push(new p.BufferLine(h,m)));else for(let v=this._rows;v>f;v--)this.lines.length>f+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(S<this.lines.maxLength){let v=this.lines.length-S;v>0&&(this.lines.trimStart(v),this.ybase=Math.max(this.ybase-v,0),this.ydisp=Math.max(this.ydisp-v,0),this.savedY=Math.max(this.savedY-v,0)),this.lines.maxLength=S}this.x=Math.min(this.x,h-1),this.y=Math.min(this.y,f-1),b&&(this.y+=b),this.savedX=Math.min(this.savedX,h-1),this.scrollTop=0}if(this.scrollBottom=f-1,this._isReflowEnabled&&(this._reflow(h,f),this._cols>h))for(let b=0;b<this.lines.length;b++)_+=+this.lines.get(b).resize(h,m);this._cols=h,this._rows=f,this._memoryCleanupQueue.clear(),_>.1*this.lines.length&&(this._memoryCleanupPosition=0,this._memoryCleanupQueue.enqueue(()=>this._batchedMemoryCleanup()))}_batchedMemoryCleanup(){let h=!0;this._memoryCleanupPosition>=this.lines.length&&(this._memoryCleanupPosition=0,h=!1);let f=0;for(;this._memoryCleanupPosition<this.lines.length;)if(f+=this.lines.get(this._memoryCleanupPosition++).cleanupMemory(),f>100)return!0;return h}get _isReflowEnabled(){let h=this._optionsService.rawOptions.windowsPty;return h&&h.buildNumber?this._hasScrollback&&h.backend==="conpty"&&h.buildNumber>=21376:this._hasScrollback&&!this._optionsService.rawOptions.windowsMode}_reflow(h,f){this._cols!==h&&(h>this._cols?this._reflowLarger(h,f):this._reflowSmaller(h,f))}_reflowLarger(h,f){let m=(0,g.reflowLargerGetLinesToRemove)(this.lines,this._cols,h,this.ybase+this.y,this.getNullCell(p.DEFAULT_ATTR_DATA));if(m.length>0){let _=(0,g.reflowLargerCreateNewLayout)(this.lines,m);(0,g.reflowLargerApplyNewLayout)(this.lines,_.layout),this._reflowLargerAdjustViewport(h,f,_.countRemoved)}}_reflowLargerAdjustViewport(h,f,m){let _=this.getNullCell(p.DEFAULT_ATTR_DATA),S=m;for(;S-- >0;)this.ybase===0?(this.y>0&&this.y--,this.lines.length<f&&this.lines.push(new p.BufferLine(h,_))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-m,0)}_reflowSmaller(h,f){let m=this.getNullCell(p.DEFAULT_ATTR_DATA),_=[],S=0;for(let b=this.lines.length-1;b>=0;b--){let v=this.lines.get(b);if(!v||!v.isWrapped&&v.getTrimmedLength()<=h)continue;let w=[v];for(;v.isWrapped&&b>0;)v=this.lines.get(--b),w.unshift(v);let I=this.ybase+this.y;if(I>=b&&I<b+w.length)continue;let R=w[w.length-1].getTrimmedLength(),x=(0,g.reflowSmallerGetNewLineLengths)(w,this._cols,h),A=x.length-w.length,L;L=this.ybase===0&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+A):Math.max(0,this.lines.length-this.lines.maxLength+A);let F=[];for(let k=0;k<A;k++){let j=this.getBlankLine(p.DEFAULT_ATTR_DATA,!0);F.push(j)}F.length>0&&(_.push({start:b+w.length+S,newLines:F}),S+=F.length),w.push(...F);let H=x.length-1,B=x[H];B===0&&(H--,B=x[H]);let E=w.length-A-1,M=R;for(;E>=0;){let k=Math.min(M,B);if(w[H]===void 0)break;if(w[H].copyCellsFrom(w[E],M-k,B-k,k,!0),B-=k,B===0&&(H--,B=x[H]),M-=k,M===0){E--;let j=Math.max(E,0);M=(0,g.getWrappedLineTrimmedLength)(w,j,this._cols)}}for(let k=0;k<w.length;k++)x[k]<h&&w[k].setCell(x[k],m);let T=A-L;for(;T-- >0;)this.ybase===0?this.y<f-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+S)-f&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+A,this.ybase+f-1)}if(_.length>0){let b=[],v=[];for(let H=0;H<this.lines.length;H++)v.push(this.lines.get(H));let w=this.lines.length,I=w-1,R=0,x=_[R];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+S);let A=0;for(let H=Math.min(this.lines.maxLength-1,w+S-1);H>=0;H--)if(x&&x.start>I+A){for(let B=x.newLines.length-1;B>=0;B--)this.lines.set(H--,x.newLines[B]);H++,b.push({index:I+1,amount:x.newLines.length}),A+=x.newLines.length,x=_[++R]}else this.lines.set(H,v[I--]);let L=0;for(let H=b.length-1;H>=0;H--)b[H].index+=L,this.lines.onInsertEmitter.fire(b[H]),L+=b[H].amount;let F=Math.max(0,w+S-this.lines.maxLength);F>0&&this.lines.onTrimEmitter.fire(F)}}translateBufferLineToString(h,f,m=0,_){let S=this.lines.get(h);return S?S.translateToString(f,m,_):""}getWrappedRangeForLine(h){let f=h,m=h;for(;f>0&&this.lines.get(f).isWrapped;)f--;for(;m+1<this.lines.length&&this.lines.get(m+1).isWrapped;)m++;return{first:f,last:m}}setupTabStops(h){for(h!=null?this.tabs[h]||(h=this.prevStop(h)):(this.tabs={},h=0);h<this._cols;h+=this._optionsService.rawOptions.tabStopWidth)this.tabs[h]=!0}prevStop(h){for(h==null&&(h=this.x);!this.tabs[--h]&&h>0;);return h>=this._cols?this._cols-1:h<0?0:h}nextStop(h){for(h==null&&(h=this.x);!this.tabs[++h]&&h<this._cols;);return h>=this._cols?this._cols-1:h<0?0:h}clearMarkers(h){this._isClearing=!0;for(let f=0;f<this.markers.length;f++)this.markers[f].line===h&&(this.markers[f].dispose(),this.markers.splice(f--,1));this._isClearing=!1}clearAllMarkers(){this._isClearing=!0;for(let h=0;h<this.markers.length;h++)this.markers[h].dispose(),this.markers.splice(h--,1);this._isClearing=!1}addMarker(h){let f=new l.Marker(h);return this.markers.push(f),f.register(this.lines.onTrim(m=>{f.line-=m,f.line<0&&f.dispose()})),f.register(this.lines.onInsert(m=>{f.line>=m.index&&(f.line+=m.amount)})),f.register(this.lines.onDelete(m=>{f.line>=m.index&&f.line<m.index+m.amount&&f.dispose(),f.line>m.index&&(f.line-=m.amount)})),f.register(f.onDispose(()=>this._removeMarker(f))),f}_removeMarker(h){this._isClearing||this.markers.splice(this.markers.indexOf(h),1)}}},8437:(s,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferLine=i.DEFAULT_ATTR_DATA=void 0;let a=o(3734),u=o(511),c=o(643),p=o(482);i.DEFAULT_ATTR_DATA=Object.freeze(new a.AttributeData);let g=0;class C{constructor(l,d,h=!1){this.isWrapped=h,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(3*l);let f=d||u.CellData.fromCharData([0,c.NULL_CELL_CHAR,c.NULL_CELL_WIDTH,c.NULL_CELL_CODE]);for(let m=0;m<l;++m)this.setCell(m,f);this.length=l}get(l){let d=this._data[3*l+0],h=2097151&d;return[this._data[3*l+1],2097152&d?this._combined[l]:h?(0,p.stringFromCodePoint)(h):"",d>>22,2097152&d?this._combined[l].charCodeAt(this._combined[l].length-1):h]}set(l,d){this._data[3*l+1]=d[c.CHAR_DATA_ATTR_INDEX],d[c.CHAR_DATA_CHAR_INDEX].length>1?(this._combined[l]=d[1],this._data[3*l+0]=2097152|l|d[c.CHAR_DATA_WIDTH_INDEX]<<22):this._data[3*l+0]=d[c.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|d[c.CHAR_DATA_WIDTH_INDEX]<<22}getWidth(l){return this._data[3*l+0]>>22}hasWidth(l){return 12582912&this._data[3*l+0]}getFg(l){return this._data[3*l+1]}getBg(l){return this._data[3*l+2]}hasContent(l){return 4194303&this._data[3*l+0]}getCodePoint(l){let d=this._data[3*l+0];return 2097152&d?this._combined[l].charCodeAt(this._combined[l].length-1):2097151&d}isCombined(l){return 2097152&this._data[3*l+0]}getString(l){let d=this._data[3*l+0];return 2097152&d?this._combined[l]:2097151&d?(0,p.stringFromCodePoint)(2097151&d):""}isProtected(l){return 536870912&this._data[3*l+2]}loadCell(l,d){return g=3*l,d.content=this._data[g+0],d.fg=this._data[g+1],d.bg=this._data[g+2],2097152&d.content&&(d.combinedData=this._combined[l]),268435456&d.bg&&(d.extended=this._extendedAttrs[l]),d}setCell(l,d){2097152&d.content&&(this._combined[l]=d.combinedData),268435456&d.bg&&(this._extendedAttrs[l]=d.extended),this._data[3*l+0]=d.content,this._data[3*l+1]=d.fg,this._data[3*l+2]=d.bg}setCellFromCodePoint(l,d,h,f,m,_){268435456&m&&(this._extendedAttrs[l]=_),this._data[3*l+0]=d|h<<22,this._data[3*l+1]=f,this._data[3*l+2]=m}addCodepointToCell(l,d){let h=this._data[3*l+0];2097152&h?this._combined[l]+=(0,p.stringFromCodePoint)(d):(2097151&h?(this._combined[l]=(0,p.stringFromCodePoint)(2097151&h)+(0,p.stringFromCodePoint)(d),h&=-2097152,h|=2097152):h=d|4194304,this._data[3*l+0]=h)}insertCells(l,d,h,f){if((l%=this.length)&&this.getWidth(l-1)===2&&this.setCellFromCodePoint(l-1,0,1,f?.fg||0,f?.bg||0,f?.extended||new a.ExtendedAttrs),d<this.length-l){let m=new u.CellData;for(let _=this.length-l-d-1;_>=0;--_)this.setCell(l+d+_,this.loadCell(l+_,m));for(let _=0;_<d;++_)this.setCell(l+_,h)}else for(let m=l;m<this.length;++m)this.setCell(m,h);this.getWidth(this.length-1)===2&&this.setCellFromCodePoint(this.length-1,0,1,f?.fg||0,f?.bg||0,f?.extended||new a.ExtendedAttrs)}deleteCells(l,d,h,f){if(l%=this.length,d<this.length-l){let m=new u.CellData;for(let _=0;_<this.length-l-d;++_)this.setCell(l+_,this.loadCell(l+d+_,m));for(let _=this.length-d;_<this.length;++_)this.setCell(_,h)}else for(let m=l;m<this.length;++m)this.setCell(m,h);l&&this.getWidth(l-1)===2&&this.setCellFromCodePoint(l-1,0,1,f?.fg||0,f?.bg||0,f?.extended||new a.ExtendedAttrs),this.getWidth(l)!==0||this.hasContent(l)||this.setCellFromCodePoint(l,0,1,f?.fg||0,f?.bg||0,f?.extended||new a.ExtendedAttrs)}replaceCells(l,d,h,f,m=!1){if(m)for(l&&this.getWidth(l-1)===2&&!this.isProtected(l-1)&&this.setCellFromCodePoint(l-1,0,1,f?.fg||0,f?.bg||0,f?.extended||new a.ExtendedAttrs),d<this.length&&this.getWidth(d-1)===2&&!this.isProtected(d)&&this.setCellFromCodePoint(d,0,1,f?.fg||0,f?.bg||0,f?.extended||new a.ExtendedAttrs);l<d&&l<this.length;)this.isProtected(l)||this.setCell(l,h),l++;else for(l&&this.getWidth(l-1)===2&&this.setCellFromCodePoint(l-1,0,1,f?.fg||0,f?.bg||0,f?.extended||new a.ExtendedAttrs),d<this.length&&this.getWidth(d-1)===2&&this.setCellFromCodePoint(d,0,1,f?.fg||0,f?.bg||0,f?.extended||new a.ExtendedAttrs);l<d&&l<this.length;)this.setCell(l++,h)}resize(l,d){if(l===this.length)return 4*this._data.length*2<this._data.buffer.byteLength;let h=3*l;if(l>this.length){if(this._data.buffer.byteLength>=4*h)this._data=new Uint32Array(this._data.buffer,0,h);else{let f=new Uint32Array(h);f.set(this._data),this._data=f}for(let f=this.length;f<l;++f)this.setCell(f,d)}else{this._data=this._data.subarray(0,h);let f=Object.keys(this._combined);for(let _=0;_<f.length;_++){let S=parseInt(f[_],10);S>=l&&delete this._combined[S]}let m=Object.keys(this._extendedAttrs);for(let _=0;_<m.length;_++){let S=parseInt(m[_],10);S>=l&&delete this._extendedAttrs[S]}}return this.length=l,4*h*2<this._data.buffer.byteLength}cleanupMemory(){if(4*this._data.length*2<this._data.buffer.byteLength){let l=new Uint32Array(this._data.length);return l.set(this._data),this._data=l,1}return 0}fill(l,d=!1){if(d)for(let h=0;h<this.length;++h)this.isProtected(h)||this.setCell(h,l);else{this._combined={},this._extendedAttrs={};for(let h=0;h<this.length;++h)this.setCell(h,l)}}copyFrom(l){this.length!==l.length?this._data=new Uint32Array(l._data):this._data.set(l._data),this.length=l.length,this._combined={};for(let d in l._combined)this._combined[d]=l._combined[d];this._extendedAttrs={};for(let d in l._extendedAttrs)this._extendedAttrs[d]=l._extendedAttrs[d];this.isWrapped=l.isWrapped}clone(){let l=new C(0);l._data=new Uint32Array(this._data),l.length=this.length;for(let d in this._combined)l._combined[d]=this._combined[d];for(let d in this._extendedAttrs)l._extendedAttrs[d]=this._extendedAttrs[d];return l.isWrapped=this.isWrapped,l}getTrimmedLength(){for(let l=this.length-1;l>=0;--l)if(4194303&this._data[3*l+0])return l+(this._data[3*l+0]>>22);return 0}getNoBgTrimmedLength(){for(let l=this.length-1;l>=0;--l)if(4194303&this._data[3*l+0]||50331648&this._data[3*l+2])return l+(this._data[3*l+0]>>22);return 0}copyCellsFrom(l,d,h,f,m){let _=l._data;if(m)for(let b=f-1;b>=0;b--){for(let v=0;v<3;v++)this._data[3*(h+b)+v]=_[3*(d+b)+v];268435456&_[3*(d+b)+2]&&(this._extendedAttrs[h+b]=l._extendedAttrs[d+b])}else for(let b=0;b<f;b++){for(let v=0;v<3;v++)this._data[3*(h+b)+v]=_[3*(d+b)+v];268435456&_[3*(d+b)+2]&&(this._extendedAttrs[h+b]=l._extendedAttrs[d+b])}let S=Object.keys(l._combined);for(let b=0;b<S.length;b++){let v=parseInt(S[b],10);v>=d&&(this._combined[v-d+h]=l._combined[v])}}translateToString(l=!1,d=0,h=this.length){l&&(h=Math.min(h,this.getTrimmedLength()));let f="";for(;d<h;){let m=this._data[3*d+0],_=2097151&m;f+=2097152&m?this._combined[d]:_?(0,p.stringFromCodePoint)(_):c.WHITESPACE_CELL_CHAR,d+=m>>22||1}return f}}i.BufferLine=C},4841:(s,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.getRangeLength=void 0,i.getRangeLength=function(o,a){if(o.start.y>o.end.y)throw new Error(`Buffer range end (${o.end.x}, ${o.end.y}) cannot be before start (${o.start.x}, ${o.start.y})`);return a*(o.end.y-o.start.y)+(o.end.x-o.start.x+1)}},4634:(s,i)=>{function o(a,u,c){if(u===a.length-1)return a[u].getTrimmedLength();let p=!a[u].hasContent(c-1)&&a[u].getWidth(c-1)===1,g=a[u+1].getWidth(0)===2;return p&&g?c-1:c}Object.defineProperty(i,"__esModule",{value:!0}),i.getWrappedLineTrimmedLength=i.reflowSmallerGetNewLineLengths=i.reflowLargerApplyNewLayout=i.reflowLargerCreateNewLayout=i.reflowLargerGetLinesToRemove=void 0,i.reflowLargerGetLinesToRemove=function(a,u,c,p,g){let C=[];for(let y=0;y<a.length-1;y++){let l=y,d=a.get(++l);if(!d.isWrapped)continue;let h=[a.get(y)];for(;l<a.length&&d.isWrapped;)h.push(d),d=a.get(++l);if(p>=y&&p<l){y+=h.length-1;continue}let f=0,m=o(h,f,u),_=1,S=0;for(;_<h.length;){let v=o(h,_,u),w=v-S,I=c-m,R=Math.min(w,I);h[f].copyCellsFrom(h[_],S,m,R,!1),m+=R,m===c&&(f++,m=0),S+=R,S===v&&(_++,S=0),m===0&&f!==0&&h[f-1].getWidth(c-1)===2&&(h[f].copyCellsFrom(h[f-1],c-1,m++,1,!1),h[f-1].setCell(c-1,g))}h[f].replaceCells(m,c,g);let b=0;for(let v=h.length-1;v>0&&(v>f||h[v].getTrimmedLength()===0);v--)b++;b>0&&(C.push(y+h.length-b),C.push(b)),y+=h.length-1}return C},i.reflowLargerCreateNewLayout=function(a,u){let c=[],p=0,g=u[p],C=0;for(let y=0;y<a.length;y++)if(g===y){let l=u[++p];a.onDeleteEmitter.fire({index:y-C,amount:l}),y+=l-1,C+=l,g=u[++p]}else c.push(y);return{layout:c,countRemoved:C}},i.reflowLargerApplyNewLayout=function(a,u){let c=[];for(let p=0;p<u.length;p++)c.push(a.get(u[p]));for(let p=0;p<c.length;p++)a.set(p,c[p]);a.length=u.length},i.reflowSmallerGetNewLineLengths=function(a,u,c){let p=[],g=a.map((d,h)=>o(a,h,u)).reduce((d,h)=>d+h),C=0,y=0,l=0;for(;l<g;){if(g-l<c){p.push(g-l);break}C+=c;let d=o(a,y,u);C>d&&(C-=d,y++);let h=a[y].getWidth(C-1)===2;h&&C--;let f=h?c-1:c;p.push(f),l+=f}return p},i.getWrappedLineTrimmedLength=o},5295:(s,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferSet=void 0;let a=o(8460),u=o(844),c=o(9092);class p extends u.Disposable{constructor(C,y){super(),this._optionsService=C,this._bufferService=y,this._onBufferActivate=this.register(new a.EventEmitter),this.onBufferActivate=this._onBufferActivate.event,this.reset(),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.resize(this._bufferService.cols,this._bufferService.rows))),this.register(this._optionsService.onSpecificOptionChange("tabStopWidth",()=>this.setupTabStops()))}reset(){this._normal=new c.Buffer(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new c.Buffer(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()}get alt(){return this._alt}get active(){return this._activeBuffer}get normal(){return this._normal}activateNormalBuffer(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clearAllMarkers(),this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))}activateAltBuffer(C){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(C),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))}resize(C,y){this._normal.resize(C,y),this._alt.resize(C,y),this.setupTabStops(C)}setupTabStops(C){this._normal.setupTabStops(C),this._alt.setupTabStops(C)}}i.BufferSet=p},511:(s,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CellData=void 0;let a=o(482),u=o(643),c=o(3734);class p extends c.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new c.ExtendedAttrs,this.combinedData=""}static fromCharData(C){let y=new p;return y.setFromCharData(C),y}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,a.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(C){this.fg=C[u.CHAR_DATA_ATTR_INDEX],this.bg=0;let y=!1;if(C[u.CHAR_DATA_CHAR_INDEX].length>2)y=!0;else if(C[u.CHAR_DATA_CHAR_INDEX].length===2){let l=C[u.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=l&&l<=56319){let d=C[u.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=d&&d<=57343?this.content=1024*(l-55296)+d-56320+65536|C[u.CHAR_DATA_WIDTH_INDEX]<<22:y=!0}else y=!0}else this.content=C[u.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|C[u.CHAR_DATA_WIDTH_INDEX]<<22;y&&(this.combinedData=C[u.CHAR_DATA_CHAR_INDEX],this.content=2097152|C[u.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}i.CellData=p},643:(s,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.WHITESPACE_CELL_CODE=i.WHITESPACE_CELL_WIDTH=i.WHITESPACE_CELL_CHAR=i.NULL_CELL_CODE=i.NULL_CELL_WIDTH=i.NULL_CELL_CHAR=i.CHAR_DATA_CODE_INDEX=i.CHAR_DATA_WIDTH_INDEX=i.CHAR_DATA_CHAR_INDEX=i.CHAR_DATA_ATTR_INDEX=i.DEFAULT_EXT=i.DEFAULT_ATTR=i.DEFAULT_COLOR=void 0,i.DEFAULT_COLOR=0,i.DEFAULT_ATTR=256|i.DEFAULT_COLOR<<9,i.DEFAULT_EXT=0,i.CHAR_DATA_ATTR_INDEX=0,i.CHAR_DATA_CHAR_INDEX=1,i.CHAR_DATA_WIDTH_INDEX=2,i.CHAR_DATA_CODE_INDEX=3,i.NULL_CELL_CHAR="",i.NULL_CELL_WIDTH=1,i.NULL_CELL_CODE=0,i.WHITESPACE_CELL_CHAR=" ",i.WHITESPACE_CELL_WIDTH=1,i.WHITESPACE_CELL_CODE=32},4863:(s,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Marker=void 0;let a=o(8460),u=o(844);class c{get id(){return this._id}constructor(g){this.line=g,this.isDisposed=!1,this._disposables=[],this._id=c._nextId++,this._onDispose=this.register(new a.EventEmitter),this.onDispose=this._onDispose.event}dispose(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),(0,u.disposeArray)(this._disposables),this._disposables.length=0)}register(g){return this._disposables.push(g),g}}i.Marker=c,c._nextId=1},7116:(s,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.DEFAULT_CHARSET=i.CHARSETS=void 0,i.CHARSETS={},i.DEFAULT_CHARSET=i.CHARSETS.B,i.CHARSETS[0]={"`":"\u25C6",a:"\u2592",b:"\u2409",c:"\u240C",d:"\u240D",e:"\u240A",f:"\xB0",g:"\xB1",h:"\u2424",i:"\u240B",j:"\u2518",k:"\u2510",l:"\u250C",m:"\u2514",n:"\u253C",o:"\u23BA",p:"\u23BB",q:"\u2500",r:"\u23BC",s:"\u23BD",t:"\u251C",u:"\u2524",v:"\u2534",w:"\u252C",x:"\u2502",y:"\u2264",z:"\u2265","{":"\u03C0","|":"\u2260","}":"\xA3","~":"\xB7"},i.CHARSETS.A={"#":"\xA3"},i.CHARSETS.B=void 0,i.CHARSETS[4]={"#":"\xA3","@":"\xBE","[":"ij","\\":"\xBD","]":"|","{":"\xA8","|":"f","}":"\xBC","~":"\xB4"},i.CHARSETS.C=i.CHARSETS[5]={"[":"\xC4","\\":"\xD6","]":"\xC5","^":"\xDC","`":"\xE9","{":"\xE4","|":"\xF6","}":"\xE5","~":"\xFC"},i.CHARSETS.R={"#":"\xA3","@":"\xE0","[":"\xB0","\\":"\xE7","]":"\xA7","{":"\xE9","|":"\xF9","}":"\xE8","~":"\xA8"},i.CHARSETS.Q={"@":"\xE0","[":"\xE2","\\":"\xE7","]":"\xEA","^":"\xEE","`":"\xF4","{":"\xE9","|":"\xF9","}":"\xE8","~":"\xFB"},i.CHARSETS.K={"@":"\xA7","[":"\xC4","\\":"\xD6","]":"\xDC","{":"\xE4","|":"\xF6","}":"\xFC","~":"\xDF"},i.CHARSETS.Y={"#":"\xA3","@":"\xA7","[":"\xB0","\\":"\xE7","]":"\xE9","`":"\xF9","{":"\xE0","|":"\xF2","}":"\xE8","~":"\xEC"},i.CHARSETS.E=i.CHARSETS[6]={"@":"\xC4","[":"\xC6","\\":"\xD8","]":"\xC5","^":"\xDC","`":"\xE4","{":"\xE6","|":"\xF8","}":"\xE5","~":"\xFC"},i.CHARSETS.Z={"#":"\xA3","@":"\xA7","[":"\xA1","\\":"\xD1","]":"\xBF","{":"\xB0","|":"\xF1","}":"\xE7"},i.CHARSETS.H=i.CHARSETS[7]={"@":"\xC9","[":"\xC4","\\":"\xD6","]":"\xC5","^":"\xDC","`":"\xE9","{":"\xE4","|":"\xF6","}":"\xE5","~":"\xFC"},i.CHARSETS["="]={"#":"\xF9","@":"\xE0","[":"\xE9","\\":"\xE7","]":"\xEA","^":"\xEE",_:"\xE8","`":"\xF4","{":"\xE4","|":"\xF6","}":"\xFC","~":"\xFB"}},2584:(s,i)=>{var o,a,u;Object.defineProperty(i,"__esModule",{value:!0}),i.C1_ESCAPED=i.C1=i.C0=void 0,function(c){c.NUL="\0",c.SOH="",c.STX="",c.ETX="",c.EOT="",c.ENQ="",c.ACK="",c.BEL="\x07",c.BS="\b",c.HT="	",c.LF=`
`,c.VT="\v",c.FF="\f",c.CR="\r",c.SO="",c.SI="",c.DLE="",c.DC1="",c.DC2="",c.DC3="",c.DC4="",c.NAK="",c.SYN="",c.ETB="",c.CAN="",c.EM="",c.SUB="",c.ESC="\x1B",c.FS="",c.GS="",c.RS="",c.US="",c.SP=" ",c.DEL="\x7F"}(o||(i.C0=o={})),function(c){c.PAD="\x80",c.HOP="\x81",c.BPH="\x82",c.NBH="\x83",c.IND="\x84",c.NEL="\x85",c.SSA="\x86",c.ESA="\x87",c.HTS="\x88",c.HTJ="\x89",c.VTS="\x8A",c.PLD="\x8B",c.PLU="\x8C",c.RI="\x8D",c.SS2="\x8E",c.SS3="\x8F",c.DCS="\x90",c.PU1="\x91",c.PU2="\x92",c.STS="\x93",c.CCH="\x94",c.MW="\x95",c.SPA="\x96",c.EPA="\x97",c.SOS="\x98",c.SGCI="\x99",c.SCI="\x9A",c.CSI="\x9B",c.ST="\x9C",c.OSC="\x9D",c.PM="\x9E",c.APC="\x9F"}(a||(i.C1=a={})),function(c){c.ST=`${o.ESC}\\`}(u||(i.C1_ESCAPED=u={}))},7399:(s,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.evaluateKeyboardEvent=void 0;let a=o(2584),u={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};i.evaluateKeyboardEvent=function(c,p,g,C){let y={type:0,cancel:!1,key:void 0},l=(c.shiftKey?1:0)|(c.altKey?2:0)|(c.ctrlKey?4:0)|(c.metaKey?8:0);switch(c.keyCode){case 0:c.key==="UIKeyInputUpArrow"?y.key=p?a.C0.ESC+"OA":a.C0.ESC+"[A":c.key==="UIKeyInputLeftArrow"?y.key=p?a.C0.ESC+"OD":a.C0.ESC+"[D":c.key==="UIKeyInputRightArrow"?y.key=p?a.C0.ESC+"OC":a.C0.ESC+"[C":c.key==="UIKeyInputDownArrow"&&(y.key=p?a.C0.ESC+"OB":a.C0.ESC+"[B");break;case 8:if(c.altKey){y.key=a.C0.ESC+a.C0.DEL;break}y.key=a.C0.DEL;break;case 9:if(c.shiftKey){y.key=a.C0.ESC+"[Z";break}y.key=a.C0.HT,y.cancel=!0;break;case 13:y.key=c.altKey?a.C0.ESC+a.C0.CR:a.C0.CR,y.cancel=!0;break;case 27:y.key=a.C0.ESC,c.altKey&&(y.key=a.C0.ESC+a.C0.ESC),y.cancel=!0;break;case 37:if(c.metaKey)break;l?(y.key=a.C0.ESC+"[1;"+(l+1)+"D",y.key===a.C0.ESC+"[1;3D"&&(y.key=a.C0.ESC+(g?"b":"[1;5D"))):y.key=p?a.C0.ESC+"OD":a.C0.ESC+"[D";break;case 39:if(c.metaKey)break;l?(y.key=a.C0.ESC+"[1;"+(l+1)+"C",y.key===a.C0.ESC+"[1;3C"&&(y.key=a.C0.ESC+(g?"f":"[1;5C"))):y.key=p?a.C0.ESC+"OC":a.C0.ESC+"[C";break;case 38:if(c.metaKey)break;l?(y.key=a.C0.ESC+"[1;"+(l+1)+"A",g||y.key!==a.C0.ESC+"[1;3A"||(y.key=a.C0.ESC+"[1;5A")):y.key=p?a.C0.ESC+"OA":a.C0.ESC+"[A";break;case 40:if(c.metaKey)break;l?(y.key=a.C0.ESC+"[1;"+(l+1)+"B",g||y.key!==a.C0.ESC+"[1;3B"||(y.key=a.C0.ESC+"[1;5B")):y.key=p?a.C0.ESC+"OB":a.C0.ESC+"[B";break;case 45:c.shiftKey||c.ctrlKey||(y.key=a.C0.ESC+"[2~");break;case 46:y.key=l?a.C0.ESC+"[3;"+(l+1)+"~":a.C0.ESC+"[3~";break;case 36:y.key=l?a.C0.ESC+"[1;"+(l+1)+"H":p?a.C0.ESC+"OH":a.C0.ESC+"[H";break;case 35:y.key=l?a.C0.ESC+"[1;"+(l+1)+"F":p?a.C0.ESC+"OF":a.C0.ESC+"[F";break;case 33:c.shiftKey?y.type=2:c.ctrlKey?y.key=a.C0.ESC+"[5;"+(l+1)+"~":y.key=a.C0.ESC+"[5~";break;case 34:c.shiftKey?y.type=3:c.ctrlKey?y.key=a.C0.ESC+"[6;"+(l+1)+"~":y.key=a.C0.ESC+"[6~";break;case 112:y.key=l?a.C0.ESC+"[1;"+(l+1)+"P":a.C0.ESC+"OP";break;case 113:y.key=l?a.C0.ESC+"[1;"+(l+1)+"Q":a.C0.ESC+"OQ";break;case 114:y.key=l?a.C0.ESC+"[1;"+(l+1)+"R":a.C0.ESC+"OR";break;case 115:y.key=l?a.C0.ESC+"[1;"+(l+1)+"S":a.C0.ESC+"OS";break;case 116:y.key=l?a.C0.ESC+"[15;"+(l+1)+"~":a.C0.ESC+"[15~";break;case 117:y.key=l?a.C0.ESC+"[17;"+(l+1)+"~":a.C0.ESC+"[17~";break;case 118:y.key=l?a.C0.ESC+"[18;"+(l+1)+"~":a.C0.ESC+"[18~";break;case 119:y.key=l?a.C0.ESC+"[19;"+(l+1)+"~":a.C0.ESC+"[19~";break;case 120:y.key=l?a.C0.ESC+"[20;"+(l+1)+"~":a.C0.ESC+"[20~";break;case 121:y.key=l?a.C0.ESC+"[21;"+(l+1)+"~":a.C0.ESC+"[21~";break;case 122:y.key=l?a.C0.ESC+"[23;"+(l+1)+"~":a.C0.ESC+"[23~";break;case 123:y.key=l?a.C0.ESC+"[24;"+(l+1)+"~":a.C0.ESC+"[24~";break;default:if(!c.ctrlKey||c.shiftKey||c.altKey||c.metaKey)if(g&&!C||!c.altKey||c.metaKey)!g||c.altKey||c.ctrlKey||c.shiftKey||!c.metaKey?c.key&&!c.ctrlKey&&!c.altKey&&!c.metaKey&&c.keyCode>=48&&c.key.length===1?y.key=c.key:c.key&&c.ctrlKey&&(c.key==="_"&&(y.key=a.C0.US),c.key==="@"&&(y.key=a.C0.NUL)):c.keyCode===65&&(y.type=1);else{let d=u[c.keyCode],h=d?.[c.shiftKey?1:0];if(h)y.key=a.C0.ESC+h;else if(c.keyCode>=65&&c.keyCode<=90){let f=c.ctrlKey?c.keyCode-64:c.keyCode+32,m=String.fromCharCode(f);c.shiftKey&&(m=m.toUpperCase()),y.key=a.C0.ESC+m}else if(c.keyCode===32)y.key=a.C0.ESC+(c.ctrlKey?a.C0.NUL:" ");else if(c.key==="Dead"&&c.code.startsWith("Key")){let f=c.code.slice(3,4);c.shiftKey||(f=f.toLowerCase()),y.key=a.C0.ESC+f,y.cancel=!0}}else c.keyCode>=65&&c.keyCode<=90?y.key=String.fromCharCode(c.keyCode-64):c.keyCode===32?y.key=a.C0.NUL:c.keyCode>=51&&c.keyCode<=55?y.key=String.fromCharCode(c.keyCode-51+27):c.keyCode===56?y.key=a.C0.DEL:c.keyCode===219?y.key=a.C0.ESC:c.keyCode===220?y.key=a.C0.FS:c.keyCode===221&&(y.key=a.C0.GS)}return y}},482:(s,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Utf8ToUtf32=i.StringToUtf32=i.utf32ToString=i.stringFromCodePoint=void 0,i.stringFromCodePoint=function(o){return o>65535?(o-=65536,String.fromCharCode(55296+(o>>10))+String.fromCharCode(o%1024+56320)):String.fromCharCode(o)},i.utf32ToString=function(o,a=0,u=o.length){let c="";for(let p=a;p<u;++p){let g=o[p];g>65535?(g-=65536,c+=String.fromCharCode(55296+(g>>10))+String.fromCharCode(g%1024+56320)):c+=String.fromCharCode(g)}return c},i.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(o,a){let u=o.length;if(!u)return 0;let c=0,p=0;if(this._interim){let g=o.charCodeAt(p++);56320<=g&&g<=57343?a[c++]=1024*(this._interim-55296)+g-56320+65536:(a[c++]=this._interim,a[c++]=g),this._interim=0}for(let g=p;g<u;++g){let C=o.charCodeAt(g);if(55296<=C&&C<=56319){if(++g>=u)return this._interim=C,c;let y=o.charCodeAt(g);56320<=y&&y<=57343?a[c++]=1024*(C-55296)+y-56320+65536:(a[c++]=C,a[c++]=y)}else C!==65279&&(a[c++]=C)}return c}},i.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(o,a){let u=o.length;if(!u)return 0;let c,p,g,C,y=0,l=0,d=0;if(this.interim[0]){let m=!1,_=this.interim[0];_&=(224&_)==192?31:(240&_)==224?15:7;let S,b=0;for(;(S=63&this.interim[++b])&&b<4;)_<<=6,_|=S;let v=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,w=v-b;for(;d<w;){if(d>=u)return 0;if(S=o[d++],(192&S)!=128){d--,m=!0;break}this.interim[b++]=S,_<<=6,_|=63&S}m||(v===2?_<128?d--:a[y++]=_:v===3?_<2048||_>=55296&&_<=57343||_===65279||(a[y++]=_):_<65536||_>1114111||(a[y++]=_)),this.interim.fill(0)}let h=u-4,f=d;for(;f<u;){for(;!(!(f<h)||128&(c=o[f])||128&(p=o[f+1])||128&(g=o[f+2])||128&(C=o[f+3]));)a[y++]=c,a[y++]=p,a[y++]=g,a[y++]=C,f+=4;if(c=o[f++],c<128)a[y++]=c;else if((224&c)==192){if(f>=u)return this.interim[0]=c,y;if(p=o[f++],(192&p)!=128){f--;continue}if(l=(31&c)<<6|63&p,l<128){f--;continue}a[y++]=l}else if((240&c)==224){if(f>=u)return this.interim[0]=c,y;if(p=o[f++],(192&p)!=128){f--;continue}if(f>=u)return this.interim[0]=c,this.interim[1]=p,y;if(g=o[f++],(192&g)!=128){f--;continue}if(l=(15&c)<<12|(63&p)<<6|63&g,l<2048||l>=55296&&l<=57343||l===65279)continue;a[y++]=l}else if((248&c)==240){if(f>=u)return this.interim[0]=c,y;if(p=o[f++],(192&p)!=128){f--;continue}if(f>=u)return this.interim[0]=c,this.interim[1]=p,y;if(g=o[f++],(192&g)!=128){f--;continue}if(f>=u)return this.interim[0]=c,this.interim[1]=p,this.interim[2]=g,y;if(C=o[f++],(192&C)!=128){f--;continue}if(l=(7&c)<<18|(63&p)<<12|(63&g)<<6|63&C,l<65536||l>1114111)continue;a[y++]=l}}return y}}},225:(s,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.UnicodeV6=void 0;let o=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],a=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]],u;i.UnicodeV6=class{constructor(){if(this.version="6",!u){u=new Uint8Array(65536),u.fill(1),u[0]=0,u.fill(0,1,32),u.fill(0,127,160),u.fill(2,4352,4448),u[9001]=2,u[9002]=2,u.fill(2,11904,42192),u[12351]=1,u.fill(2,44032,55204),u.fill(2,63744,64256),u.fill(2,65040,65050),u.fill(2,65072,65136),u.fill(2,65280,65377),u.fill(2,65504,65511);for(let c=0;c<o.length;++c)u.fill(0,o[c][0],o[c][1]+1)}}wcwidth(c){return c<32?0:c<127?1:c<65536?u[c]:function(p,g){let C,y=0,l=g.length-1;if(p<g[0][0]||p>g[l][1])return!1;for(;l>=y;)if(C=y+l>>1,p>g[C][1])y=C+1;else{if(!(p<g[C][0]))return!0;l=C-1}return!1}(c,a)?0:c>=131072&&c<=196605||c>=196608&&c<=262141?2:1}}},5981:(s,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.WriteBuffer=void 0;let a=o(8460),u=o(844);class c extends u.Disposable{constructor(g){super(),this._action=g,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0,this._didUserInput=!1,this._onWriteParsed=this.register(new a.EventEmitter),this.onWriteParsed=this._onWriteParsed.event}handleUserInput(){this._didUserInput=!0}writeSync(g,C){if(C!==void 0&&this._syncCalls>C)return void(this._syncCalls=0);if(this._pendingData+=g.length,this._writeBuffer.push(g),this._callbacks.push(void 0),this._syncCalls++,this._isSyncWriting)return;let y;for(this._isSyncWriting=!0;y=this._writeBuffer.shift();){this._action(y);let l=this._callbacks.shift();l&&l()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}write(g,C){if(this._pendingData>5e7)throw new Error("write data discarded, use flow control to avoid losing data");if(!this._writeBuffer.length){if(this._bufferOffset=0,this._didUserInput)return this._didUserInput=!1,this._pendingData+=g.length,this._writeBuffer.push(g),this._callbacks.push(C),void this._innerWrite();setTimeout(()=>this._innerWrite())}this._pendingData+=g.length,this._writeBuffer.push(g),this._callbacks.push(C)}_innerWrite(g=0,C=!0){let y=g||Date.now();for(;this._writeBuffer.length>this._bufferOffset;){let l=this._writeBuffer[this._bufferOffset],d=this._action(l,C);if(d){let f=m=>Date.now()-y>=12?setTimeout(()=>this._innerWrite(0,m)):this._innerWrite(y,m);return void d.catch(m=>(queueMicrotask(()=>{throw m}),Promise.resolve(!1))).then(f)}let h=this._callbacks[this._bufferOffset];if(h&&h(),this._bufferOffset++,this._pendingData-=l.length,Date.now()-y>=12)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>50&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout(()=>this._innerWrite())):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0),this._onWriteParsed.fire()}}i.WriteBuffer=c},5941:(s,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.toRgbString=i.parseColor=void 0;let o=/^([\da-f])\/([\da-f])\/([\da-f])$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/,a=/^[\da-f]+$/;function u(c,p){let g=c.toString(16),C=g.length<2?"0"+g:g;switch(p){case 4:return g[0];case 8:return C;case 12:return(C+C).slice(0,3);default:return C+C}}i.parseColor=function(c){if(!c)return;let p=c.toLowerCase();if(p.indexOf("rgb:")===0){p=p.slice(4);let g=o.exec(p);if(g){let C=g[1]?15:g[4]?255:g[7]?4095:65535;return[Math.round(parseInt(g[1]||g[4]||g[7]||g[10],16)/C*255),Math.round(parseInt(g[2]||g[5]||g[8]||g[11],16)/C*255),Math.round(parseInt(g[3]||g[6]||g[9]||g[12],16)/C*255)]}}else if(p.indexOf("#")===0&&(p=p.slice(1),a.exec(p)&&[3,6,9,12].includes(p.length))){let g=p.length/3,C=[0,0,0];for(let y=0;y<3;++y){let l=parseInt(p.slice(g*y,g*y+g),16);C[y]=g===1?l<<4:g===2?l:g===3?l>>4:l>>8}return C}},i.toRgbString=function(c,p=16){let[g,C,y]=c;return`rgb:${u(g,p)}/${u(C,p)}/${u(y,p)}`}},5770:(s,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.PAYLOAD_LIMIT=void 0,i.PAYLOAD_LIMIT=1e7},6351:(s,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.DcsHandler=i.DcsParser=void 0;let a=o(482),u=o(8742),c=o(5770),p=[];i.DcsParser=class{constructor(){this._handlers=Object.create(null),this._active=p,this._ident=0,this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=p}registerHandler(C,y){this._handlers[C]===void 0&&(this._handlers[C]=[]);let l=this._handlers[C];return l.push(y),{dispose:()=>{let d=l.indexOf(y);d!==-1&&l.splice(d,1)}}}clearHandler(C){this._handlers[C]&&delete this._handlers[C]}setHandlerFallback(C){this._handlerFb=C}reset(){if(this._active.length)for(let C=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;C>=0;--C)this._active[C].unhook(!1);this._stack.paused=!1,this._active=p,this._ident=0}hook(C,y){if(this.reset(),this._ident=C,this._active=this._handlers[C]||p,this._active.length)for(let l=this._active.length-1;l>=0;l--)this._active[l].hook(y);else this._handlerFb(this._ident,"HOOK",y)}put(C,y,l){if(this._active.length)for(let d=this._active.length-1;d>=0;d--)this._active[d].put(C,y,l);else this._handlerFb(this._ident,"PUT",(0,a.utf32ToString)(C,y,l))}unhook(C,y=!0){if(this._active.length){let l=!1,d=this._active.length-1,h=!1;if(this._stack.paused&&(d=this._stack.loopPosition-1,l=y,h=this._stack.fallThrough,this._stack.paused=!1),!h&&l===!1){for(;d>=0&&(l=this._active[d].unhook(C),l!==!0);d--)if(l instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=d,this._stack.fallThrough=!1,l;d--}for(;d>=0;d--)if(l=this._active[d].unhook(!1),l instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=d,this._stack.fallThrough=!0,l}else this._handlerFb(this._ident,"UNHOOK",C);this._active=p,this._ident=0}};let g=new u.Params;g.addParam(0),i.DcsHandler=class{constructor(C){this._handler=C,this._data="",this._params=g,this._hitLimit=!1}hook(C){this._params=C.length>1||C.params[0]?C.clone():g,this._data="",this._hitLimit=!1}put(C,y,l){this._hitLimit||(this._data+=(0,a.utf32ToString)(C,y,l),this._data.length>c.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}unhook(C){let y=!1;if(this._hitLimit)y=!1;else if(C&&(y=this._handler(this._data,this._params),y instanceof Promise))return y.then(l=>(this._params=g,this._data="",this._hitLimit=!1,l));return this._params=g,this._data="",this._hitLimit=!1,y}}},2015:(s,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.EscapeSequenceParser=i.VT500_TRANSITION_TABLE=i.TransitionTable=void 0;let a=o(844),u=o(8742),c=o(6242),p=o(6351);class g{constructor(d){this.table=new Uint8Array(d)}setDefault(d,h){this.table.fill(d<<4|h)}add(d,h,f,m){this.table[h<<8|d]=f<<4|m}addMany(d,h,f,m){for(let _=0;_<d.length;_++)this.table[h<<8|d[_]]=f<<4|m}}i.TransitionTable=g;let C=160;i.VT500_TRANSITION_TABLE=function(){let l=new g(4095),d=Array.apply(null,Array(256)).map((b,v)=>v),h=(b,v)=>d.slice(b,v),f=h(32,127),m=h(0,24);m.push(25),m.push.apply(m,h(28,32));let _=h(0,14),S;for(S in l.setDefault(1,0),l.addMany(f,0,2,0),_)l.addMany([24,26,153,154],S,3,0),l.addMany(h(128,144),S,3,0),l.addMany(h(144,152),S,3,0),l.add(156,S,0,0),l.add(27,S,11,1),l.add(157,S,4,8),l.addMany([152,158,159],S,0,7),l.add(155,S,11,3),l.add(144,S,11,9);return l.addMany(m,0,3,0),l.addMany(m,1,3,1),l.add(127,1,0,1),l.addMany(m,8,0,8),l.addMany(m,3,3,3),l.add(127,3,0,3),l.addMany(m,4,3,4),l.add(127,4,0,4),l.addMany(m,6,3,6),l.addMany(m,5,3,5),l.add(127,5,0,5),l.addMany(m,2,3,2),l.add(127,2,0,2),l.add(93,1,4,8),l.addMany(f,8,5,8),l.add(127,8,5,8),l.addMany([156,27,24,26,7],8,6,0),l.addMany(h(28,32),8,0,8),l.addMany([88,94,95],1,0,7),l.addMany(f,7,0,7),l.addMany(m,7,0,7),l.add(156,7,0,0),l.add(127,7,0,7),l.add(91,1,11,3),l.addMany(h(64,127),3,7,0),l.addMany(h(48,60),3,8,4),l.addMany([60,61,62,63],3,9,4),l.addMany(h(48,60),4,8,4),l.addMany(h(64,127),4,7,0),l.addMany([60,61,62,63],4,0,6),l.addMany(h(32,64),6,0,6),l.add(127,6,0,6),l.addMany(h(64,127),6,0,0),l.addMany(h(32,48),3,9,5),l.addMany(h(32,48),5,9,5),l.addMany(h(48,64),5,0,6),l.addMany(h(64,127),5,7,0),l.addMany(h(32,48),4,9,5),l.addMany(h(32,48),1,9,2),l.addMany(h(32,48),2,9,2),l.addMany(h(48,127),2,10,0),l.addMany(h(48,80),1,10,0),l.addMany(h(81,88),1,10,0),l.addMany([89,90,92],1,10,0),l.addMany(h(96,127),1,10,0),l.add(80,1,11,9),l.addMany(m,9,0,9),l.add(127,9,0,9),l.addMany(h(28,32),9,0,9),l.addMany(h(32,48),9,9,12),l.addMany(h(48,60),9,8,10),l.addMany([60,61,62,63],9,9,10),l.addMany(m,11,0,11),l.addMany(h(32,128),11,0,11),l.addMany(h(28,32),11,0,11),l.addMany(m,10,0,10),l.add(127,10,0,10),l.addMany(h(28,32),10,0,10),l.addMany(h(48,60),10,8,10),l.addMany([60,61,62,63],10,0,11),l.addMany(h(32,48),10,9,12),l.addMany(m,12,0,12),l.add(127,12,0,12),l.addMany(h(28,32),12,0,12),l.addMany(h(32,48),12,9,12),l.addMany(h(48,64),12,0,11),l.addMany(h(64,127),12,12,13),l.addMany(h(64,127),10,12,13),l.addMany(h(64,127),9,12,13),l.addMany(m,13,13,13),l.addMany(f,13,13,13),l.add(127,13,0,13),l.addMany([27,156,24,26],13,14,0),l.add(C,0,2,0),l.add(C,8,5,8),l.add(C,6,0,6),l.add(C,11,0,11),l.add(C,13,13,13),l}();class y extends a.Disposable{constructor(d=i.VT500_TRANSITION_TABLE){super(),this._transitions=d,this._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},this.initialState=0,this.currentState=this.initialState,this._params=new u.Params,this._params.addParam(0),this._collect=0,this.precedingCodepoint=0,this._printHandlerFb=(h,f,m)=>{},this._executeHandlerFb=h=>{},this._csiHandlerFb=(h,f)=>{},this._escHandlerFb=h=>{},this._errorHandlerFb=h=>h,this._printHandler=this._printHandlerFb,this._executeHandlers=Object.create(null),this._csiHandlers=Object.create(null),this._escHandlers=Object.create(null),this.register((0,a.toDisposable)(()=>{this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null)})),this._oscParser=this.register(new c.OscParser),this._dcsParser=this.register(new p.DcsParser),this._errorHandler=this._errorHandlerFb,this.registerEscHandler({final:"\\"},()=>!0)}_identifier(d,h=[64,126]){let f=0;if(d.prefix){if(d.prefix.length>1)throw new Error("only one byte as prefix supported");if(f=d.prefix.charCodeAt(0),f&&60>f||f>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(d.intermediates){if(d.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(let _=0;_<d.intermediates.length;++_){let S=d.intermediates.charCodeAt(_);if(32>S||S>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");f<<=8,f|=S}}if(d.final.length!==1)throw new Error("final must be a single byte");let m=d.final.charCodeAt(0);if(h[0]>m||m>h[1])throw new Error(`final must be in range ${h[0]} .. ${h[1]}`);return f<<=8,f|=m,f}identToString(d){let h=[];for(;d;)h.push(String.fromCharCode(255&d)),d>>=8;return h.reverse().join("")}setPrintHandler(d){this._printHandler=d}clearPrintHandler(){this._printHandler=this._printHandlerFb}registerEscHandler(d,h){let f=this._identifier(d,[48,126]);this._escHandlers[f]===void 0&&(this._escHandlers[f]=[]);let m=this._escHandlers[f];return m.push(h),{dispose:()=>{let _=m.indexOf(h);_!==-1&&m.splice(_,1)}}}clearEscHandler(d){this._escHandlers[this._identifier(d,[48,126])]&&delete this._escHandlers[this._identifier(d,[48,126])]}setEscHandlerFallback(d){this._escHandlerFb=d}setExecuteHandler(d,h){this._executeHandlers[d.charCodeAt(0)]=h}clearExecuteHandler(d){this._executeHandlers[d.charCodeAt(0)]&&delete this._executeHandlers[d.charCodeAt(0)]}setExecuteHandlerFallback(d){this._executeHandlerFb=d}registerCsiHandler(d,h){let f=this._identifier(d);this._csiHandlers[f]===void 0&&(this._csiHandlers[f]=[]);let m=this._csiHandlers[f];return m.push(h),{dispose:()=>{let _=m.indexOf(h);_!==-1&&m.splice(_,1)}}}clearCsiHandler(d){this._csiHandlers[this._identifier(d)]&&delete this._csiHandlers[this._identifier(d)]}setCsiHandlerFallback(d){this._csiHandlerFb=d}registerDcsHandler(d,h){return this._dcsParser.registerHandler(this._identifier(d),h)}clearDcsHandler(d){this._dcsParser.clearHandler(this._identifier(d))}setDcsHandlerFallback(d){this._dcsParser.setHandlerFallback(d)}registerOscHandler(d,h){return this._oscParser.registerHandler(d,h)}clearOscHandler(d){this._oscParser.clearHandler(d)}setOscHandlerFallback(d){this._oscParser.setHandlerFallback(d)}setErrorHandler(d){this._errorHandler=d}clearErrorHandler(){this._errorHandler=this._errorHandlerFb}reset(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0,this._parseStack.state!==0&&(this._parseStack.state=2,this._parseStack.handlers=[])}_preserveStack(d,h,f,m,_){this._parseStack.state=d,this._parseStack.handlers=h,this._parseStack.handlerPos=f,this._parseStack.transition=m,this._parseStack.chunkPos=_}parse(d,h,f){let m,_=0,S=0,b=0;if(this._parseStack.state)if(this._parseStack.state===2)this._parseStack.state=0,b=this._parseStack.chunkPos+1;else{if(f===void 0||this._parseStack.state===1)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");let v=this._parseStack.handlers,w=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(f===!1&&w>-1){for(;w>=0&&(m=v[w](this._params),m!==!0);w--)if(m instanceof Promise)return this._parseStack.handlerPos=w,m}this._parseStack.handlers=[];break;case 4:if(f===!1&&w>-1){for(;w>=0&&(m=v[w](),m!==!0);w--)if(m instanceof Promise)return this._parseStack.handlerPos=w,m}this._parseStack.handlers=[];break;case 6:if(_=d[this._parseStack.chunkPos],m=this._dcsParser.unhook(_!==24&&_!==26,f),m)return m;_===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(_=d[this._parseStack.chunkPos],m=this._oscParser.end(_!==24&&_!==26,f),m)return m;_===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0}this._parseStack.state=0,b=this._parseStack.chunkPos+1,this.precedingCodepoint=0,this.currentState=15&this._parseStack.transition}for(let v=b;v<h;++v){switch(_=d[v],S=this._transitions.table[this.currentState<<8|(_<160?_:C)],S>>4){case 2:for(let A=v+1;;++A){if(A>=h||(_=d[A])<32||_>126&&_<C){this._printHandler(d,v,A),v=A-1;break}if(++A>=h||(_=d[A])<32||_>126&&_<C){this._printHandler(d,v,A),v=A-1;break}if(++A>=h||(_=d[A])<32||_>126&&_<C){this._printHandler(d,v,A),v=A-1;break}if(++A>=h||(_=d[A])<32||_>126&&_<C){this._printHandler(d,v,A),v=A-1;break}}break;case 3:this._executeHandlers[_]?this._executeHandlers[_]():this._executeHandlerFb(_),this.precedingCodepoint=0;break;case 0:break;case 1:if(this._errorHandler({position:v,code:_,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:let w=this._csiHandlers[this._collect<<8|_],I=w?w.length-1:-1;for(;I>=0&&(m=w[I](this._params),m!==!0);I--)if(m instanceof Promise)return this._preserveStack(3,w,I,S,v),m;I<0&&this._csiHandlerFb(this._collect<<8|_,this._params),this.precedingCodepoint=0;break;case 8:do switch(_){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(_-48)}while(++v<h&&(_=d[v])>47&&_<60);v--;break;case 9:this._collect<<=8,this._collect|=_;break;case 10:let R=this._escHandlers[this._collect<<8|_],x=R?R.length-1:-1;for(;x>=0&&(m=R[x](),m!==!0);x--)if(m instanceof Promise)return this._preserveStack(4,R,x,S,v),m;x<0&&this._escHandlerFb(this._collect<<8|_),this.precedingCodepoint=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|_,this._params);break;case 13:for(let A=v+1;;++A)if(A>=h||(_=d[A])===24||_===26||_===27||_>127&&_<C){this._dcsParser.put(d,v,A),v=A-1;break}break;case 14:if(m=this._dcsParser.unhook(_!==24&&_!==26),m)return this._preserveStack(6,[],0,S,v),m;_===27&&(S|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0;break;case 4:this._oscParser.start();break;case 5:for(let A=v+1;;A++)if(A>=h||(_=d[A])<32||_>127&&_<C){this._oscParser.put(d,v,A),v=A-1;break}break;case 6:if(m=this._oscParser.end(_!==24&&_!==26),m)return this._preserveStack(5,[],0,S,v),m;_===27&&(S|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0}this.currentState=15&S}}}i.EscapeSequenceParser=y},6242:(s,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.OscHandler=i.OscParser=void 0;let a=o(5770),u=o(482),c=[];i.OscParser=class{constructor(){this._state=0,this._active=c,this._id=-1,this._handlers=Object.create(null),this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}registerHandler(p,g){this._handlers[p]===void 0&&(this._handlers[p]=[]);let C=this._handlers[p];return C.push(g),{dispose:()=>{let y=C.indexOf(g);y!==-1&&C.splice(y,1)}}}clearHandler(p){this._handlers[p]&&delete this._handlers[p]}setHandlerFallback(p){this._handlerFb=p}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=c}reset(){if(this._state===2)for(let p=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;p>=0;--p)this._active[p].end(!1);this._stack.paused=!1,this._active=c,this._id=-1,this._state=0}_start(){if(this._active=this._handlers[this._id]||c,this._active.length)for(let p=this._active.length-1;p>=0;p--)this._active[p].start();else this._handlerFb(this._id,"START")}_put(p,g,C){if(this._active.length)for(let y=this._active.length-1;y>=0;y--)this._active[y].put(p,g,C);else this._handlerFb(this._id,"PUT",(0,u.utf32ToString)(p,g,C))}start(){this.reset(),this._state=1}put(p,g,C){if(this._state!==3){if(this._state===1)for(;g<C;){let y=p[g++];if(y===59){this._state=2,this._start();break}if(y<48||57<y)return void(this._state=3);this._id===-1&&(this._id=0),this._id=10*this._id+y-48}this._state===2&&C-g>0&&this._put(p,g,C)}}end(p,g=!0){if(this._state!==0){if(this._state!==3)if(this._state===1&&this._start(),this._active.length){let C=!1,y=this._active.length-1,l=!1;if(this._stack.paused&&(y=this._stack.loopPosition-1,C=g,l=this._stack.fallThrough,this._stack.paused=!1),!l&&C===!1){for(;y>=0&&(C=this._active[y].end(p),C!==!0);y--)if(C instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=y,this._stack.fallThrough=!1,C;y--}for(;y>=0;y--)if(C=this._active[y].end(!1),C instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=y,this._stack.fallThrough=!0,C}else this._handlerFb(this._id,"END",p);this._active=c,this._id=-1,this._state=0}}},i.OscHandler=class{constructor(p){this._handler=p,this._data="",this._hitLimit=!1}start(){this._data="",this._hitLimit=!1}put(p,g,C){this._hitLimit||(this._data+=(0,u.utf32ToString)(p,g,C),this._data.length>a.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}end(p){let g=!1;if(this._hitLimit)g=!1;else if(p&&(g=this._handler(this._data),g instanceof Promise))return g.then(C=>(this._data="",this._hitLimit=!1,C));return this._data="",this._hitLimit=!1,g}}},8742:(s,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Params=void 0;let o=2147483647;class a{static fromArray(c){let p=new a;if(!c.length)return p;for(let g=Array.isArray(c[0])?1:0;g<c.length;++g){let C=c[g];if(Array.isArray(C))for(let y=0;y<C.length;++y)p.addSubParam(C[y]);else p.addParam(C)}return p}constructor(c=32,p=32){if(this.maxLength=c,this.maxSubParamsLength=p,p>256)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(c),this.length=0,this._subParams=new Int32Array(p),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(c),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}clone(){let c=new a(this.maxLength,this.maxSubParamsLength);return c.params.set(this.params),c.length=this.length,c._subParams.set(this._subParams),c._subParamsLength=this._subParamsLength,c._subParamsIdx.set(this._subParamsIdx),c._rejectDigits=this._rejectDigits,c._rejectSubDigits=this._rejectSubDigits,c._digitIsSub=this._digitIsSub,c}toArray(){let c=[];for(let p=0;p<this.length;++p){c.push(this.params[p]);let g=this._subParamsIdx[p]>>8,C=255&this._subParamsIdx[p];C-g>0&&c.push(Array.prototype.slice.call(this._subParams,g,C))}return c}reset(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}addParam(c){if(this._digitIsSub=!1,this.length>=this.maxLength)this._rejectDigits=!0;else{if(c<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=c>o?o:c}}addSubParam(c){if(this._digitIsSub=!0,this.length)if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength)this._rejectSubDigits=!0;else{if(c<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=c>o?o:c,this._subParamsIdx[this.length-1]++}}hasSubParams(c){return(255&this._subParamsIdx[c])-(this._subParamsIdx[c]>>8)>0}getSubParams(c){let p=this._subParamsIdx[c]>>8,g=255&this._subParamsIdx[c];return g-p>0?this._subParams.subarray(p,g):null}getSubParamsAll(){let c={};for(let p=0;p<this.length;++p){let g=this._subParamsIdx[p]>>8,C=255&this._subParamsIdx[p];C-g>0&&(c[p]=this._subParams.slice(g,C))}return c}addDigit(c){let p;if(this._rejectDigits||!(p=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)return;let g=this._digitIsSub?this._subParams:this.params,C=g[p-1];g[p-1]=~C?Math.min(10*C+c,o):c}}i.Params=a},5741:(s,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.AddonManager=void 0,i.AddonManager=class{constructor(){this._addons=[]}dispose(){for(let o=this._addons.length-1;o>=0;o--)this._addons[o].instance.dispose()}loadAddon(o,a){let u={instance:a,dispose:a.dispose,isDisposed:!1};this._addons.push(u),a.dispose=()=>this._wrappedAddonDispose(u),a.activate(o)}_wrappedAddonDispose(o){if(o.isDisposed)return;let a=-1;for(let u=0;u<this._addons.length;u++)if(this._addons[u]===o){a=u;break}if(a===-1)throw new Error("Could not dispose an addon that has not been loaded");o.isDisposed=!0,o.dispose.apply(o.instance),this._addons.splice(a,1)}}},8771:(s,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferApiView=void 0;let a=o(3785),u=o(511);i.BufferApiView=class{constructor(c,p){this._buffer=c,this.type=p}init(c){return this._buffer=c,this}get cursorY(){return this._buffer.y}get cursorX(){return this._buffer.x}get viewportY(){return this._buffer.ydisp}get baseY(){return this._buffer.ybase}get length(){return this._buffer.lines.length}getLine(c){let p=this._buffer.lines.get(c);if(p)return new a.BufferLineApiView(p)}getNullCell(){return new u.CellData}}},3785:(s,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferLineApiView=void 0;let a=o(511);i.BufferLineApiView=class{constructor(u){this._line=u}get isWrapped(){return this._line.isWrapped}get length(){return this._line.length}getCell(u,c){if(!(u<0||u>=this._line.length))return c?(this._line.loadCell(u,c),c):this._line.loadCell(u,new a.CellData)}translateToString(u,c,p){return this._line.translateToString(u,c,p)}}},8285:(s,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferNamespaceApi=void 0;let a=o(8771),u=o(8460),c=o(844);class p extends c.Disposable{constructor(C){super(),this._core=C,this._onBufferChange=this.register(new u.EventEmitter),this.onBufferChange=this._onBufferChange.event,this._normal=new a.BufferApiView(this._core.buffers.normal,"normal"),this._alternate=new a.BufferApiView(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate(()=>this._onBufferChange.fire(this.active))}get active(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")}get normal(){return this._normal.init(this._core.buffers.normal)}get alternate(){return this._alternate.init(this._core.buffers.alt)}}i.BufferNamespaceApi=p},7975:(s,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ParserApi=void 0,i.ParserApi=class{constructor(o){this._core=o}registerCsiHandler(o,a){return this._core.registerCsiHandler(o,u=>a(u.toArray()))}addCsiHandler(o,a){return this.registerCsiHandler(o,a)}registerDcsHandler(o,a){return this._core.registerDcsHandler(o,(u,c)=>a(u,c.toArray()))}addDcsHandler(o,a){return this.registerDcsHandler(o,a)}registerEscHandler(o,a){return this._core.registerEscHandler(o,a)}addEscHandler(o,a){return this.registerEscHandler(o,a)}registerOscHandler(o,a){return this._core.registerOscHandler(o,a)}addOscHandler(o,a){return this.registerOscHandler(o,a)}}},7090:(s,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.UnicodeApi=void 0,i.UnicodeApi=class{constructor(o){this._core=o}register(o){this._core.unicodeService.register(o)}get versions(){return this._core.unicodeService.versions}get activeVersion(){return this._core.unicodeService.activeVersion}set activeVersion(o){this._core.unicodeService.activeVersion=o}}},744:function(s,i,o){var a=this&&this.__decorate||function(l,d,h,f){var m,_=arguments.length,S=_<3?d:f===null?f=Object.getOwnPropertyDescriptor(d,h):f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(l,d,h,f);else for(var b=l.length-1;b>=0;b--)(m=l[b])&&(S=(_<3?m(S):_>3?m(d,h,S):m(d,h))||S);return _>3&&S&&Object.defineProperty(d,h,S),S},u=this&&this.__param||function(l,d){return function(h,f){d(h,f,l)}};Object.defineProperty(i,"__esModule",{value:!0}),i.BufferService=i.MINIMUM_ROWS=i.MINIMUM_COLS=void 0;let c=o(8460),p=o(844),g=o(5295),C=o(2585);i.MINIMUM_COLS=2,i.MINIMUM_ROWS=1;let y=i.BufferService=class extends p.Disposable{get buffer(){return this.buffers.active}constructor(l){super(),this.isUserScrolling=!1,this._onResize=this.register(new c.EventEmitter),this.onResize=this._onResize.event,this._onScroll=this.register(new c.EventEmitter),this.onScroll=this._onScroll.event,this.cols=Math.max(l.rawOptions.cols||0,i.MINIMUM_COLS),this.rows=Math.max(l.rawOptions.rows||0,i.MINIMUM_ROWS),this.buffers=this.register(new g.BufferSet(l,this))}resize(l,d){this.cols=l,this.rows=d,this.buffers.resize(l,d),this._onResize.fire({cols:l,rows:d})}reset(){this.buffers.reset(),this.isUserScrolling=!1}scroll(l,d=!1){let h=this.buffer,f;f=this._cachedBlankLine,f&&f.length===this.cols&&f.getFg(0)===l.fg&&f.getBg(0)===l.bg||(f=h.getBlankLine(l,d),this._cachedBlankLine=f),f.isWrapped=d;let m=h.ybase+h.scrollTop,_=h.ybase+h.scrollBottom;if(h.scrollTop===0){let S=h.lines.isFull;_===h.lines.length-1?S?h.lines.recycle().copyFrom(f):h.lines.push(f.clone()):h.lines.splice(_+1,0,f.clone()),S?this.isUserScrolling&&(h.ydisp=Math.max(h.ydisp-1,0)):(h.ybase++,this.isUserScrolling||h.ydisp++)}else{let S=_-m+1;h.lines.shiftElements(m+1,S-1,-1),h.lines.set(_,f.clone())}this.isUserScrolling||(h.ydisp=h.ybase),this._onScroll.fire(h.ydisp)}scrollLines(l,d,h){let f=this.buffer;if(l<0){if(f.ydisp===0)return;this.isUserScrolling=!0}else l+f.ydisp>=f.ybase&&(this.isUserScrolling=!1);let m=f.ydisp;f.ydisp=Math.max(Math.min(f.ydisp+l,f.ybase),0),m!==f.ydisp&&(d||this._onScroll.fire(f.ydisp))}};i.BufferService=y=a([u(0,C.IOptionsService)],y)},7994:(s,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CharsetService=void 0,i.CharsetService=class{constructor(){this.glevel=0,this._charsets=[]}reset(){this.charset=void 0,this._charsets=[],this.glevel=0}setgLevel(o){this.glevel=o,this.charset=this._charsets[o]}setgCharset(o,a){this._charsets[o]=a,this.glevel===o&&(this.charset=a)}}},1753:function(s,i,o){var a=this&&this.__decorate||function(f,m,_,S){var b,v=arguments.length,w=v<3?m:S===null?S=Object.getOwnPropertyDescriptor(m,_):S;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(f,m,_,S);else for(var I=f.length-1;I>=0;I--)(b=f[I])&&(w=(v<3?b(w):v>3?b(m,_,w):b(m,_))||w);return v>3&&w&&Object.defineProperty(m,_,w),w},u=this&&this.__param||function(f,m){return function(_,S){m(_,S,f)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CoreMouseService=void 0;let c=o(2585),p=o(8460),g=o(844),C={NONE:{events:0,restrict:()=>!1},X10:{events:1,restrict:f=>f.button!==4&&f.action===1&&(f.ctrl=!1,f.alt=!1,f.shift=!1,!0)},VT200:{events:19,restrict:f=>f.action!==32},DRAG:{events:23,restrict:f=>f.action!==32||f.button!==3},ANY:{events:31,restrict:f=>!0}};function y(f,m){let _=(f.ctrl?16:0)|(f.shift?4:0)|(f.alt?8:0);return f.button===4?(_|=64,_|=f.action):(_|=3&f.button,4&f.button&&(_|=64),8&f.button&&(_|=128),f.action===32?_|=32:f.action!==0||m||(_|=3)),_}let l=String.fromCharCode,d={DEFAULT:f=>{let m=[y(f,!1)+32,f.col+32,f.row+32];return m[0]>255||m[1]>255||m[2]>255?"":`\x1B[M${l(m[0])}${l(m[1])}${l(m[2])}`},SGR:f=>{let m=f.action===0&&f.button!==4?"m":"M";return`\x1B[<${y(f,!0)};${f.col};${f.row}${m}`},SGR_PIXELS:f=>{let m=f.action===0&&f.button!==4?"m":"M";return`\x1B[<${y(f,!0)};${f.x};${f.y}${m}`}},h=i.CoreMouseService=class extends g.Disposable{constructor(f,m){super(),this._bufferService=f,this._coreService=m,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._lastEvent=null,this._onProtocolChange=this.register(new p.EventEmitter),this.onProtocolChange=this._onProtocolChange.event;for(let _ of Object.keys(C))this.addProtocol(_,C[_]);for(let _ of Object.keys(d))this.addEncoding(_,d[_]);this.reset()}addProtocol(f,m){this._protocols[f]=m}addEncoding(f,m){this._encodings[f]=m}get activeProtocol(){return this._activeProtocol}get areMouseEventsActive(){return this._protocols[this._activeProtocol].events!==0}set activeProtocol(f){if(!this._protocols[f])throw new Error(`unknown protocol "${f}"`);this._activeProtocol=f,this._onProtocolChange.fire(this._protocols[f].events)}get activeEncoding(){return this._activeEncoding}set activeEncoding(f){if(!this._encodings[f])throw new Error(`unknown encoding "${f}"`);this._activeEncoding=f}reset(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null}triggerMouseEvent(f){if(f.col<0||f.col>=this._bufferService.cols||f.row<0||f.row>=this._bufferService.rows||f.button===4&&f.action===32||f.button===3&&f.action!==32||f.button!==4&&(f.action===2||f.action===3)||(f.col++,f.row++,f.action===32&&this._lastEvent&&this._equalEvents(this._lastEvent,f,this._activeEncoding==="SGR_PIXELS"))||!this._protocols[this._activeProtocol].restrict(f))return!1;let m=this._encodings[this._activeEncoding](f);return m&&(this._activeEncoding==="DEFAULT"?this._coreService.triggerBinaryEvent(m):this._coreService.triggerDataEvent(m,!0)),this._lastEvent=f,!0}explainEvents(f){return{down:!!(1&f),up:!!(2&f),drag:!!(4&f),move:!!(8&f),wheel:!!(16&f)}}_equalEvents(f,m,_){if(_){if(f.x!==m.x||f.y!==m.y)return!1}else if(f.col!==m.col||f.row!==m.row)return!1;return f.button===m.button&&f.action===m.action&&f.ctrl===m.ctrl&&f.alt===m.alt&&f.shift===m.shift}};i.CoreMouseService=h=a([u(0,c.IBufferService),u(1,c.ICoreService)],h)},6975:function(s,i,o){var a=this&&this.__decorate||function(h,f,m,_){var S,b=arguments.length,v=b<3?f:_===null?_=Object.getOwnPropertyDescriptor(f,m):_;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")v=Reflect.decorate(h,f,m,_);else for(var w=h.length-1;w>=0;w--)(S=h[w])&&(v=(b<3?S(v):b>3?S(f,m,v):S(f,m))||v);return b>3&&v&&Object.defineProperty(f,m,v),v},u=this&&this.__param||function(h,f){return function(m,_){f(m,_,h)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CoreService=void 0;let c=o(1439),p=o(8460),g=o(844),C=o(2585),y=Object.freeze({insertMode:!1}),l=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,origin:!1,reverseWraparound:!1,sendFocus:!1,wraparound:!0}),d=i.CoreService=class extends g.Disposable{constructor(h,f,m){super(),this._bufferService=h,this._logService=f,this._optionsService=m,this.isCursorInitialized=!1,this.isCursorHidden=!1,this._onData=this.register(new p.EventEmitter),this.onData=this._onData.event,this._onUserInput=this.register(new p.EventEmitter),this.onUserInput=this._onUserInput.event,this._onBinary=this.register(new p.EventEmitter),this.onBinary=this._onBinary.event,this._onRequestScrollToBottom=this.register(new p.EventEmitter),this.onRequestScrollToBottom=this._onRequestScrollToBottom.event,this.modes=(0,c.clone)(y),this.decPrivateModes=(0,c.clone)(l)}reset(){this.modes=(0,c.clone)(y),this.decPrivateModes=(0,c.clone)(l)}triggerDataEvent(h,f=!1){if(this._optionsService.rawOptions.disableStdin)return;let m=this._bufferService.buffer;f&&this._optionsService.rawOptions.scrollOnUserInput&&m.ybase!==m.ydisp&&this._onRequestScrollToBottom.fire(),f&&this._onUserInput.fire(),this._logService.debug(`sending data "${h}"`,()=>h.split("").map(_=>_.charCodeAt(0))),this._onData.fire(h)}triggerBinaryEvent(h){this._optionsService.rawOptions.disableStdin||(this._logService.debug(`sending binary "${h}"`,()=>h.split("").map(f=>f.charCodeAt(0))),this._onBinary.fire(h))}};i.CoreService=d=a([u(0,C.IBufferService),u(1,C.ILogService),u(2,C.IOptionsService)],d)},9074:(s,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.DecorationService=void 0;let a=o(8055),u=o(8460),c=o(844),p=o(6106),g=0,C=0;class y extends c.Disposable{get decorations(){return this._decorations.values()}constructor(){super(),this._decorations=new p.SortedList(h=>h?.marker.line),this._onDecorationRegistered=this.register(new u.EventEmitter),this.onDecorationRegistered=this._onDecorationRegistered.event,this._onDecorationRemoved=this.register(new u.EventEmitter),this.onDecorationRemoved=this._onDecorationRemoved.event,this.register((0,c.toDisposable)(()=>this.reset()))}registerDecoration(h){if(h.marker.isDisposed)return;let f=new l(h);if(f){let m=f.marker.onDispose(()=>f.dispose());f.onDispose(()=>{f&&(this._decorations.delete(f)&&this._onDecorationRemoved.fire(f),m.dispose())}),this._decorations.insert(f),this._onDecorationRegistered.fire(f)}return f}reset(){for(let h of this._decorations.values())h.dispose();this._decorations.clear()}*getDecorationsAtCell(h,f,m){var _,S,b;let v=0,w=0;for(let I of this._decorations.getKeyIterator(f))v=(_=I.options.x)!==null&&_!==void 0?_:0,w=v+((S=I.options.width)!==null&&S!==void 0?S:1),h>=v&&h<w&&(!m||((b=I.options.layer)!==null&&b!==void 0?b:"bottom")===m)&&(yield I)}forEachDecorationAtCell(h,f,m,_){this._decorations.forEachByKey(f,S=>{var b,v,w;g=(b=S.options.x)!==null&&b!==void 0?b:0,C=g+((v=S.options.width)!==null&&v!==void 0?v:1),h>=g&&h<C&&(!m||((w=S.options.layer)!==null&&w!==void 0?w:"bottom")===m)&&_(S)})}}i.DecorationService=y;class l extends c.Disposable{get isDisposed(){return this._isDisposed}get backgroundColorRGB(){return this._cachedBg===null&&(this.options.backgroundColor?this._cachedBg=a.css.toColor(this.options.backgroundColor):this._cachedBg=void 0),this._cachedBg}get foregroundColorRGB(){return this._cachedFg===null&&(this.options.foregroundColor?this._cachedFg=a.css.toColor(this.options.foregroundColor):this._cachedFg=void 0),this._cachedFg}constructor(h){super(),this.options=h,this.onRenderEmitter=this.register(new u.EventEmitter),this.onRender=this.onRenderEmitter.event,this._onDispose=this.register(new u.EventEmitter),this.onDispose=this._onDispose.event,this._cachedBg=null,this._cachedFg=null,this.marker=h.marker,this.options.overviewRulerOptions&&!this.options.overviewRulerOptions.position&&(this.options.overviewRulerOptions.position="full")}dispose(){this._onDispose.fire(),super.dispose()}}},4348:(s,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.InstantiationService=i.ServiceCollection=void 0;let a=o(2585),u=o(8343);class c{constructor(...g){this._entries=new Map;for(let[C,y]of g)this.set(C,y)}set(g,C){let y=this._entries.get(g);return this._entries.set(g,C),y}forEach(g){for(let[C,y]of this._entries.entries())g(C,y)}has(g){return this._entries.has(g)}get(g){return this._entries.get(g)}}i.ServiceCollection=c,i.InstantiationService=class{constructor(){this._services=new c,this._services.set(a.IInstantiationService,this)}setService(p,g){this._services.set(p,g)}getService(p){return this._services.get(p)}createInstance(p,...g){let C=(0,u.getServiceDependencies)(p).sort((d,h)=>d.index-h.index),y=[];for(let d of C){let h=this._services.get(d.id);if(!h)throw new Error(`[createInstance] ${p.name} depends on UNKNOWN service ${d.id}.`);y.push(h)}let l=C.length>0?C[0].index:g.length;if(g.length!==l)throw new Error(`[createInstance] First service dependency of ${p.name} at position ${l+1} conflicts with ${g.length} static arguments`);return new p(...g,...y)}}},7866:function(s,i,o){var a=this&&this.__decorate||function(l,d,h,f){var m,_=arguments.length,S=_<3?d:f===null?f=Object.getOwnPropertyDescriptor(d,h):f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(l,d,h,f);else for(var b=l.length-1;b>=0;b--)(m=l[b])&&(S=(_<3?m(S):_>3?m(d,h,S):m(d,h))||S);return _>3&&S&&Object.defineProperty(d,h,S),S},u=this&&this.__param||function(l,d){return function(h,f){d(h,f,l)}};Object.defineProperty(i,"__esModule",{value:!0}),i.traceCall=i.setTraceLogger=i.LogService=void 0;let c=o(844),p=o(2585),g={trace:p.LogLevelEnum.TRACE,debug:p.LogLevelEnum.DEBUG,info:p.LogLevelEnum.INFO,warn:p.LogLevelEnum.WARN,error:p.LogLevelEnum.ERROR,off:p.LogLevelEnum.OFF},C,y=i.LogService=class extends c.Disposable{get logLevel(){return this._logLevel}constructor(l){super(),this._optionsService=l,this._logLevel=p.LogLevelEnum.OFF,this._updateLogLevel(),this.register(this._optionsService.onSpecificOptionChange("logLevel",()=>this._updateLogLevel())),C=this}_updateLogLevel(){this._logLevel=g[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(l){for(let d=0;d<l.length;d++)typeof l[d]=="function"&&(l[d]=l[d]())}_log(l,d,h){this._evalLazyOptionalParams(h),l.call(console,(this._optionsService.options.logger?"":"xterm.js: ")+d,...h)}trace(l,...d){var h,f;this._logLevel<=p.LogLevelEnum.TRACE&&this._log((f=(h=this._optionsService.options.logger)===null||h===void 0?void 0:h.trace.bind(this._optionsService.options.logger))!==null&&f!==void 0?f:console.log,l,d)}debug(l,...d){var h,f;this._logLevel<=p.LogLevelEnum.DEBUG&&this._log((f=(h=this._optionsService.options.logger)===null||h===void 0?void 0:h.debug.bind(this._optionsService.options.logger))!==null&&f!==void 0?f:console.log,l,d)}info(l,...d){var h,f;this._logLevel<=p.LogLevelEnum.INFO&&this._log((f=(h=this._optionsService.options.logger)===null||h===void 0?void 0:h.info.bind(this._optionsService.options.logger))!==null&&f!==void 0?f:console.info,l,d)}warn(l,...d){var h,f;this._logLevel<=p.LogLevelEnum.WARN&&this._log((f=(h=this._optionsService.options.logger)===null||h===void 0?void 0:h.warn.bind(this._optionsService.options.logger))!==null&&f!==void 0?f:console.warn,l,d)}error(l,...d){var h,f;this._logLevel<=p.LogLevelEnum.ERROR&&this._log((f=(h=this._optionsService.options.logger)===null||h===void 0?void 0:h.error.bind(this._optionsService.options.logger))!==null&&f!==void 0?f:console.error,l,d)}};i.LogService=y=a([u(0,p.IOptionsService)],y),i.setTraceLogger=function(l){C=l},i.traceCall=function(l,d,h){if(typeof h.value!="function")throw new Error("not supported");let f=h.value;h.value=function(...m){if(C.logLevel!==p.LogLevelEnum.TRACE)return f.apply(this,m);C.trace(`GlyphRenderer#${f.name}(${m.map(S=>JSON.stringify(S)).join(", ")})`);let _=f.apply(this,m);return C.trace(`GlyphRenderer#${f.name} return`,_),_}}},7302:(s,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.OptionsService=i.DEFAULT_OPTIONS=void 0;let a=o(8460),u=o(844),c=o(6114);i.DEFAULT_OPTIONS={cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,cursorInactiveStyle:"outline",customGlyphs:!0,drawBoldTextInBrightColors:!0,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",ignoreBracketedPasteMode:!1,lineHeight:1,letterSpacing:0,linkHandler:null,logLevel:"info",logger:null,scrollback:1e3,scrollOnUserInput:!0,scrollSensitivity:1,screenReaderMode:!1,smoothScrollDuration:0,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!1,allowTransparency:!1,tabStopWidth:8,theme:{},rightClickSelectsWord:c.isMac,windowOptions:{},windowsMode:!1,windowsPty:{},wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1,overviewRulerWidth:0};let p=["normal","bold","100","200","300","400","500","600","700","800","900"];class g extends u.Disposable{constructor(y){super(),this._onOptionChange=this.register(new a.EventEmitter),this.onOptionChange=this._onOptionChange.event;let l=Object.assign({},i.DEFAULT_OPTIONS);for(let d in y)if(d in l)try{let h=y[d];l[d]=this._sanitizeAndValidateOption(d,h)}catch(h){console.error(h)}this.rawOptions=l,this.options=Object.assign({},l),this._setupOptions()}onSpecificOptionChange(y,l){return this.onOptionChange(d=>{d===y&&l(this.rawOptions[y])})}onMultipleOptionChange(y,l){return this.onOptionChange(d=>{y.indexOf(d)!==-1&&l()})}_setupOptions(){let y=d=>{if(!(d in i.DEFAULT_OPTIONS))throw new Error(`No option with key "${d}"`);return this.rawOptions[d]},l=(d,h)=>{if(!(d in i.DEFAULT_OPTIONS))throw new Error(`No option with key "${d}"`);h=this._sanitizeAndValidateOption(d,h),this.rawOptions[d]!==h&&(this.rawOptions[d]=h,this._onOptionChange.fire(d))};for(let d in this.rawOptions){let h={get:y.bind(this,d),set:l.bind(this,d)};Object.defineProperty(this.options,d,h)}}_sanitizeAndValidateOption(y,l){switch(y){case"cursorStyle":if(l||(l=i.DEFAULT_OPTIONS[y]),!function(d){return d==="block"||d==="underline"||d==="bar"}(l))throw new Error(`"${l}" is not a valid value for ${y}`);break;case"wordSeparator":l||(l=i.DEFAULT_OPTIONS[y]);break;case"fontWeight":case"fontWeightBold":if(typeof l=="number"&&1<=l&&l<=1e3)break;l=p.includes(l)?l:i.DEFAULT_OPTIONS[y];break;case"cursorWidth":l=Math.floor(l);case"lineHeight":case"tabStopWidth":if(l<1)throw new Error(`${y} cannot be less than 1, value: ${l}`);break;case"minimumContrastRatio":l=Math.max(1,Math.min(21,Math.round(10*l)/10));break;case"scrollback":if((l=Math.min(l,4294967295))<0)throw new Error(`${y} cannot be less than 0, value: ${l}`);break;case"fastScrollSensitivity":case"scrollSensitivity":if(l<=0)throw new Error(`${y} cannot be less than or equal to 0, value: ${l}`);break;case"rows":case"cols":if(!l&&l!==0)throw new Error(`${y} must be numeric, value: ${l}`);break;case"windowsPty":l=l??{}}return l}}i.OptionsService=g},2660:function(s,i,o){var a=this&&this.__decorate||function(g,C,y,l){var d,h=arguments.length,f=h<3?C:l===null?l=Object.getOwnPropertyDescriptor(C,y):l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")f=Reflect.decorate(g,C,y,l);else for(var m=g.length-1;m>=0;m--)(d=g[m])&&(f=(h<3?d(f):h>3?d(C,y,f):d(C,y))||f);return h>3&&f&&Object.defineProperty(C,y,f),f},u=this&&this.__param||function(g,C){return function(y,l){C(y,l,g)}};Object.defineProperty(i,"__esModule",{value:!0}),i.OscLinkService=void 0;let c=o(2585),p=i.OscLinkService=class{constructor(g){this._bufferService=g,this._nextId=1,this._entriesWithId=new Map,this._dataByLinkId=new Map}registerLink(g){let C=this._bufferService.buffer;if(g.id===void 0){let m=C.addMarker(C.ybase+C.y),_={data:g,id:this._nextId++,lines:[m]};return m.onDispose(()=>this._removeMarkerFromLink(_,m)),this._dataByLinkId.set(_.id,_),_.id}let y=g,l=this._getEntryIdKey(y),d=this._entriesWithId.get(l);if(d)return this.addLineToLink(d.id,C.ybase+C.y),d.id;let h=C.addMarker(C.ybase+C.y),f={id:this._nextId++,key:this._getEntryIdKey(y),data:y,lines:[h]};return h.onDispose(()=>this._removeMarkerFromLink(f,h)),this._entriesWithId.set(f.key,f),this._dataByLinkId.set(f.id,f),f.id}addLineToLink(g,C){let y=this._dataByLinkId.get(g);if(y&&y.lines.every(l=>l.line!==C)){let l=this._bufferService.buffer.addMarker(C);y.lines.push(l),l.onDispose(()=>this._removeMarkerFromLink(y,l))}}getLinkData(g){var C;return(C=this._dataByLinkId.get(g))===null||C===void 0?void 0:C.data}_getEntryIdKey(g){return`${g.id};;${g.uri}`}_removeMarkerFromLink(g,C){let y=g.lines.indexOf(C);y!==-1&&(g.lines.splice(y,1),g.lines.length===0&&(g.data.id!==void 0&&this._entriesWithId.delete(g.key),this._dataByLinkId.delete(g.id)))}};i.OscLinkService=p=a([u(0,c.IBufferService)],p)},8343:(s,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.createDecorator=i.getServiceDependencies=i.serviceRegistry=void 0;let o="di$target",a="di$dependencies";i.serviceRegistry=new Map,i.getServiceDependencies=function(u){return u[a]||[]},i.createDecorator=function(u){if(i.serviceRegistry.has(u))return i.serviceRegistry.get(u);let c=function(p,g,C){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");(function(y,l,d){l[o]===l?l[a].push({id:y,index:d}):(l[a]=[{id:y,index:d}],l[o]=l)})(c,p,C)};return c.toString=()=>u,i.serviceRegistry.set(u,c),c}},2585:(s,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.IDecorationService=i.IUnicodeService=i.IOscLinkService=i.IOptionsService=i.ILogService=i.LogLevelEnum=i.IInstantiationService=i.ICharsetService=i.ICoreService=i.ICoreMouseService=i.IBufferService=void 0;let a=o(8343);var u;i.IBufferService=(0,a.createDecorator)("BufferService"),i.ICoreMouseService=(0,a.createDecorator)("CoreMouseService"),i.ICoreService=(0,a.createDecorator)("CoreService"),i.ICharsetService=(0,a.createDecorator)("CharsetService"),i.IInstantiationService=(0,a.createDecorator)("InstantiationService"),function(c){c[c.TRACE=0]="TRACE",c[c.DEBUG=1]="DEBUG",c[c.INFO=2]="INFO",c[c.WARN=3]="WARN",c[c.ERROR=4]="ERROR",c[c.OFF=5]="OFF"}(u||(i.LogLevelEnum=u={})),i.ILogService=(0,a.createDecorator)("LogService"),i.IOptionsService=(0,a.createDecorator)("OptionsService"),i.IOscLinkService=(0,a.createDecorator)("OscLinkService"),i.IUnicodeService=(0,a.createDecorator)("UnicodeService"),i.IDecorationService=(0,a.createDecorator)("DecorationService")},1480:(s,i,o)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.UnicodeService=void 0;let a=o(8460),u=o(225);i.UnicodeService=class{constructor(){this._providers=Object.create(null),this._active="",this._onChange=new a.EventEmitter,this.onChange=this._onChange.event;let c=new u.UnicodeV6;this.register(c),this._active=c.version,this._activeProvider=c}dispose(){this._onChange.dispose()}get versions(){return Object.keys(this._providers)}get activeVersion(){return this._active}set activeVersion(c){if(!this._providers[c])throw new Error(`unknown Unicode version "${c}"`);this._active=c,this._activeProvider=this._providers[c],this._onChange.fire(c)}register(c){this._providers[c.version]=c}wcwidth(c){return this._activeProvider.wcwidth(c)}getStringCellWidth(c){let p=0,g=c.length;for(let C=0;C<g;++C){let y=c.charCodeAt(C);if(55296<=y&&y<=56319){if(++C>=g)return p+this.wcwidth(y);let l=c.charCodeAt(C);56320<=l&&l<=57343?y=1024*(y-55296)+l-56320+65536:p+=this.wcwidth(l)}p+=this.wcwidth(y)}return p}}}},e={};function n(s){var i=e[s];if(i!==void 0)return i.exports;var o=e[s]={exports:{}};return t[s].call(o.exports,o,o.exports,n),o.exports}var r={};return(()=>{var s=r;Object.defineProperty(s,"__esModule",{value:!0}),s.Terminal=void 0;let i=n(9042),o=n(3236),a=n(844),u=n(5741),c=n(8285),p=n(7975),g=n(7090),C=["cols","rows"];class y extends a.Disposable{constructor(d){super(),this._core=this.register(new o.Terminal(d)),this._addonManager=this.register(new u.AddonManager),this._publicOptions=Object.assign({},this._core.options);let h=m=>this._core.options[m],f=(m,_)=>{this._checkReadonlyOptions(m),this._core.options[m]=_};for(let m in this._core.options){let _={get:h.bind(this,m),set:f.bind(this,m)};Object.defineProperty(this._publicOptions,m,_)}}_checkReadonlyOptions(d){if(C.includes(d))throw new Error(`Option "${d}" can only be set in the constructor`)}_checkProposedApi(){if(!this._core.optionsService.rawOptions.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")}get onBell(){return this._core.onBell}get onBinary(){return this._core.onBinary}get onCursorMove(){return this._core.onCursorMove}get onData(){return this._core.onData}get onKey(){return this._core.onKey}get onLineFeed(){return this._core.onLineFeed}get onRender(){return this._core.onRender}get onResize(){return this._core.onResize}get onScroll(){return this._core.onScroll}get onSelectionChange(){return this._core.onSelectionChange}get onTitleChange(){return this._core.onTitleChange}get onWriteParsed(){return this._core.onWriteParsed}get element(){return this._core.element}get parser(){return this._parser||(this._parser=new p.ParserApi(this._core)),this._parser}get unicode(){return this._checkProposedApi(),new g.UnicodeApi(this._core)}get textarea(){return this._core.textarea}get rows(){return this._core.rows}get cols(){return this._core.cols}get buffer(){return this._buffer||(this._buffer=this.register(new c.BufferNamespaceApi(this._core))),this._buffer}get markers(){return this._checkProposedApi(),this._core.markers}get modes(){let d=this._core.coreService.decPrivateModes,h="none";switch(this._core.coreMouseService.activeProtocol){case"X10":h="x10";break;case"VT200":h="vt200";break;case"DRAG":h="drag";break;case"ANY":h="any"}return{applicationCursorKeysMode:d.applicationCursorKeys,applicationKeypadMode:d.applicationKeypad,bracketedPasteMode:d.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:h,originMode:d.origin,reverseWraparoundMode:d.reverseWraparound,sendFocusMode:d.sendFocus,wraparoundMode:d.wraparound}}get options(){return this._publicOptions}set options(d){for(let h in d)this._publicOptions[h]=d[h]}blur(){this._core.blur()}focus(){this._core.focus()}resize(d,h){this._verifyIntegers(d,h),this._core.resize(d,h)}open(d){this._core.open(d)}attachCustomKeyEventHandler(d){this._core.attachCustomKeyEventHandler(d)}registerLinkProvider(d){return this._core.registerLinkProvider(d)}registerCharacterJoiner(d){return this._checkProposedApi(),this._core.registerCharacterJoiner(d)}deregisterCharacterJoiner(d){this._checkProposedApi(),this._core.deregisterCharacterJoiner(d)}registerMarker(d=0){return this._verifyIntegers(d),this._core.registerMarker(d)}registerDecoration(d){var h,f,m;return this._checkProposedApi(),this._verifyPositiveIntegers((h=d.x)!==null&&h!==void 0?h:0,(f=d.width)!==null&&f!==void 0?f:0,(m=d.height)!==null&&m!==void 0?m:0),this._core.registerDecoration(d)}hasSelection(){return this._core.hasSelection()}select(d,h,f){this._verifyIntegers(d,h,f),this._core.select(d,h,f)}getSelection(){return this._core.getSelection()}getSelectionPosition(){return this._core.getSelectionPosition()}clearSelection(){this._core.clearSelection()}selectAll(){this._core.selectAll()}selectLines(d,h){this._verifyIntegers(d,h),this._core.selectLines(d,h)}dispose(){super.dispose()}scrollLines(d){this._verifyIntegers(d),this._core.scrollLines(d)}scrollPages(d){this._verifyIntegers(d),this._core.scrollPages(d)}scrollToTop(){this._core.scrollToTop()}scrollToBottom(){this._core.scrollToBottom()}scrollToLine(d){this._verifyIntegers(d),this._core.scrollToLine(d)}clear(){this._core.clear()}write(d,h){this._core.write(d,h)}writeln(d,h){this._core.write(d),this._core.write(`\r
`,h)}paste(d){this._core.paste(d)}refresh(d,h){this._verifyIntegers(d,h),this._core.refresh(d,h)}reset(){this._core.reset()}clearTextureAtlas(){this._core.clearTextureAtlas()}loadAddon(d){this._addonManager.loadAddon(this,d)}static get strings(){return i}_verifyIntegers(...d){for(let h of d)if(h===1/0||isNaN(h)||h%1!=0)throw new Error("This API only accepts integers")}_verifyPositiveIntegers(...d){for(let h of d)if(h&&(h===1/0||isNaN(h)||h%1!=0||h<0))throw new Error("This API only accepts positive integers")}}s.Terminal=y})(),r})())});var sl=null;var Ws=1,ol=Symbol("SIGNAL");function le(t){let e=sl;return sl=t,e}var al={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function yp(t){if(!(Gs(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===Ws)){if(!t.producerMustRecompute(t)&&!zs(t)){t.dirty=!1,t.lastCleanEpoch=Ws;return}t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=Ws}}function cl(t){return t&&(t.nextProducerIndex=0),le(t)}function ll(t,e){if(le(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(Gs(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)qs(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function zs(t){li(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(yp(n),r!==n.version))return!0}return!1}function ul(t){if(li(t),Gs(t))for(let e=0;e<t.producerNode.length;e++)qs(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function qs(t,e){if(Cp(t),li(t),t.liveConsumerNode.length===1)for(let r=0;r<t.producerNode.length;r++)qs(t.producerNode[r],t.producerIndexOfThis[r]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let r=t.liveConsumerIndexOfThis[e],s=t.liveConsumerNode[e];li(s),s.producerIndexOfThis[r]=e}}function Gs(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function li(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function Cp(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function Sp(){throw new Error}var wp=Sp;function hl(t){wp=t}function Y(t){return typeof t=="function"}function on(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var ui=on(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,s)=>`${s+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function rr(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var Ce=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let i of n)i.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(Y(r))try{r()}catch(i){e=i instanceof ui?i.errors:[i]}let{_finalizers:s}=this;if(s){this._finalizers=null;for(let i of s)try{dl(i)}catch(o){e=e??[],o instanceof ui?e=[...e,...o.errors]:e.push(o)}}if(e)throw new ui(e)}}add(e){var n;if(e&&e!==this)if(this.closed)dl(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&rr(n,e)}remove(e){let{_finalizers:n}=this;n&&rr(n,e),e instanceof t&&e._removeParent(this)}};Ce.EMPTY=(()=>{let t=new Ce;return t.closed=!0,t})();var Ks=Ce.EMPTY;function hi(t){return t instanceof Ce||t&&"closed"in t&&Y(t.remove)&&Y(t.add)&&Y(t.unsubscribe)}function dl(t){Y(t)?t():t.unsubscribe()}var Ke={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var an={setTimeout(t,e,...n){let{delegate:r}=an;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=an;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function di(t){an.setTimeout(()=>{let{onUnhandledError:e}=Ke;if(e)e(t);else throw t})}function ir(){}var fl=Ys("C",void 0,void 0);function pl(t){return Ys("E",void 0,t)}function gl(t){return Ys("N",t,void 0)}function Ys(t,e,n){return{kind:t,value:e,error:n}}var Bt=null;function cn(t){if(Ke.useDeprecatedSynchronousErrorHandling){let e=!Bt;if(e&&(Bt={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=Bt;if(Bt=null,n)throw r}}else t()}function ml(t){Ke.useDeprecatedSynchronousErrorHandling&&Bt&&(Bt.errorThrown=!0,Bt.error=t)}var Ht=class extends Ce{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,hi(e)&&e.add(this)):this.destination=Ep}static create(e,n,r){return new ln(e,n,r)}next(e){this.isStopped?Qs(gl(e),this):this._next(e)}error(e){this.isStopped?Qs(pl(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Qs(fl,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},bp=Function.prototype.bind;function Zs(t,e){return bp.call(t,e)}var Xs=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){fi(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){fi(r)}else fi(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){fi(n)}}},ln=class extends Ht{constructor(e,n,r){super();let s;if(Y(e)||!e)s={next:e??void 0,error:n??void 0,complete:r??void 0};else{let i;this&&Ke.useDeprecatedNextContext?(i=Object.create(e),i.unsubscribe=()=>this.unsubscribe(),s={next:e.next&&Zs(e.next,i),error:e.error&&Zs(e.error,i),complete:e.complete&&Zs(e.complete,i)}):s=e}this.destination=new Xs(s)}};function fi(t){Ke.useDeprecatedSynchronousErrorHandling?ml(t):di(t)}function Dp(t){throw t}function Qs(t,e){let{onStoppedNotification:n}=Ke;n&&an.setTimeout(()=>n(t,e))}var Ep={closed:!0,next:ir,error:Dp,complete:ir};var un=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Le(t){return t}function Js(...t){return eo(t)}function eo(t){return t.length===0?Le:t.length===1?t[0]:function(n){return t.reduce((r,s)=>s(r),n)}}var fe=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,s){let i=xp(n)?n:new ln(n,r,s);return cn(()=>{let{operator:o,source:a}=this;i.add(o?o.call(i,a):a?this._subscribe(i):this._trySubscribe(i))}),i}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=vl(r),new r((s,i)=>{let o=new ln({next:a=>{try{n(a)}catch(u){i(u),o.unsubscribe()}},error:i,complete:s});this.subscribe(o)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[un](){return this}pipe(...n){return eo(n)(this)}toPromise(n){return n=vl(n),new n((r,s)=>{let i;this.subscribe(o=>i=o,o=>s(o),()=>r(i))})}}return t.create=e=>new t(e),t})();function vl(t){var e;return(e=t??Ke.Promise)!==null&&e!==void 0?e:Promise}function Ip(t){return t&&Y(t.next)&&Y(t.error)&&Y(t.complete)}function xp(t){return t&&t instanceof Ht||Ip(t)&&hi(t)}function to(t){return Y(t?.lift)}function ie(t){return e=>{if(to(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function se(t,e,n,r,s){return new no(t,e,n,r,s)}var no=class extends Ht{constructor(e,n,r,s,i,o){super(e),this.onFinalize=i,this.shouldUnsubscribe=o,this._next=n?function(a){try{n(a)}catch(u){e.error(u)}}:super._next,this._error=s?function(a){try{s(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function hn(){return ie((t,e)=>{let n=null;t._refCount++;let r=se(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let s=t._connection,i=n;n=null,s&&(!i||s===i)&&s.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var dn=class extends fe{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,to(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Ce;let n=this.getSubject();e.add(this.source.subscribe(se(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Ce.EMPTY)}return e}refCount(){return hn()(this)}};var _l=on(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Ae=(()=>{class t extends fe{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new pi(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new _l}next(n){cn(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){cn(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){cn(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:s,observers:i}=this;return r||s?Ks:(this.currentObservers=null,i.push(n),new Ce(()=>{this.currentObservers=null,rr(i,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:s,isStopped:i}=this;r?n.error(s):i&&n.complete()}asObservable(){let n=new fe;return n.source=this,n}}return t.create=(e,n)=>new pi(e,n),t})(),pi=class extends Ae{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:Ks}};var Ee=class extends Ae{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Ne=new fe(t=>t.complete());function yl(t){return t&&Y(t.schedule)}function Cl(t){return t[t.length-1]}function Sl(t){return Y(Cl(t))?t.pop():void 0}function It(t){return yl(Cl(t))?t.pop():void 0}function bl(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(p){try{c(r.next(p))}catch(g){o(g)}}function u(p){try{c(r.throw(p))}catch(g){o(g)}}function c(p){p.done?i(p.value):s(p.value).then(a,u)}c((r=r.apply(t,e||[])).next())})}function wl(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function jt(t){return this instanceof jt?(this.v=t,this):new jt(t)}function Dl(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),s,i=[];return s={},o("next"),o("throw"),o("return"),s[Symbol.asyncIterator]=function(){return this},s;function o(C){r[C]&&(s[C]=function(y){return new Promise(function(l,d){i.push([C,y,l,d])>1||a(C,y)})})}function a(C,y){try{u(r[C](y))}catch(l){g(i[0][3],l)}}function u(C){C.value instanceof jt?Promise.resolve(C.value.v).then(c,p):g(i[0][2],C)}function c(C){a("next",C)}function p(C){a("throw",C)}function g(C,y){C(y),i.shift(),i.length&&a(i[0][0],i[0][1])}}function El(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof wl=="function"?wl(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(i){n[i]=t[i]&&function(o){return new Promise(function(a,u){o=t[i](o),s(a,u,o.done,o.value)})}}function s(i,o,a,u){Promise.resolve(u).then(function(c){i({value:c,done:a})},o)}}var gi=t=>t&&typeof t.length=="number"&&typeof t!="function";function mi(t){return Y(t?.then)}function vi(t){return Y(t[un])}function _i(t){return Symbol.asyncIterator&&Y(t?.[Symbol.asyncIterator])}function yi(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function Mp(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Ci=Mp();function Si(t){return Y(t?.[Ci])}function wi(t){return Dl(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:s}=yield jt(n.read());if(s)return yield jt(void 0);yield yield jt(r)}}finally{n.releaseLock()}})}function bi(t){return Y(t?.getReader)}function be(t){if(t instanceof fe)return t;if(t!=null){if(vi(t))return Tp(t);if(gi(t))return Ap(t);if(mi(t))return Rp(t);if(_i(t))return Il(t);if(Si(t))return kp(t);if(bi(t))return Op(t)}throw yi(t)}function Tp(t){return new fe(e=>{let n=t[un]();if(Y(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function Ap(t){return new fe(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function Rp(t){return new fe(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,di)})}function kp(t){return new fe(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function Il(t){return new fe(e=>{Lp(t,e).catch(n=>e.error(n))})}function Op(t){return Il(wi(t))}function Lp(t,e){var n,r,s,i;return bl(this,void 0,void 0,function*(){try{for(n=El(t);r=yield n.next(),!r.done;){let o=r.value;if(e.next(o),e.closed)return}}catch(o){s={error:o}}finally{try{r&&!r.done&&(i=n.return)&&(yield i.call(n))}finally{if(s)throw s.error}}e.complete()})}function Oe(t,e,n,r=0,s=!1){let i=e.schedule(function(){n(),s?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(i),!s)return i}function Di(t,e=0){return ie((n,r)=>{n.subscribe(se(r,s=>Oe(r,t,()=>r.next(s),e),()=>Oe(r,t,()=>r.complete(),e),s=>Oe(r,t,()=>r.error(s),e)))})}function Ei(t,e=0){return ie((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function xl(t,e){return be(t).pipe(Ei(e),Di(e))}function Ml(t,e){return be(t).pipe(Ei(e),Di(e))}function Tl(t,e){return new fe(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function Al(t,e){return new fe(n=>{let r;return Oe(n,e,()=>{r=t[Ci](),Oe(n,e,()=>{let s,i;try{({value:s,done:i}=r.next())}catch(o){n.error(o);return}i?n.complete():n.next(s)},0,!0)}),()=>Y(r?.return)&&r.return()})}function Ii(t,e){if(!t)throw new Error("Iterable cannot be null");return new fe(n=>{Oe(n,e,()=>{let r=t[Symbol.asyncIterator]();Oe(n,e,()=>{r.next().then(s=>{s.done?n.complete():n.next(s.value)})},0,!0)})})}function Rl(t,e){return Ii(wi(t),e)}function kl(t,e){if(t!=null){if(vi(t))return xl(t,e);if(gi(t))return Tl(t,e);if(mi(t))return Ml(t,e);if(_i(t))return Ii(t,e);if(Si(t))return Al(t,e);if(bi(t))return Rl(t,e)}throw yi(t)}function Se(t,e){return e?kl(t,e):be(t)}function Z(...t){let e=It(t);return Se(t,e)}function fn(t,e){let n=Y(t)?t:()=>t,r=s=>s.error(n());return new fe(e?s=>e.schedule(r,0,s):r)}function ro(t){return!!t&&(t instanceof fe||Y(t.lift)&&Y(t.subscribe))}var pt=on(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function oe(t,e){return ie((n,r)=>{let s=0;n.subscribe(se(r,i=>{r.next(t.call(e,i,s++))}))})}var{isArray:Np}=Array;function Pp(t,e){return Np(e)?t(...e):t(e)}function Ol(t){return oe(e=>Pp(t,e))}var{isArray:Fp}=Array,{getPrototypeOf:Bp,prototype:Hp,keys:jp}=Object;function Ll(t){if(t.length===1){let e=t[0];if(Fp(e))return{args:e,keys:null};if(Up(e)){let n=jp(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function Up(t){return t&&typeof t=="object"&&Bp(t)===Hp}function Nl(t,e){return t.reduce((n,r,s)=>(n[r]=e[s],n),{})}function xi(...t){let e=It(t),n=Sl(t),{args:r,keys:s}=Ll(t);if(r.length===0)return Se([],e);let i=new fe($p(r,e,s?o=>Nl(s,o):Le));return n?i.pipe(Ol(n)):i}function $p(t,e,n=Le){return r=>{Pl(e,()=>{let{length:s}=t,i=new Array(s),o=s,a=s;for(let u=0;u<s;u++)Pl(e,()=>{let c=Se(t[u],e),p=!1;c.subscribe(se(r,g=>{i[u]=g,p||(p=!0,a--),a||r.next(n(i.slice()))},()=>{--o||r.complete()}))},r)},r)}}function Pl(t,e,n){t?Oe(n,t,e):e()}function Fl(t,e,n,r,s,i,o,a){let u=[],c=0,p=0,g=!1,C=()=>{g&&!u.length&&!c&&e.complete()},y=d=>c<r?l(d):u.push(d),l=d=>{i&&e.next(d),c++;let h=!1;be(n(d,p++)).subscribe(se(e,f=>{s?.(f),i?y(f):e.next(f)},()=>{h=!0},void 0,()=>{if(h)try{for(c--;u.length&&c<r;){let f=u.shift();o?Oe(e,o,()=>l(f)):l(f)}C()}catch(f){e.error(f)}}))};return t.subscribe(se(e,y,()=>{g=!0,C()})),()=>{a?.()}}function we(t,e,n=1/0){return Y(e)?we((r,s)=>oe((i,o)=>e(r,i,s,o))(be(t(r,s))),n):(typeof e=="number"&&(n=e),ie((r,s)=>Fl(r,s,t,n)))}function io(t=1/0){return we(Le,t)}function Bl(){return io(1)}function pn(...t){return Bl()(Se(t,It(t)))}function Mi(t){return new fe(e=>{be(t()).subscribe(e)})}function Ye(t,e){return ie((n,r)=>{let s=0;n.subscribe(se(r,i=>t.call(e,i,s++)&&r.next(i)))})}function xt(t){return ie((e,n)=>{let r=null,s=!1,i;r=e.subscribe(se(n,void 0,void 0,o=>{i=be(t(o,xt(t)(e))),r?(r.unsubscribe(),r=null,i.subscribe(n)):s=!0})),s&&(r.unsubscribe(),r=null,i.subscribe(n))})}function Hl(t,e,n,r,s){return(i,o)=>{let a=n,u=e,c=0;i.subscribe(se(o,p=>{let g=c++;u=a?t(u,p,g):(a=!0,p),r&&o.next(u)},s&&(()=>{a&&o.next(u),o.complete()})))}}function gn(t,e){return Y(e)?we(t,e,1):we(t,1)}function Mt(t){return ie((e,n)=>{let r=!1;e.subscribe(se(n,s=>{r=!0,n.next(s)},()=>{r||n.next(t),n.complete()}))})}function gt(t){return t<=0?()=>Ne:ie((e,n)=>{let r=0;e.subscribe(se(n,s=>{++r<=t&&(n.next(s),t<=r&&n.complete())}))})}function so(t){return oe(()=>t)}function Ti(t=Vp){return ie((e,n)=>{let r=!1;e.subscribe(se(n,s=>{r=!0,n.next(s)},()=>r?n.complete():n.error(t())))})}function Vp(){return new pt}function sr(t){return ie((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function rt(t,e){let n=arguments.length>=2;return r=>r.pipe(t?Ye((s,i)=>t(s,i,r)):Le,gt(1),n?Mt(e):Ti(()=>new pt))}function mn(t){return t<=0?()=>Ne:ie((e,n)=>{let r=[];e.subscribe(se(n,s=>{r.push(s),t<r.length&&r.shift()},()=>{for(let s of r)n.next(s);n.complete()},void 0,()=>{r=null}))})}function oo(t,e){let n=arguments.length>=2;return r=>r.pipe(t?Ye((s,i)=>t(s,i,r)):Le,mn(1),n?Mt(e):Ti(()=>new pt))}function ao(t,e){return ie(Hl(t,e,arguments.length>=2,!0))}function co(...t){let e=It(t);return ie((n,r)=>{(e?pn(t,n,e):pn(t,n)).subscribe(r)})}function Ze(t,e){return ie((n,r)=>{let s=null,i=0,o=!1,a=()=>o&&!s&&r.complete();n.subscribe(se(r,u=>{s?.unsubscribe();let c=0,p=i++;be(t(u,p)).subscribe(s=se(r,g=>r.next(e?e(u,g,p,c++):g),()=>{s=null,a()}))},()=>{o=!0,a()}))})}function lo(t){return ie((e,n)=>{be(t).subscribe(se(n,()=>n.complete(),ir)),!n.closed&&e.subscribe(n)})}function Ie(t,e,n){let r=Y(t)||e||n?{next:t,error:e,complete:n}:t;return r?ie((s,i)=>{var o;(o=r.subscribe)===null||o===void 0||o.call(r);let a=!0;s.subscribe(se(i,u=>{var c;(c=r.next)===null||c===void 0||c.call(r,u),i.next(u)},()=>{var u;a=!1,(u=r.complete)===null||u===void 0||u.call(r),i.complete()},u=>{var c;a=!1,(c=r.error)===null||c===void 0||c.call(r,u),i.error(u)},()=>{var u,c;a&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(c=r.finalize)===null||c===void 0||c.call(r)}))}):Le}var K=class extends Error{constructor(e,n){super(sa(e,n)),this.code=e}};function sa(t,e){return`${`NG0${Math.abs(t)}`}${e?": "+e:""}`}function oa(t){return{toString:t}.toString()}var or=globalThis;function pe(t){for(let e in t)if(t[e]===pe)return e;throw Error("Could not find renamed property on target object.")}function Pe(t){if(typeof t=="string")return t;if(Array.isArray(t))return"["+t.map(Pe).join(", ")+"]";if(t==null)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;let e=t.toString();if(e==null)return""+e;let n=e.indexOf(`
`);return n===-1?e:e.substring(0,n)}function jl(t,e){return t==null||t===""?e===null?"":e:e==null||e===""?t:t+" "+e}var zp=pe({__forward_ref__:pe});function Cu(t){return t.__forward_ref__=Cu,t.toString=function(){return Pe(this())},t}function Ve(t){return Su(t)?t():t}function Su(t){return typeof t=="function"&&t.hasOwnProperty(zp)&&t.__forward_ref__===Cu}function X(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Zi(t){return Ul(t,bu)||Ul(t,Du)}function wu(t){return Zi(t)!==null}function Ul(t,e){return t.hasOwnProperty(e)?t[e]:null}function qp(t){let e=t&&(t[bu]||t[Du]);return e||null}function $l(t){return t&&(t.hasOwnProperty(Vl)||t.hasOwnProperty(Gp))?t[Vl]:null}var bu=pe({\u0275prov:pe}),Vl=pe({\u0275inj:pe}),Du=pe({ngInjectableDef:pe}),Gp=pe({ngInjectorDef:pe}),ae=class{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=X({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function Eu(t){return t&&!!t.\u0275providers}var Kp=pe({\u0275cmp:pe}),Yp=pe({\u0275dir:pe}),Zp=pe({\u0275pipe:pe}),Qp=pe({\u0275mod:pe}),Pi=pe({\u0275fac:pe}),ar=pe({__NG_ELEMENT_ID__:pe}),Wl=pe({__NG_ENV_ID__:pe});function Xp(t){return typeof t=="string"?t:t==null?"":String(t)}function Jp(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():Xp(t)}function eg(t,e){let n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new K(-200,t)}function aa(t,e){throw new K(-201,!1)}var ee=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(ee||{}),So;function Iu(){return So}function $e(t){let e=So;return So=t,e}function xu(t,e,n){let r=Zi(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&ee.Optional)return null;if(e!==void 0)return e;aa(t,"Injector")}var tg={},cr=tg,ng="__NG_DI_FLAG__",Fi="ngTempTokenPath",rg="ngTokenPath",ig=/\n/gm,sg="\u0275",zl="__source",Cn;function og(){return Cn}function Tt(t){let e=Cn;return Cn=t,e}function ag(t,e=ee.Default){if(Cn===void 0)throw new K(-203,!1);return Cn===null?xu(t,void 0,e):Cn.get(t,e&ee.Optional?null:void 0,e)}function ce(t,e=ee.Default){return(Iu()||ag)(Ve(t),e)}function V(t,e=ee.Default){return ce(t,Qi(e))}function Qi(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function wo(t){let e=[];for(let n=0;n<t.length;n++){let r=Ve(t[n]);if(Array.isArray(r)){if(r.length===0)throw new K(900,!1);let s,i=ee.Default;for(let o=0;o<r.length;o++){let a=r[o],u=cg(a);typeof u=="number"?u===-1?s=a.token:i|=u:s=a}e.push(ce(s,i))}else e.push(ce(r))}return e}function cg(t){return t[ng]}function lg(t,e,n,r){let s=t[Fi];throw e[zl]&&s.unshift(e[zl]),t.message=ug(`
`+t.message,s,n,r),t[rg]=s,t[Fi]=null,t}function ug(t,e,n,r=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==sg?t.slice(2):t;let s=Pe(e);if(Array.isArray(e))s=e.map(Pe).join(" -> ");else if(typeof e=="object"){let i=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];i.push(o+":"+(typeof a=="string"?JSON.stringify(a):Pe(a)))}s=`{${i.join(", ")}}`}return`${n}${r?"("+r+")":""}[${s}]: ${t.replace(ig,`
  `)}`}function bn(t,e){let n=t.hasOwnProperty(Pi);return n?t[Pi]:null}function hg(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){let s=t[r],i=e[r];if(n&&(s=n(s),i=n(i)),i!==s)return!1}return!0}function dg(t){return t.flat(Number.POSITIVE_INFINITY)}function ca(t,e){t.forEach(n=>Array.isArray(n)?ca(n,e):e(n))}function Mu(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Bi(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}var lr={},Dn=[],En=new ae(""),Tu=new ae("",-1),Au=new ae(""),Hi=class{get(e,n=cr){if(n===cr){let r=new Error(`NullInjectorError: No provider for ${Pe(e)}!`);throw r.name="NullInjectorError",r}return n}},Ru=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(Ru||{}),ot=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(ot||{}),Rt=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(Rt||{});function fg(t,e,n){let r=t.length;for(;;){let s=t.indexOf(e,n);if(s===-1)return s;if(s===0||t.charCodeAt(s-1)<=32){let i=e.length;if(s+i===r||t.charCodeAt(s+i)<=32)return s}n=s+1}}function bo(t,e,n){let r=0;for(;r<n.length;){let s=n[r];if(typeof s=="number"){if(s!==0)break;r++;let i=n[r++],o=n[r++],a=n[r++];t.setAttribute(e,o,a,i)}else{let i=s,o=n[++r];gg(i)?t.setProperty(e,i,o):t.setAttribute(e,i,o),r++}}return r}function pg(t){return t===3||t===4||t===6}function gg(t){return t.charCodeAt(0)===64}function la(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let s=e[r];typeof s=="number"?n=s:n===0||(n===-1||n===2?ql(t,n,s,null,e[++r]):ql(t,n,s,null,null))}}return t}function ql(t,e,n,r,s){let i=0,o=t.length;if(e===-1)o=-1;else for(;i<t.length;){let a=t[i++];if(typeof a=="number"){if(a===e){o=-1;break}else if(a>e){o=i-1;break}}}for(;i<t.length;){let a=t[i];if(typeof a=="number")break;if(a===n){if(r===null){s!==null&&(t[i+1]=s);return}else if(r===t[i+1]){t[i+2]=s;return}}i++,r!==null&&i++,s!==null&&i++}o!==-1&&(t.splice(o,0,e),i=o+1),t.splice(i++,0,n),r!==null&&t.splice(i++,0,r),s!==null&&t.splice(i++,0,s)}var ku="ng-template";function mg(t,e,n,r){let s=0;if(r){for(;s<e.length&&typeof e[s]=="string";s+=2)if(e[s]==="class"&&fg(e[s+1].toLowerCase(),n,0)!==-1)return!0}else if(ua(t))return!1;if(s=e.indexOf(1,s),s>-1){let i;for(;++s<e.length&&typeof(i=e[s])=="string";)if(i.toLowerCase()===n)return!0}return!1}function ua(t){return t.type===4&&t.value!==ku}function vg(t,e,n){let r=t.type===4&&!n?ku:t.value;return e===r}function _g(t,e,n){let r=4,s=t.attrs,i=s!==null?Sg(s):0,o=!1;for(let a=0;a<e.length;a++){let u=e[a];if(typeof u=="number"){if(!o&&!Qe(r)&&!Qe(u))return!1;if(o&&Qe(u))continue;o=!1,r=u|r&1;continue}if(!o)if(r&4){if(r=2|r&1,u!==""&&!vg(t,u,n)||u===""&&e.length===1){if(Qe(r))return!1;o=!0}}else if(r&8){if(s===null||!mg(t,s,u,n)){if(Qe(r))return!1;o=!0}}else{let c=e[++a],p=yg(u,s,ua(t),n);if(p===-1){if(Qe(r))return!1;o=!0;continue}if(c!==""){let g;if(p>i?g="":g=s[p+1].toLowerCase(),r&2&&c!==g){if(Qe(r))return!1;o=!0}}}}return Qe(r)||o}function Qe(t){return(t&1)===0}function yg(t,e,n,r){if(e===null)return-1;let s=0;if(r||!n){let i=!1;for(;s<e.length;){let o=e[s];if(o===t)return s;if(o===3||o===6)i=!0;else if(o===1||o===2){let a=e[++s];for(;typeof a=="string";)a=e[++s];continue}else{if(o===4)break;if(o===0){s+=4;continue}}s+=i?1:2}return-1}else return wg(e,t)}function Cg(t,e,n=!1){for(let r=0;r<e.length;r++)if(_g(t,e[r],n))return!0;return!1}function Sg(t){for(let e=0;e<t.length;e++){let n=t[e];if(pg(n))return e}return t.length}function wg(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function Gl(t,e){return t?":not("+e.trim()+")":e}function bg(t){let e=t[0],n=1,r=2,s="",i=!1;for(;n<t.length;){let o=t[n];if(typeof o=="string")if(r&2){let a=t[++n];s+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else r&8?s+="."+o:r&4&&(s+=" "+o);else s!==""&&!Qe(o)&&(e+=Gl(i,s),s=""),r=o,i=i||!Qe(r);n++}return s!==""&&(e+=Gl(i,s)),e}function Dg(t){return t.map(bg).join(",")}function Eg(t){let e=[],n=[],r=1,s=2;for(;r<t.length;){let i=t[r];if(typeof i=="string")s===2?i!==""&&e.push(i,t[++r]):s===8&&n.push(i);else{if(!Qe(s))break;s=i}r++}return{attrs:e,classes:n}}function An(t){return oa(()=>{let e=Fu(t),n=_e(z({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===Ru.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||ot.Emulated,styles:t.styles||Dn,_:null,schemas:t.schemas||null,tView:null,id:""});Bu(n);let r=t.dependencies;return n.directiveDefs=Yl(r,!1),n.pipeDefs=Yl(r,!0),n.id=Mg(n),n})}function Ig(t){return $t(t)||Ou(t)}function xg(t){return t!==null}function Kl(t,e){if(t==null)return lr;let n={};for(let r in t)if(t.hasOwnProperty(r)){let s=t[r],i,o,a=Rt.None;Array.isArray(s)?(a=s[0],i=s[1],o=s[2]??i):(i=s,o=s),e?(n[i]=a!==Rt.None?[r,a]:r,e[i]=o):n[i]=r}return n}function ha(t){return oa(()=>{let e=Fu(t);return Bu(e),e})}function $t(t){return t[Kp]||null}function Ou(t){return t[Yp]||null}function Lu(t){return t[Zp]||null}function Nu(t){let e=$t(t)||Ou(t)||Lu(t);return e!==null?e.standalone:!1}function Pu(t,e){let n=t[Qp]||null;if(!n&&e===!0)throw new Error(`Type ${Pe(t)} does not have '\u0275mod' property.`);return n}function Fu(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||lr,exportAs:t.exportAs||null,standalone:t.standalone===!0,signals:t.signals===!0,selectors:t.selectors||Dn,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Kl(t.inputs,e),outputs:Kl(t.outputs),debugInfo:null}}function Bu(t){t.features?.forEach(e=>e(t))}function Yl(t,e){if(!t)return null;let n=e?Lu:Ig;return()=>(typeof t=="function"?t():t).map(r=>n(r)).filter(xg)}function Mg(t){let e=0,n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(let s of n)e=Math.imul(31,e)+s.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function Xi(t){return{\u0275providers:t}}function Tg(...t){return{\u0275providers:Hu(!0,t),\u0275fromNgModule:!0}}function Hu(t,...e){let n=[],r=new Set,s,i=o=>{n.push(o)};return ca(e,o=>{let a=o;Do(a,i,[],r)&&(s||=[],s.push(a))}),s!==void 0&&ju(s,i),n}function ju(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:s}=t[n];da(s,i=>{e(i,r)})}}function Do(t,e,n,r){if(t=Ve(t),!t)return!1;let s=null,i=$l(t),o=!i&&$t(t);if(!i&&!o){let u=t.ngModule;if(i=$l(u),i)s=u;else return!1}else{if(o&&!o.standalone)return!1;s=t}let a=r.has(s);if(o){if(a)return!1;if(r.add(s),o.dependencies){let u=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let c of u)Do(c,e,n,r)}}else if(i){if(i.imports!=null&&!a){r.add(s);let c;try{ca(i.imports,p=>{Do(p,e,n,r)&&(c||=[],c.push(p))})}finally{}c!==void 0&&ju(c,e)}if(!a){let c=bn(s)||(()=>new s);e({provide:s,useFactory:c,deps:Dn},s),e({provide:Au,useValue:s,multi:!0},s),e({provide:En,useValue:()=>ce(s),multi:!0},s)}let u=i.providers;if(u!=null&&!a){let c=t;da(u,p=>{e(p,c)})}}else return!1;return s!==t&&t.providers!==void 0}function da(t,e){for(let n of t)Eu(n)&&(n=n.\u0275providers),Array.isArray(n)?da(n,e):e(n)}var Ag=pe({provide:String,useValue:pe});function Uu(t){return t!==null&&typeof t=="object"&&Ag in t}function Rg(t){return!!(t&&t.useExisting)}function kg(t){return!!(t&&t.useFactory)}function Eo(t){return typeof t=="function"}var Ji=new ae(""),Ai={},Og={},uo;function fa(){return uo===void 0&&(uo=new Hi),uo}var ze=class{},ur=class extends ze{get destroyed(){return this._destroyed}constructor(e,n,r,s){super(),this.parent=n,this.source=r,this.scopes=s,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,xo(e,o=>this.processProvider(o)),this.records.set(Tu,vn(void 0,this)),s.has("environment")&&this.records.set(ze,vn(void 0,this));let i=this.records.get(Ji);i!=null&&typeof i.value=="string"&&this.scopes.add(i.value),this.injectorDefTypes=new Set(this.get(Au,Dn,ee.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=le(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),le(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let n=Tt(this),r=$e(void 0),s;try{return e()}finally{Tt(n),$e(r)}}get(e,n=cr,r=ee.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(Wl))return e[Wl](this);r=Qi(r);let s,i=Tt(this),o=$e(void 0);try{if(!(r&ee.SkipSelf)){let u=this.records.get(e);if(u===void 0){let c=Hg(e)&&Zi(e);c&&this.injectableDefInScope(c)?u=vn(Io(e),Ai):u=null,this.records.set(e,u)}if(u!=null)return this.hydrate(e,u)}let a=r&ee.Self?fa():this.parent;return n=r&ee.Optional&&n===cr?null:n,a.get(e,n)}catch(a){if(a.name==="NullInjectorError"){if((a[Fi]=a[Fi]||[]).unshift(Pe(e)),i)throw a;return lg(a,e,"R3InjectorError",this.source)}else throw a}finally{$e(o),Tt(i)}}resolveInjectorInitializers(){let e=le(null),n=Tt(this),r=$e(void 0),s;try{let i=this.get(En,Dn,ee.Self);for(let o of i)o()}finally{Tt(n),$e(r),le(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(Pe(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new K(205,!1)}processProvider(e){e=Ve(e);let n=Eo(e)?e:Ve(e&&e.provide),r=Ng(e);if(!Eo(e)&&e.multi===!0){let s=this.records.get(n);s||(s=vn(void 0,Ai,!0),s.factory=()=>wo(s.multi),this.records.set(n,s)),n=e,s.multi.push(e)}this.records.set(n,r)}hydrate(e,n){let r=le(null);try{return n.value===Ai&&(n.value=Og,n.value=n.factory()),typeof n.value=="object"&&n.value&&Bg(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{le(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=Ve(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function Io(t){let e=Zi(t),n=e!==null?e.factory:bn(t);if(n!==null)return n;if(t instanceof ae)throw new K(204,!1);if(t instanceof Function)return Lg(t);throw new K(204,!1)}function Lg(t){if(t.length>0)throw new K(204,!1);let n=qp(t);return n!==null?()=>n.factory(t):()=>new t}function Ng(t){if(Uu(t))return vn(void 0,t.useValue);{let e=Pg(t);return vn(e,Ai)}}function Pg(t,e,n){let r;if(Eo(t)){let s=Ve(t);return bn(s)||Io(s)}else if(Uu(t))r=()=>Ve(t.useValue);else if(kg(t))r=()=>t.useFactory(...wo(t.deps||[]));else if(Rg(t))r=()=>ce(Ve(t.useExisting));else{let s=Ve(t&&(t.useClass||t.provide));if(Fg(t))r=()=>new s(...wo(t.deps));else return bn(s)||Io(s)}return r}function vn(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function Fg(t){return!!t.deps}function Bg(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function Hg(t){return typeof t=="function"||typeof t=="object"&&t instanceof ae}function xo(t,e){for(let n of t)Array.isArray(n)?xo(n,e):n&&Eu(n)?xo(n.\u0275providers,e):e(n)}function Kt(t,e){t instanceof ur&&t.assertNotDestroyed();let n,r=Tt(t),s=$e(void 0);try{return e()}finally{Tt(r),$e(s)}}function jg(){return Iu()!==void 0||og()!=null}function Ug(t){return typeof t=="function"}var yt=0,te=1,G=2,xe=3,Xe=4,et=5,ji=6,hr=7,at=8,In=9,ct=10,Je=11,dr=12,Zl=13,Cr=14,lt=15,Sr=16,_n=17,mt=18,es=19,$u=20,At=21,ho=22,Vt=23,Wt=25,Vu=1;var zt=7,Ui=8,xn=9,Fe=10,pa=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(pa||{});function Sn(t){return Array.isArray(t)&&typeof t[Vu]=="object"}function Ct(t){return Array.isArray(t)&&t[Vu]===!0}function Wu(t){return(t.flags&4)!==0}function ga(t){return t.componentOffset>-1}function zu(t){return(t.flags&1)===1}function wr(t){return!!t.template}function $g(t){return(t[G]&512)!==0}var Mo=class{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function qu(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}function ts(){return Gu}function Gu(t){return t.type.prototype.ngOnChanges&&(t.setInput=Wg),Vg}ts.ngInherit=!0;function Vg(){let t=Yu(this),e=t?.current;if(e){let n=t.previous;if(n===lr)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function Wg(t,e,n,r,s){let i=this.declaredInputs[r],o=Yu(t)||zg(t,{previous:lr,current:null}),a=o.current||(o.current={}),u=o.previous,c=u[i];a[i]=new Mo(c&&c.currentValue,n,u===lr),qu(t,e,s,n)}var Ku="__ngSimpleChanges__";function Yu(t){return t[Ku]||null}function zg(t,e){return t[Ku]=e}var Ql=null;var it=function(t,e,n){Ql?.(t,e,n)},qg="svg",Gg="math",Kg=!1;function Yg(){return Kg}function vt(t){for(;Array.isArray(t);)t=t[yt];return t}function ut(t,e){return vt(e[t.index])}function Zg(t,e){return t.data[e]}function Rn(t,e){let n=e[t];return Sn(n)?n:n[yt]}function Qg(t){return(t[G]&4)===4}function ma(t){return(t[G]&128)===128}function Xg(t){return Ct(t[xe])}function Xl(t,e){return e==null?null:t[e]}function Zu(t){t[_n]=0}function Jg(t){t[G]&1024||(t[G]|=1024,ma(t)&&fr(t))}function va(t){return!!(t[G]&9216||t[Vt]?.dirty)}function To(t){t[ct].changeDetectionScheduler?.notify(1),va(t)?fr(t):t[G]&64&&(Yg()?(t[G]|=1024,fr(t)):t[ct].changeDetectionScheduler?.notify())}function fr(t){t[ct].changeDetectionScheduler?.notify();let e=pr(t);for(;e!==null&&!(e[G]&8192||(e[G]|=8192,!ma(e)));)e=pr(e)}function Qu(t,e){if((t[G]&256)===256)throw new K(911,!1);t[At]===null&&(t[At]=[]),t[At].push(e)}function em(t,e){if(t[At]===null)return;let n=t[At].indexOf(e);n!==-1&&t[At].splice(n,1)}function pr(t){let e=t[xe];return Ct(e)?e[xe]:e}var ue={lFrame:ih(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function tm(){return ue.lFrame.elementDepthCount}function nm(){ue.lFrame.elementDepthCount++}function rm(){ue.lFrame.elementDepthCount--}function Xu(){return ue.bindingsEnabled}function im(){return ue.skipHydrationRootTNode!==null}function sm(t){return ue.skipHydrationRootTNode===t}function om(){ue.skipHydrationRootTNode=null}function Me(){return ue.lFrame.lView}function kn(){return ue.lFrame.tView}function _a(t){return ue.lFrame.contextLView=t,t[at]}function ya(t){return ue.lFrame.contextLView=null,t}function ht(){let t=Ju();for(;t!==null&&t.type===64;)t=t.parent;return t}function Ju(){return ue.lFrame.currentTNode}function am(){let t=ue.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function ns(t,e){let n=ue.lFrame;n.currentTNode=t,n.isParent=e}function eh(){return ue.lFrame.isParent}function cm(){ue.lFrame.isParent=!1}function lm(t){return ue.lFrame.bindingIndex=t}function um(){return ue.lFrame.inI18n}function hm(t,e){let n=ue.lFrame;n.bindingIndex=n.bindingRootIndex=t,Ao(e)}function dm(){return ue.lFrame.currentDirectiveIndex}function Ao(t){ue.lFrame.currentDirectiveIndex=t}function th(){return ue.lFrame.currentQueryIndex}function Ca(t){ue.lFrame.currentQueryIndex=t}function fm(t){let e=t[te];return e.type===2?e.declTNode:e.type===1?t[et]:null}function nh(t,e,n){if(n&ee.SkipSelf){let s=e,i=t;for(;s=s.parent,s===null&&!(n&ee.Host);)if(s=fm(i),s===null||(i=i[Cr],s.type&10))break;if(s===null)return!1;e=s,t=i}let r=ue.lFrame=rh();return r.currentTNode=e,r.lView=t,!0}function Sa(t){let e=rh(),n=t[te];ue.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function rh(){let t=ue.lFrame,e=t===null?null:t.child;return e===null?ih(t):e}function ih(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function sh(){let t=ue.lFrame;return ue.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var oh=sh;function wa(){let t=sh();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function pm(){return ue.lFrame.selectedIndex}function qt(t){ue.lFrame.selectedIndex=t}function gm(){return ue.lFrame.currentNamespace}var ah=!0;function ch(){return ah}function lh(t){ah=t}function mm(t,e,n){let{ngOnChanges:r,ngOnInit:s,ngDoCheck:i}=e.type.prototype;if(r){let o=Gu(e);(n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o)}s&&(n.preOrderHooks??=[]).push(0-t,s),i&&((n.preOrderHooks??=[]).push(t,i),(n.preOrderCheckHooks??=[]).push(t,i))}function uh(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let i=t.data[n].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:c,ngOnDestroy:p}=i;o&&(t.contentHooks??=[]).push(-n,o),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),u&&(t.viewHooks??=[]).push(-n,u),c&&((t.viewHooks??=[]).push(n,c),(t.viewCheckHooks??=[]).push(n,c)),p!=null&&(t.destroyHooks??=[]).push(n,p)}}function Ri(t,e,n){hh(t,e,3,n)}function ki(t,e,n,r){(t[G]&3)===n&&hh(t,e,n,r)}function fo(t,e){let n=t[G];(n&3)===e&&(n&=16383,n+=1,t[G]=n)}function hh(t,e,n,r){let s=r!==void 0?t[_n]&65535:0,i=r??-1,o=e.length-1,a=0;for(let u=s;u<o;u++)if(typeof e[u+1]=="number"){if(a=e[u],r!=null&&a>=r)break}else e[u]<0&&(t[_n]+=65536),(a<i||i==-1)&&(vm(t,n,e,u),t[_n]=(t[_n]&4294901760)+u+2),u++}function Jl(t,e){it(4,t,e);let n=le(null);try{e.call(t)}finally{le(n),it(5,t,e)}}function vm(t,e,n,r){let s=n[r]<0,i=n[r+1],o=s?-n[r]:n[r],a=t[o];s?t[G]>>14<t[_n]>>16&&(t[G]&3)===e&&(t[G]+=16384,Jl(a,i)):Jl(a,i)}var wn=-1,gr=class{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}};function _m(t){return t instanceof gr}function ym(t){return(t.flags&8)!==0}function Cm(t){return(t.flags&16)!==0}function dh(t){return t!==wn}function $i(t){return t&32767}function Sm(t){return t>>16}function Vi(t,e){let n=Sm(t),r=e;for(;n>0;)r=r[Cr],n--;return r}var Ro=!0;function eu(t){let e=Ro;return Ro=t,e}var wm=256,fh=wm-1,ph=5,bm=0,st={};function Dm(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(ar)&&(r=n[ar]),r==null&&(r=n[ar]=bm++);let s=r&fh,i=1<<s;e.data[t+(s>>ph)]|=i}function gh(t,e){let n=mh(t,e);if(n!==-1)return n;let r=e[te];r.firstCreatePass&&(t.injectorIndex=e.length,po(r.data,t),po(e,null),po(r.blueprint,null));let s=ba(t,e),i=t.injectorIndex;if(dh(s)){let o=$i(s),a=Vi(s,e),u=a[te].data;for(let c=0;c<8;c++)e[i+c]=a[o+c]|u[o+c]}return e[i+8]=s,i}function po(t,e){t.push(0,0,0,0,0,0,0,0,e)}function mh(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function ba(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,s=e;for(;s!==null;){if(r=Sh(s),r===null)return wn;if(n++,s=s[Cr],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return wn}function Em(t,e,n){Dm(t,e,n)}function vh(t,e,n){if(n&ee.Optional||t!==void 0)return t;aa(e,"NodeInjector")}function _h(t,e,n,r){if(n&ee.Optional&&r===void 0&&(r=null),!(n&(ee.Self|ee.Host))){let s=t[In],i=$e(void 0);try{return s?s.get(e,r,n&ee.Optional):xu(e,r,n&ee.Optional)}finally{$e(i)}}return vh(r,e,n)}function yh(t,e,n,r=ee.Default,s){if(t!==null){if(e[G]&2048&&!(r&ee.Self)){let o=Tm(t,e,n,r,st);if(o!==st)return o}let i=Ch(t,e,n,r,st);if(i!==st)return i}return _h(e,n,r,s)}function Ch(t,e,n,r,s){let i=xm(n);if(typeof i=="function"){if(!nh(e,t,r))return r&ee.Host?vh(s,n,r):_h(e,n,r,s);try{let o;if(o=i(r),o==null&&!(r&ee.Optional))aa(n);else return o}finally{oh()}}else if(typeof i=="number"){let o=null,a=mh(t,e),u=wn,c=r&ee.Host?e[lt][et]:null;for((a===-1||r&ee.SkipSelf)&&(u=a===-1?ba(t,e):e[a+8],u===wn||!nu(r,!1)?a=-1:(o=e[te],a=$i(u),e=Vi(u,e)));a!==-1;){let p=e[te];if(tu(i,a,p.data)){let g=Im(a,e,n,o,r,c);if(g!==st)return g}u=e[a+8],u!==wn&&nu(r,e[te].data[a+8]===c)&&tu(i,a,e)?(o=p,a=$i(u),e=Vi(u,e)):a=-1}}return s}function Im(t,e,n,r,s,i){let o=e[te],a=o.data[t+8],u=r==null?ga(a)&&Ro:r!=o&&(a.type&3)!==0,c=s&ee.Host&&i===a,p=Oi(a,o,n,u,c);return p!==null?Mn(e,o,p,a):st}function Oi(t,e,n,r,s){let i=t.providerIndexes,o=e.data,a=i&1048575,u=t.directiveStart,c=t.directiveEnd,p=i>>20,g=r?a:a+p,C=s?a+p:c;for(let y=g;y<C;y++){let l=o[y];if(y<u&&n===l||y>=u&&l.type===n)return y}if(s){let y=o[u];if(y&&wr(y)&&y.type===n)return u}return null}function Mn(t,e,n,r){let s=t[n],i=e.data;if(_m(s)){let o=s;o.resolving&&eg(Jp(i[n]));let a=eu(o.canSeeViewProviders);o.resolving=!0;let u,c=o.injectImpl?$e(o.injectImpl):null,p=nh(t,r,ee.Default);try{s=t[n]=o.factory(void 0,i,t,r),e.firstCreatePass&&n>=r.directiveStart&&mm(n,i[n],e)}finally{c!==null&&$e(c),eu(a),o.resolving=!1,oh()}}return s}function xm(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(ar)?t[ar]:void 0;return typeof e=="number"?e>=0?e&fh:Mm:e}function tu(t,e,n){let r=1<<t;return!!(n[e+(t>>ph)]&r)}function nu(t,e){return!(t&ee.Self)&&!(t&ee.Host&&e)}var Ut=class{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return yh(this._tNode,this._lView,e,Qi(r),n)}};function Mm(){return new Ut(ht(),Me())}function Da(t){return oa(()=>{let e=t.prototype.constructor,n=e[Pi]||ko(e),r=Object.prototype,s=Object.getPrototypeOf(t.prototype).constructor;for(;s&&s!==r;){let i=s[Pi]||ko(s);if(i&&i!==n)return i;s=Object.getPrototypeOf(s)}return i=>new i})}function ko(t){return Su(t)?()=>{let e=ko(Ve(t));return e&&e()}:bn(t)}function Tm(t,e,n,r,s){let i=t,o=e;for(;i!==null&&o!==null&&o[G]&2048&&!(o[G]&512);){let a=Ch(i,o,n,r|ee.Self,st);if(a!==st)return a;let u=i.parent;if(!u){let c=o[$u];if(c){let p=c.get(n,st,r);if(p!==st)return p}u=Sh(o),o=o[Cr]}i=u}return s}function Sh(t){let e=t[te],n=e.type;return n===2?e.declTNode:n===1?t[et]:null}function ru(t,e=null,n=null,r){let s=wh(t,e,n,r);return s.resolveInjectorInitializers(),s}function wh(t,e=null,n=null,r,s=new Set){let i=[n||Dn,Tg(t)];return r=r||(typeof t=="object"?void 0:Pe(t)),new ur(i,e||fa(),r||null,s)}var br=(()=>{let e=class e{static create(r,s){if(Array.isArray(r))return ru({name:""},s,r,"");{let i=r.name??"";return ru({name:i},r.parent,r.providers,i)}}};e.THROW_IF_NOT_FOUND=cr,e.NULL=new Hi,e.\u0275prov=X({token:e,providedIn:"any",factory:()=>ce(Tu)}),e.__NG_ELEMENT_ID__=-1;let t=e;return t})();var Am="ngOriginalError";function go(t){return t[Am]}var _t=class{constructor(){this._console=console}handleError(e){let n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&go(e);for(;n&&go(n);)n=go(n);return n||null}},bh=new ae("",{providedIn:"root",factory:()=>V(_t).handleError.bind(void 0)}),Dh=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=Rm,e.__NG_ENV_ID__=r=>r;let t=e;return t})(),Oo=class extends Dh{constructor(e){super(),this._lView=e}onDestroy(e){return Qu(this._lView,e),()=>em(this._lView,e)}};function Rm(){return new Oo(Me())}function km(){return On(ht(),Me())}function On(t,e){return new Yt(ut(t,e))}var Yt=(()=>{let e=class e{constructor(r){this.nativeElement=r}};e.__NG_ELEMENT_ID__=km;let t=e;return t})();function Om(t){return t instanceof Yt?t.nativeElement:t}var Lo=class extends Ae{constructor(e=!1){super(),this.destroyRef=void 0,this.__isAsync=e,jg()&&(this.destroyRef=V(Dh,{optional:!0})??void 0)}emit(e){let n=le(null);try{super.next(e)}finally{le(n)}}subscribe(e,n,r){let s=e,i=n||(()=>null),o=r;if(e&&typeof e=="object"){let u=e;s=u.next?.bind(u),i=u.error?.bind(u),o=u.complete?.bind(u)}this.__isAsync&&(i=mo(i),s&&(s=mo(s)),o&&(o=mo(o)));let a=super.subscribe({next:s,error:i,complete:o});return e instanceof Ce&&e.add(a),a}};function mo(t){return e=>{setTimeout(t,void 0,e)}}var We=Lo;function Lm(){return this._results[Symbol.iterator]()}var No=class t{get changes(){return this._changes??=new We}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;let n=t.prototype;n[Symbol.iterator]||(n[Symbol.iterator]=Lm)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,n){return this._results.reduce(e,n)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,n){this.dirty=!1;let r=dg(e);(this._changesDetected=!hg(this._results,r,n))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}};function Eh(t){return(t.flags&128)===128}var Ih=new Map,Nm=0;function Pm(){return Nm++}function Fm(t){Ih.set(t[es],t)}function Bm(t){Ih.delete(t[es])}var iu="__ngContext__";function Tn(t,e){Sn(e)?(t[iu]=e[es],Fm(e)):t[iu]=e}function xh(t){return Th(t[dr])}function Mh(t){return Th(t[Xe])}function Th(t){for(;t!==null&&!Ct(t);)t=t[Xe];return t}var Po;function Ah(t){Po=t}function Hm(){if(Po!==void 0)return Po;if(typeof document<"u")return document;throw new K(210,!1)}var Ea=new ae("",{providedIn:"root",factory:()=>jm}),jm="ng",Ia=new ae(""),Ln=new ae("",{providedIn:"platform",factory:()=>"unknown"});var xa=new ae("",{providedIn:"root",factory:()=>Hm().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var Um="h",$m="b";var Vm=()=>null;function Ma(t,e,n=!1){return Vm(t,e,n)}var Rh=!1,Wm=new ae("",{providedIn:"root",factory:()=>Rh});function kh(t){return t instanceof Function?t():t}var Zt=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(Zt||{}),zm;function Ta(t,e){return zm(t,e)}function yn(t,e,n,r,s){if(r!=null){let i,o=!1;Ct(r)?i=r:Sn(r)&&(o=!0,r=r[yt]);let a=vt(r);t===0&&n!==null?s==null?Fh(e,n,a):Wi(e,n,a,s||null,!0):t===1&&n!==null?Wi(e,n,a,s||null,!0):t===2?av(e,a,o):t===3&&e.destroyNode(a),i!=null&&lv(e,t,i,n,s)}}function qm(t,e){return t.createText(e)}function Oh(t,e,n){return t.createElement(e,n)}function Gm(t,e){Lh(t,e),e[yt]=null,e[et]=null}function Km(t,e,n,r,s,i){r[yt]=s,r[et]=e,rs(t,r,n,1,s,i)}function Lh(t,e){e[ct].changeDetectionScheduler?.notify(1),rs(t,e,e[Je],2,null,null)}function Ym(t){let e=t[dr];if(!e)return vo(t[te],t);for(;e;){let n=null;if(Sn(e))n=e[dr];else{let r=e[Fe];r&&(n=r)}if(!n){for(;e&&!e[Xe]&&e!==t;)Sn(e)&&vo(e[te],e),e=e[xe];e===null&&(e=t),Sn(e)&&vo(e[te],e),n=e&&e[Xe]}e=n}}function Zm(t,e,n,r){let s=Fe+r,i=n.length;r>0&&(n[s-1][Xe]=e),r<i-Fe?(e[Xe]=n[s],Mu(n,Fe+r,e)):(n.push(e),e[Xe]=null),e[xe]=n;let o=e[Sr];o!==null&&n!==o&&Qm(o,e);let a=e[mt];a!==null&&a.insertView(t),To(e),e[G]|=128}function Qm(t,e){let n=t[xn],s=e[xe][xe][lt];e[lt]!==s&&(t[G]|=pa.HasTransplantedViews),n===null?t[xn]=[e]:n.push(e)}function Nh(t,e){let n=t[xn],r=n.indexOf(e);n.splice(r,1)}function Fo(t,e){if(t.length<=Fe)return;let n=Fe+e,r=t[n];if(r){let s=r[Sr];s!==null&&s!==t&&Nh(s,r),e>0&&(t[n-1][Xe]=r[Xe]);let i=Bi(t,Fe+e);Gm(r[te],r);let o=i[mt];o!==null&&o.detachView(i[te]),r[xe]=null,r[Xe]=null,r[G]&=-129}return r}function Ph(t,e){if(!(e[G]&256)){let n=e[Je];n.destroyNode&&rs(t,e,n,3,null,null),Ym(e)}}function vo(t,e){if(e[G]&256)return;let n=le(null);try{e[G]&=-129,e[G]|=256,e[Vt]&&ul(e[Vt]),Jm(t,e),Xm(t,e),e[te].type===1&&e[Je].destroy();let r=e[Sr];if(r!==null&&Ct(e[xe])){r!==e[xe]&&Nh(r,e);let s=e[mt];s!==null&&s.detachView(t)}Bm(e)}finally{le(n)}}function Xm(t,e){let n=t.cleanup,r=e[hr];if(n!==null)for(let i=0;i<n.length-1;i+=2)if(typeof n[i]=="string"){let o=n[i+3];o>=0?r[o]():r[-o].unsubscribe(),i+=2}else{let o=r[n[i+1]];n[i].call(o)}r!==null&&(e[hr]=null);let s=e[At];if(s!==null){e[At]=null;for(let i=0;i<s.length;i++){let o=s[i];o()}}}function Jm(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let s=e[n[r]];if(!(s instanceof gr)){let i=n[r+1];if(Array.isArray(i))for(let o=0;o<i.length;o+=2){let a=s[i[o]],u=i[o+1];it(4,a,u);try{u.call(a)}finally{it(5,a,u)}}else{it(4,s,i);try{i.call(s)}finally{it(5,s,i)}}}}}function ev(t,e,n){return tv(t,e.parent,n)}function tv(t,e,n){let r=e;for(;r!==null&&r.type&40;)e=r,r=e.parent;if(r===null)return n[yt];{let{componentOffset:s}=r;if(s>-1){let{encapsulation:i}=t.data[r.directiveStart+s];if(i===ot.None||i===ot.Emulated)return null}return ut(r,n)}}function Wi(t,e,n,r,s){t.insertBefore(e,n,r,s)}function Fh(t,e,n){t.appendChild(e,n)}function su(t,e,n,r,s){r!==null?Wi(t,e,n,r,s):Fh(t,e,n)}function nv(t,e,n,r){t.removeChild(e,n,r)}function Aa(t,e){return t.parentNode(e)}function rv(t,e){return t.nextSibling(e)}function iv(t,e,n){return ov(t,e,n)}function sv(t,e,n){return t.type&40?ut(t,n):null}var ov=sv,ou;function Bh(t,e,n,r){let s=ev(t,r,e),i=e[Je],o=r.parent||e[et],a=iv(o,r,e);if(s!=null)if(Array.isArray(n))for(let u=0;u<n.length;u++)su(i,s,n[u],a,!1);else su(i,s,n,a,!1);ou!==void 0&&ou(i,r,e,n,s)}function Li(t,e){if(e!==null){let n=e.type;if(n&3)return ut(e,t);if(n&4)return Bo(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return Li(t,r);{let s=t[e.index];return Ct(s)?Bo(-1,s):vt(s)}}else{if(n&32)return Ta(e,t)()||vt(t[e.index]);{let r=Hh(t,e);if(r!==null){if(Array.isArray(r))return r[0];let s=pr(t[lt]);return Li(s,r)}else return Li(t,e.next)}}}return null}function Hh(t,e){if(e!==null){let r=t[lt][et],s=e.projection;return r.projection[s]}return null}function Bo(t,e){let n=Fe+t+1;if(n<e.length){let r=e[n],s=r[te].firstChild;if(s!==null)return Li(r,s)}return e[zt]}function av(t,e,n){let r=Aa(t,e);r&&nv(t,r,e,n)}function Ra(t,e,n,r,s,i,o){for(;n!=null;){let a=r[n.index],u=n.type;if(o&&e===0&&(a&&Tn(vt(a),r),n.flags|=2),(n.flags&32)!==32)if(u&8)Ra(t,e,n.child,r,s,i,!1),yn(e,t,s,a,i);else if(u&32){let c=Ta(n,r),p;for(;p=c();)yn(e,t,s,p,i);yn(e,t,s,a,i)}else u&16?cv(t,e,r,n,s,i):yn(e,t,s,a,i);n=o?n.projectionNext:n.next}}function rs(t,e,n,r,s,i){Ra(n,r,t.firstChild,e,s,i,!1)}function cv(t,e,n,r,s,i){let o=n[lt],u=o[et].projection[r.projection];if(Array.isArray(u))for(let c=0;c<u.length;c++){let p=u[c];yn(e,t,s,p,i)}else{let c=u,p=o[xe];Eh(r)&&(c.flags|=128),Ra(t,e,c,p,s,i,!0)}}function lv(t,e,n,r,s){let i=n[zt],o=vt(n);i!==o&&yn(e,t,r,i,s);for(let a=Fe;a<n.length;a++){let u=n[a];rs(u[te],u,t,e,r,i)}}function uv(t,e,n){t.setAttribute(e,"style",n)}function jh(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function Uh(t,e,n){let{mergedAttrs:r,classes:s,styles:i}=n;r!==null&&bo(t,e,r),s!==null&&jh(t,e,s),i!==null&&uv(t,e,i)}var $h={};function hv(t,e,n,r){if(!r)if((e[G]&3)===3){let i=t.preOrderCheckHooks;i!==null&&Ri(e,i,n)}else{let i=t.preOrderHooks;i!==null&&ki(e,i,0,n)}qt(n)}function ka(t,e=ee.Default){let n=Me();if(n===null)return ce(t,e);let r=ht();return yh(r,n,Ve(t),e)}function Vh(t,e,n,r,s,i){let o=le(null);try{let a=null;s&Rt.SignalBased&&(a=e[r][ol]),a!==null&&a.transformFn!==void 0&&(i=a.transformFn(i)),s&Rt.HasDecoratorInputTransform&&(i=t.inputTransforms[r].call(e,i)),t.setInput!==null?t.setInput(e,a,i,n,r):qu(e,a,r,i)}finally{le(o)}}function dv(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let s=n[r];if(s<0)qt(~s);else{let i=s,o=n[++r],a=n[++r];hm(o,i);let u=e[i];a(2,u)}}}finally{qt(-1)}}function is(t,e,n,r,s,i,o,a,u,c,p){let g=e.blueprint.slice();return g[yt]=s,g[G]=r|4|128|8|64,(c!==null||t&&t[G]&2048)&&(g[G]|=2048),Zu(g),g[xe]=g[Cr]=t,g[at]=n,g[ct]=o||t&&t[ct],g[Je]=a||t&&t[Je],g[In]=u||t&&t[In]||null,g[et]=i,g[es]=Pm(),g[ji]=p,g[$u]=c,g[lt]=e.type==2?t[lt]:g,g}function Oa(t,e,n,r,s){let i=t.data[e];if(i===null)i=fv(t,e,n,r,s),um()&&(i.flags|=32);else if(i.type&64){i.type=n,i.value=r,i.attrs=s;let o=am();i.injectorIndex=o===null?-1:o.injectorIndex}return ns(i,!0),i}function fv(t,e,n,r,s){let i=Ju(),o=eh(),a=o?i:i&&i.parent,u=t.data[e]=Sv(t,a,n,e,r,s);return t.firstChild===null&&(t.firstChild=u),i!==null&&(o?i.child==null&&u.parent!==null&&(i.child=u):i.next===null&&(i.next=u,u.prev=i)),u}function Wh(t,e,n,r){if(n===0)return-1;let s=e.length;for(let i=0;i<n;i++)e.push(r),t.blueprint.push(r),t.data.push(null);return s}function zh(t,e,n,r,s){let i=pm(),o=r&2;try{qt(-1),o&&e.length>Wt&&hv(t,e,Wt,!1),it(o?2:0,s),n(r,s)}finally{qt(i),it(o?3:1,s)}}function qh(t,e,n){if(Wu(e)){let r=le(null);try{let s=e.directiveStart,i=e.directiveEnd;for(let o=s;o<i;o++){let a=t.data[o];if(a.contentQueries){let u=n[o];a.contentQueries(1,u,o)}}}finally{le(r)}}}function pv(t,e,n){Xu()&&(Iv(t,e,n,ut(n,e)),(n.flags&64)===64&&Zh(t,e,n))}function gv(t,e,n=ut){let r=e.localNames;if(r!==null){let s=e.index+1;for(let i=0;i<r.length;i+=2){let o=r[i+1],a=o===-1?n(e,t):t[o];t[s++]=a}}}function Gh(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=Kh(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function Kh(t,e,n,r,s,i,o,a,u,c,p){let g=Wt+r,C=g+s,y=mv(g,C),l=typeof c=="function"?c():c;return y[te]={type:t,blueprint:y,template:n,queries:null,viewQuery:a,declTNode:e,data:y.slice().fill(null,g),bindingStartIndex:g,expandoStartIndex:C,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof i=="function"?i():i,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:u,consts:l,incompleteFirstPass:!1,ssrId:p}}function mv(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:$h);return n}function vv(t,e,n,r){let i=r.get(Wm,Rh)||n===ot.ShadowDom,o=t.selectRootElement(e,i);return _v(o),o}function _v(t){yv(t)}var yv=()=>null;function Cv(t,e,n,r){let s=Xh(e);s.push(n),t.firstCreatePass&&Jh(t).push(r,s.length-1)}function Sv(t,e,n,r,s,i){let o=e?e.injectorIndex:-1,a=0;return im()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:s,attrs:i,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function au(t,e,n,r,s){for(let i in e){if(!e.hasOwnProperty(i))continue;let o=e[i];if(o===void 0)continue;r??={};let a,u=Rt.None;Array.isArray(o)?(a=o[0],u=o[1]):a=o;let c=i;if(s!==null){if(!s.hasOwnProperty(i))continue;c=s[i]}t===0?cu(r,n,c,a,u):cu(r,n,c,a)}return r}function cu(t,e,n,r,s){let i;t.hasOwnProperty(n)?(i=t[n]).push(e,r):i=t[n]=[e,r],s!==void 0&&i.push(s)}function wv(t,e,n){let r=e.directiveStart,s=e.directiveEnd,i=t.data,o=e.attrs,a=[],u=null,c=null;for(let p=r;p<s;p++){let g=i[p],C=n?n.get(g):null,y=C?C.inputs:null,l=C?C.outputs:null;u=au(0,g.inputs,p,u,y),c=au(1,g.outputs,p,c,l);let d=u!==null&&o!==null&&!ua(e)?Nv(u,p,o):null;a.push(d)}u!==null&&(u.hasOwnProperty("class")&&(e.flags|=8),u.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=u,e.outputs=c}function bv(t,e,n,r){if(Xu()){let s=r===null?null:{"":-1},i=Mv(t,n),o,a;i===null?o=a=null:[o,a]=i,o!==null&&Yh(t,e,n,o,s,a),s&&Tv(n,r,s)}n.mergedAttrs=la(n.mergedAttrs,n.attrs)}function Yh(t,e,n,r,s,i){for(let c=0;c<r.length;c++)Em(gh(n,e),t,r[c].type);Rv(n,t.data.length,r.length);for(let c=0;c<r.length;c++){let p=r[c];p.providersResolver&&p.providersResolver(p)}let o=!1,a=!1,u=Wh(t,e,r.length,null);for(let c=0;c<r.length;c++){let p=r[c];n.mergedAttrs=la(n.mergedAttrs,p.hostAttrs),kv(t,n,e,u,p),Av(u,p,s),p.contentQueries!==null&&(n.flags|=4),(p.hostBindings!==null||p.hostAttrs!==null||p.hostVars!==0)&&(n.flags|=64);let g=p.type.prototype;!o&&(g.ngOnChanges||g.ngOnInit||g.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),o=!0),!a&&(g.ngOnChanges||g.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),u++}wv(t,n,i)}function Dv(t,e,n,r,s){let i=s.hostBindings;if(i){let o=t.hostBindingOpCodes;o===null&&(o=t.hostBindingOpCodes=[]);let a=~e.index;Ev(o)!=a&&o.push(a),o.push(n,r,i)}}function Ev(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function Iv(t,e,n,r){let s=n.directiveStart,i=n.directiveEnd;ga(n)&&Ov(e,n,t.data[s+n.componentOffset]),t.firstCreatePass||gh(n,e),Tn(r,e);let o=n.initialInputs;for(let a=s;a<i;a++){let u=t.data[a],c=Mn(e,t,a,n);if(Tn(c,e),o!==null&&Lv(e,a-s,c,u,n,o),wr(u)){let p=Rn(n.index,e);p[at]=Mn(e,t,a,n)}}}function Zh(t,e,n){let r=n.directiveStart,s=n.directiveEnd,i=n.index,o=dm();try{qt(i);for(let a=r;a<s;a++){let u=t.data[a],c=e[a];Ao(a),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&xv(u,c)}}finally{qt(-1),Ao(o)}}function xv(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function Mv(t,e){let n=t.directiveRegistry,r=null,s=null;if(n)for(let i=0;i<n.length;i++){let o=n[i];if(Cg(e,o.selectors,!1))if(r||(r=[]),wr(o))if(o.findHostDirectiveDefs!==null){let a=[];s=s||new Map,o.findHostDirectiveDefs(o,a,s),r.unshift(...a,o);let u=a.length;Ho(t,e,u)}else r.unshift(o),Ho(t,e,0);else s=s||new Map,o.findHostDirectiveDefs?.(o,r,s),r.push(o)}return r===null?null:[r,s]}function Ho(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function Tv(t,e,n){if(e){let r=t.localNames=[];for(let s=0;s<e.length;s+=2){let i=n[e[s+1]];if(i==null)throw new K(-301,!1);r.push(e[s],i)}}}function Av(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;wr(e)&&(n[""]=t)}}function Rv(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function kv(t,e,n,r,s){t.data[r]=s;let i=s.factory||(s.factory=bn(s.type,!0)),o=new gr(i,wr(s),ka);t.blueprint[r]=o,n[r]=o,Dv(t,e,r,Wh(t,n,s.hostVars,$h),s)}function Ov(t,e,n){let r=ut(e,t),s=Gh(n),i=t[ct].rendererFactory,o=16;n.signals?o=4096:n.onPush&&(o=64);let a=La(t,is(t,s,null,o,r,e,null,i.createRenderer(r,n),null,null,null));t[e.index]=a}function Lv(t,e,n,r,s,i){let o=i[e];if(o!==null)for(let a=0;a<o.length;){let u=o[a++],c=o[a++],p=o[a++],g=o[a++];Vh(r,n,u,c,p,g)}}function Nv(t,e,n){let r=null,s=0;for(;s<n.length;){let i=n[s];if(i===0){s+=4;continue}else if(i===5){s+=2;continue}if(typeof i=="number")break;if(t.hasOwnProperty(i)){r===null&&(r=[]);let o=t[i];for(let a=0;a<o.length;a+=3)if(o[a]===e){r.push(i,o[a+1],o[a+2],n[s+1]);break}}s+=2}return r}function Pv(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function Qh(t,e){let n=t.contentQueries;if(n!==null){let r=le(null);try{for(let s=0;s<n.length;s+=2){let i=n[s],o=n[s+1];if(o!==-1){let a=t.data[o];Ca(i),a.contentQueries(2,e[o],o)}}}finally{le(r)}}}function La(t,e){return t[dr]?t[Zl][Xe]=e:t[dr]=e,t[Zl]=e,e}function jo(t,e,n){Ca(0);let r=le(null);try{e(t,n)}finally{le(r)}}function Xh(t){return t[hr]||(t[hr]=[])}function Jh(t){return t.cleanup||(t.cleanup=[])}function ed(t,e){let n=t[In],r=n?n.get(_t,null):null;r&&r.handleError(e)}function td(t,e,n,r,s){for(let i=0;i<n.length;){let o=n[i++],a=n[i++],u=n[i++],c=e[o],p=t.data[o];Vh(p,c,r,a,u,s)}}function Fv(t,e){let n=Rn(e,t),r=n[te];Bv(r,n);let s=n[yt];s!==null&&n[ji]===null&&(n[ji]=Ma(s,n[In])),Na(r,n,n[at])}function Bv(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function Na(t,e,n){Sa(e);try{let r=t.viewQuery;r!==null&&jo(1,r,n);let s=t.template;s!==null&&zh(t,e,s,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[mt]?.finishViewCreation(t),t.staticContentQueries&&Qh(t,e),t.staticViewQueries&&jo(2,t.viewQuery,n);let i=t.components;i!==null&&Hv(e,i)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[G]&=-5,wa()}}function Hv(t,e){for(let n=0;n<e.length;n++)Fv(t,e[n])}function jv(t,e,n,r){let s=le(null);try{let i=e.tView,a=t[G]&4096?4096:16,u=is(t,i,n,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),c=t[e.index];u[Sr]=c;let p=t[mt];return p!==null&&(u[mt]=p.createEmbeddedView(i)),Na(i,u,n),u}finally{le(s)}}function lu(t,e){return!e||e.firstChild===null||Eh(t)}function Uv(t,e,n,r=!0){let s=e[te];if(Zm(s,e,t,n),r){let o=Bo(n,t),a=e[Je],u=Aa(a,t[zt]);u!==null&&Km(s,t[et],a,e,u,o)}let i=e[ji];i!==null&&i.firstChild!==null&&(i.firstChild=null)}function zi(t,e,n,r,s=!1){for(;n!==null;){let i=e[n.index];i!==null&&r.push(vt(i)),Ct(i)&&$v(i,r);let o=n.type;if(o&8)zi(t,e,n.child,r);else if(o&32){let a=Ta(n,e),u;for(;u=a();)r.push(u)}else if(o&16){let a=Hh(e,n);if(Array.isArray(a))r.push(...a);else{let u=pr(e[lt]);zi(u[te],u,a,r,!0)}}n=s?n.projectionNext:n.next}return r}function $v(t,e){for(let n=Fe;n<t.length;n++){let r=t[n],s=r[te].firstChild;s!==null&&zi(r[te],r,s,e)}t[zt]!==t[yt]&&e.push(t[zt])}var nd=[];function Vv(t){return t[Vt]??Wv(t)}function Wv(t){let e=nd.pop()??Object.create(qv);return e.lView=t,e}function zv(t){t.lView[Vt]!==t&&(t.lView=null,nd.push(t))}var qv=_e(z({},al),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{fr(t.lView)},consumerOnSignalRead(){this.lView[Vt]=this}}),rd=100;function id(t,e=!0,n=0){let r=t[ct],s=r.rendererFactory,i=!1;i||s.begin?.();try{Gv(t,n)}catch(o){throw e&&ed(t,o),o}finally{i||(s.end?.(),r.inlineEffectRunner?.flush())}}function Gv(t,e){Uo(t,e);let n=0;for(;va(t);){if(n===rd)throw new K(103,!1);n++,Uo(t,1)}}function Kv(t,e,n,r){let s=e[G];if((s&256)===256)return;let i=!1;!i&&e[ct].inlineEffectRunner?.flush(),Sa(e);let o=null,a=null;!i&&Yv(t)&&(a=Vv(e),o=cl(a));try{Zu(e),lm(t.bindingStartIndex),n!==null&&zh(t,e,n,2,r);let u=(s&3)===3;if(!i)if(u){let g=t.preOrderCheckHooks;g!==null&&Ri(e,g,null)}else{let g=t.preOrderHooks;g!==null&&ki(e,g,0,null),fo(e,0)}if(Zv(e),sd(e,0),t.contentQueries!==null&&Qh(t,e),!i)if(u){let g=t.contentCheckHooks;g!==null&&Ri(e,g)}else{let g=t.contentHooks;g!==null&&ki(e,g,1),fo(e,1)}dv(t,e);let c=t.components;c!==null&&ad(e,c,0);let p=t.viewQuery;if(p!==null&&jo(2,p,r),!i)if(u){let g=t.viewCheckHooks;g!==null&&Ri(e,g)}else{let g=t.viewHooks;g!==null&&ki(e,g,2),fo(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[ho]){for(let g of e[ho])g();e[ho]=null}i||(e[G]&=-73)}catch(u){throw fr(e),u}finally{a!==null&&(ll(a,o),zv(a)),wa()}}function Yv(t){return t.type!==2}function sd(t,e){for(let n=xh(t);n!==null;n=Mh(n))for(let r=Fe;r<n.length;r++){let s=n[r];od(s,e)}}function Zv(t){for(let e=xh(t);e!==null;e=Mh(e)){if(!(e[G]&pa.HasTransplantedViews))continue;let n=e[xn];for(let r=0;r<n.length;r++){let s=n[r],i=s[xe];Jg(s)}}}function Qv(t,e,n){let r=Rn(e,t);od(r,n)}function od(t,e){ma(t)&&Uo(t,e)}function Uo(t,e){let r=t[te],s=t[G],i=t[Vt],o=!!(e===0&&s&16);if(o||=!!(s&64&&e===0),o||=!!(s&1024),o||=!!(i?.dirty&&zs(i)),i&&(i.dirty=!1),t[G]&=-9217,o)Kv(r,t,r.template,t[at]);else if(s&8192){sd(t,1);let a=r.components;a!==null&&ad(t,a,1)}}function ad(t,e,n){for(let r=0;r<e.length;r++)Qv(t,e[r],n)}function Pa(t){for(t[ct].changeDetectionScheduler?.notify();t;){t[G]|=64;let e=pr(t);if($g(t)&&!e)return t;t=e}return null}var Gt=class{get rootNodes(){let e=this._lView,n=e[te];return zi(n,e,n.firstChild,[])}constructor(e,n,r=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[at]}set context(e){this._lView[at]=e}get destroyed(){return(this._lView[G]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[xe];if(Ct(e)){let n=e[Ui],r=n?n.indexOf(this):-1;r>-1&&(Fo(e,r),Bi(n,r))}this._attachedToViewContainer=!1}Ph(this._lView[te],this._lView)}onDestroy(e){Qu(this._lView,e)}markForCheck(){Pa(this._cdRefInjectingView||this._lView)}detach(){this._lView[G]&=-129}reattach(){To(this._lView),this._lView[G]|=128}detectChanges(){this._lView[G]|=1024,id(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new K(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,Lh(this._lView[te],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new K(902,!1);this._appRef=e,To(this._lView)}},mr=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=e_;let t=e;return t})(),Xv=mr,Jv=class extends Xv{constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,r){let s=jv(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:n,dehydratedView:r});return new Gt(s)}};function e_(){return Fa(ht(),Me())}function Fa(t,e){return t.type&4?new Jv(e,t,On(t,e)):null}var NI=new RegExp(`^(\\d+)*(${$m}|${Um})*(.*)`);var t_=()=>null;function uu(t,e){return t_(t,e)}var $o=class{},Vo=class{},qi=class{};function n_(t){let e=Error(`No component factory found for ${Pe(t)}.`);return e[r_]=t,e}var r_="ngComponent";var Wo=class{resolveComponentFactory(e){throw n_(e)}},ss=(()=>{let e=class e{};e.NULL=new Wo;let t=e;return t})(),vr=class{};var i_=(()=>{let e=class e{};e.\u0275prov=X({token:e,providedIn:"root",factory:()=>null});let t=e;return t})(),_o={};var hu=new Set;function cd(t){hu.has(t)||(hu.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}var ld=(()=>{let e=class e{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){let r=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let s of r)s()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}};e.\u0275prov=X({token:e,providedIn:"root",factory:()=>new e});let t=e;return t})();function zo(t,e,n){let r=n?t.styles:null,s=n?t.classes:null,i=0;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];if(typeof a=="number")i=a;else if(i==1)s=jl(s,a);else if(i==2){let u=a,c=e[++o];r=jl(r,u+": "+c+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=s:t.classesWithoutHost=s}var Gi=class extends ss{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=$t(e);return new _r(n,this.ngModule)}};function du(t){let e=[];for(let n in t){if(!t.hasOwnProperty(n))continue;let r=t[n];r!==void 0&&e.push({propName:Array.isArray(r)?r[0]:r,templateName:n})}return e}function s_(t){let e=t.toLowerCase();return e==="svg"?qg:e==="math"?Gg:null}var qo=class{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=Qi(r);let s=this.injector.get(e,_o,r);return s!==_o||n===_o?s:this.parentInjector.get(e,n,r)}},_r=class extends qi{get inputs(){let e=this.componentDef,n=e.inputTransforms,r=du(e.inputs);if(n!==null)for(let s of r)n.hasOwnProperty(s.propName)&&(s.transform=n[s.propName]);return r}get outputs(){return du(this.componentDef.outputs)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=Dg(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,s){let i=le(null);try{s=s||this.ngModule;let o=s instanceof ze?s:s?.injector;o&&this.componentDef.getStandaloneInjector!==null&&(o=this.componentDef.getStandaloneInjector(o)||o);let a=o?new qo(e,o):e,u=a.get(vr,null);if(u===null)throw new K(407,!1);let c=a.get(i_,null),p=a.get(ld,null),g=a.get($o,null),C={rendererFactory:u,sanitizer:c,inlineEffectRunner:null,afterRenderEventManager:p,changeDetectionScheduler:g},y=u.createRenderer(null,this.componentDef),l=this.componentDef.selectors[0][0]||"div",d=r?vv(y,r,this.componentDef.encapsulation,a):Oh(y,l,s_(l)),h=512;this.componentDef.signals?h|=4096:this.componentDef.onPush||(h|=16);let f=null;d!==null&&(f=Ma(d,a,!0));let m=Kh(0,null,null,1,0,null,null,null,null,null,null),_=is(null,m,null,h,null,null,C,y,a,null,f);Sa(_);let S,b;try{let v=this.componentDef,w,I=null;v.findHostDirectiveDefs?(w=[],I=new Map,v.findHostDirectiveDefs(v,w,I),w.push(v)):w=[v];let R=o_(_,d),x=a_(R,d,v,w,_,C,y);b=Zg(m,Wt),d&&u_(y,v,d,r),n!==void 0&&h_(b,this.ngContentSelectors,n),S=l_(x,v,w,I,_,[d_]),Na(m,_,null)}finally{wa()}return new Go(this.componentType,S,On(b,_),_,b)}finally{le(i)}}},Go=class extends Vo{constructor(e,n,r,s,i){super(),this.location=r,this._rootLView=s,this._tNode=i,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new Gt(s,void 0,!1),this.componentType=e}setInput(e,n){let r=this._tNode.inputs,s;if(r!==null&&(s=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let i=this._rootLView;td(i[te],i,s,e,n),this.previousInputValues.set(e,n);let o=Rn(this._tNode.index,i);Pa(o)}}get injector(){return new Ut(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function o_(t,e){let n=t[te],r=Wt;return t[r]=e,Oa(n,r,2,"#host",null)}function a_(t,e,n,r,s,i,o){let a=s[te];c_(r,t,e,o);let u=null;e!==null&&(u=Ma(e,s[In]));let c=i.rendererFactory.createRenderer(e,n),p=16;n.signals?p=4096:n.onPush&&(p=64);let g=is(s,Gh(n),null,p,s[t.index],t,i,c,null,null,u);return a.firstCreatePass&&Ho(a,t,r.length-1),La(s,g),s[t.index]=g}function c_(t,e,n,r){for(let s of t)e.mergedAttrs=la(e.mergedAttrs,s.hostAttrs);e.mergedAttrs!==null&&(zo(e,e.mergedAttrs,!0),n!==null&&Uh(r,n,e))}function l_(t,e,n,r,s,i){let o=ht(),a=s[te],u=ut(o,s);Yh(a,s,o,n,null,r);for(let p=0;p<n.length;p++){let g=o.directiveStart+p,C=Mn(s,a,g,o);Tn(C,s)}Zh(a,s,o),u&&Tn(u,s);let c=Mn(s,a,o.directiveStart+o.componentOffset,o);if(t[at]=s[at]=c,i!==null)for(let p of i)p(c,e);return qh(a,o,s),c}function u_(t,e,n,r){if(r)bo(t,n,["ng-version","17.3.7"]);else{let{attrs:s,classes:i}=Eg(e.selectors[0]);s&&bo(t,n,s),i&&i.length>0&&jh(t,n,i.join(" "))}}function h_(t,e,n){let r=t.projection=[];for(let s=0;s<e.length;s++){let i=n[s];r.push(i!=null?Array.from(i):null)}}function d_(){let t=ht();uh(Me()[te],t)}var Nn=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=f_;let t=e;return t})();function f_(){let t=ht();return hd(t,Me())}var p_=Nn,ud=class extends p_{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return On(this._hostTNode,this._hostLView)}get injector(){return new Ut(this._hostTNode,this._hostLView)}get parentInjector(){let e=ba(this._hostTNode,this._hostLView);if(dh(e)){let n=Vi(e,this._hostLView),r=$i(e),s=n[te].data[r+8];return new Ut(s,n)}else return new Ut(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=fu(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-Fe}createEmbeddedView(e,n,r){let s,i;typeof r=="number"?s=r:r!=null&&(s=r.index,i=r.injector);let o=uu(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},i,o);return this.insertImpl(a,s,lu(this._hostTNode,o)),a}createComponent(e,n,r,s,i){let o=e&&!Ug(e),a;if(o)a=n;else{let l=n||{};a=l.index,r=l.injector,s=l.projectableNodes,i=l.environmentInjector||l.ngModuleRef}let u=o?e:new _r($t(e)),c=r||this.parentInjector;if(!i&&u.ngModule==null){let d=(o?c:this.parentInjector).get(ze,null);d&&(i=d)}let p=$t(u.componentType??{}),g=uu(this._lContainer,p?.id??null),C=g?.firstChild??null,y=u.create(c,s,C,i);return this.insertImpl(y.hostView,a,lu(this._hostTNode,g)),y}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let s=e._lView;if(Xg(s)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let u=s[xe],c=new ud(u,u[et],u[xe]);c.detach(c.indexOf(e))}}let i=this._adjustIndex(n),o=this._lContainer;return Uv(o,s,i,r),e.attachToViewContainerRef(),Mu(yo(o),i,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=fu(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=Fo(this._lContainer,n);r&&(Bi(yo(this._lContainer),n),Ph(r[te],r))}detach(e){let n=this._adjustIndex(e,-1),r=Fo(this._lContainer,n);return r&&Bi(yo(this._lContainer),n)!=null?new Gt(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function fu(t){return t[Ui]}function yo(t){return t[Ui]||(t[Ui]=[])}function hd(t,e){let n,r=e[t.index];return Ct(r)?n=r:(n=Pv(r,e,null,t),e[t.index]=n,La(e,n)),m_(n,e,t,r),new ud(n,t,e)}function g_(t,e){let n=t[Je],r=n.createComment(""),s=ut(e,t),i=Aa(n,s);return Wi(n,i,r,rv(n,s),!1),r}var m_=v_;function v_(t,e,n,r){if(t[zt])return;let s;n.type&8?s=vt(r):s=g_(e,n),t[zt]=s}var Ko=class t{constructor(e){this.queryList=e,this.matches=null}clone(){return new t(this.queryList)}setDirty(){this.queryList.setDirty()}},Yo=class t{constructor(e=[]){this.queries=e}createEmbeddedView(e){let n=e.queries;if(n!==null){let r=e.contentQueries!==null?e.contentQueries[0]:n.length,s=[];for(let i=0;i<r;i++){let o=n.getByIndex(i),a=this.queries[o.indexInDeclarationView];s.push(a.clone())}return new t(s)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let n=0;n<this.queries.length;n++)Ba(e,n).matches!==null&&this.queries[n].setDirty()}},Zo=class{constructor(e,n,r=null){this.flags=n,this.read=r,typeof e=="string"?this.predicate=E_(e):this.predicate=e}},Qo=class t{constructor(e=[]){this.queries=e}elementStart(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,n)}elementEnd(e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(e)}embeddedTView(e){let n=null;for(let r=0;r<this.length;r++){let s=n!==null?n.length:0,i=this.getByIndex(r).embeddedTView(e,s);i&&(i.indexInDeclarationView=r,n!==null?n.push(i):n=[i])}return n!==null?new t(n):null}template(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,n)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},Xo=class t{constructor(e,n=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=n}elementStart(e,n){this.isApplyingToNode(n)&&this.matchTNode(e,n)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,n){this.elementStart(e,n)}embeddedTView(e,n){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,n),new t(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let n=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==n;)r=r.parent;return n===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,n){let r=this.metadata.predicate;if(Array.isArray(r))for(let s=0;s<r.length;s++){let i=r[s];this.matchTNodeWithReadOption(e,n,__(n,i)),this.matchTNodeWithReadOption(e,n,Oi(n,e,i,!1,!1))}else r===mr?n.type&4&&this.matchTNodeWithReadOption(e,n,-1):this.matchTNodeWithReadOption(e,n,Oi(n,e,r,!1,!1))}matchTNodeWithReadOption(e,n,r){if(r!==null){let s=this.metadata.read;if(s!==null)if(s===Yt||s===Nn||s===mr&&n.type&4)this.addMatch(n.index,-2);else{let i=Oi(n,e,s,!1,!1);i!==null&&this.addMatch(n.index,i)}else this.addMatch(n.index,r)}}addMatch(e,n){this.matches===null?this.matches=[e,n]:this.matches.push(e,n)}};function __(t,e){let n=t.localNames;if(n!==null){for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1]}return null}function y_(t,e){return t.type&11?On(t,e):t.type&4?Fa(t,e):null}function C_(t,e,n,r){return n===-1?y_(e,t):n===-2?S_(t,e,r):Mn(t,t[te],n,e)}function S_(t,e,n){if(n===Yt)return On(e,t);if(n===mr)return Fa(e,t);if(n===Nn)return hd(e,t)}function dd(t,e,n,r){let s=e[mt].queries[r];if(s.matches===null){let i=t.data,o=n.matches,a=[];for(let u=0;o!==null&&u<o.length;u+=2){let c=o[u];if(c<0)a.push(null);else{let p=i[c];a.push(C_(e,p,o[u+1],n.metadata.read))}}s.matches=a}return s.matches}function Jo(t,e,n,r){let s=t.queries.getByIndex(n),i=s.matches;if(i!==null){let o=dd(t,e,s,n);for(let a=0;a<i.length;a+=2){let u=i[a];if(u>0)r.push(o[a/2]);else{let c=i[a+1],p=e[-u];for(let g=Fe;g<p.length;g++){let C=p[g];C[Sr]===C[xe]&&Jo(C[te],C,c,r)}if(p[xn]!==null){let g=p[xn];for(let C=0;C<g.length;C++){let y=g[C];Jo(y[te],y,c,r)}}}}}return r}function w_(t,e){return t[mt].queries[e].queryList}function b_(t,e,n){let r=new No((n&4)===4);return Cv(t,e,r,r.destroy),(e[mt]??=new Yo).queries.push(new Ko(r))-1}function D_(t,e,n){let r=kn();return r.firstCreatePass&&(I_(r,new Zo(t,e,n),-1),(e&2)===2&&(r.staticViewQueries=!0)),b_(r,Me(),e)}function E_(t){return t.split(",").map(e=>e.trim())}function I_(t,e,n){t.queries===null&&(t.queries=new Qo),t.queries.track(new Xo(e,n))}function Ba(t,e){return t.queries.getByIndex(e)}function x_(t,e){let n=t[te],r=Ba(n,e);return r.crossesNgTemplate?Jo(n,t,e,[]):dd(n,t,r,e)}var kt=class{},yr=class{};var ea=class extends kt{constructor(e,n,r){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Gi(this);let s=Pu(e);this._bootstrapComponents=kh(s.bootstrap),this._r3Injector=wh(e,n,[{provide:kt,useValue:this},{provide:ss,useValue:this.componentFactoryResolver},...r],Pe(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},ta=class extends yr{constructor(e){super(),this.moduleType=e}create(e){return new ea(this.moduleType,e,[])}};var Ki=class extends kt{constructor(e){super(),this.componentFactoryResolver=new Gi(this),this.instance=null;let n=new ur([...e.providers,{provide:kt,useValue:this},{provide:ss,useValue:this.componentFactoryResolver}],e.parent||fa(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Ha(t,e,n=null){return new Ki({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var os=(()=>{let e=class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Ee(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let r=this.taskId++;return this.pendingTasks.add(r),r}remove(r){this.pendingTasks.delete(r),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}};e.\u0275fac=function(s){return new(s||e)},e.\u0275prov=X({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function M_(t){return(t.flags&32)===32}function pu(...t){}function T_(){let t=typeof or.requestAnimationFrame=="function",e=or[t?"requestAnimationFrame":"setTimeout"],n=or[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&n){let r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);let s=n[Zone.__symbol__("OriginalDelegate")];s&&(n=s)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:n}}var ye=class t{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new We(!1),this.onMicrotaskEmpty=new We(!1),this.onStable=new We(!1),this.onError=new We(!1),typeof Zone>"u")throw new K(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!r&&n,s.shouldCoalesceRunChangeDetection=r,s.lastRequestAnimationFrameId=-1,s.nativeRequestAnimationFrame=T_().nativeRequestAnimationFrame,k_(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new K(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new K(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,s){let i=this._inner,o=i.scheduleEventTask("NgZoneEvent: "+s,e,A_,pu,pu);try{return i.runTask(o,n,r)}finally{i.cancelTask(o)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},A_={};function ja(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function R_(t){t.isCheckStableRunning||t.lastRequestAnimationFrameId!==-1||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(or,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,na(t),t.isCheckStableRunning=!0,ja(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),na(t))}function k_(t){let e=()=>{R_(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,s,i,o,a)=>{if(O_(a))return n.invokeTask(s,i,o,a);try{return gu(t),n.invokeTask(s,i,o,a)}finally{(t.shouldCoalesceEventChangeDetection&&i.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),mu(t)}},onInvoke:(n,r,s,i,o,a,u)=>{try{return gu(t),n.invoke(s,i,o,a,u)}finally{t.shouldCoalesceRunChangeDetection&&e(),mu(t)}},onHasTask:(n,r,s,i)=>{n.hasTask(s,i),r===s&&(i.change=="microTask"?(t._hasPendingMicrotasks=i.microTask,na(t),ja(t)):i.change=="macroTask"&&(t.hasPendingMacrotasks=i.macroTask))},onHandleError:(n,r,s,i)=>(n.handleError(s,i),t.runOutsideAngular(()=>t.onError.emit(i)),!1)})}function na(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.lastRequestAnimationFrameId!==-1?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function gu(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function mu(t){t._nesting--,ja(t)}function O_(t){return!Array.isArray(t)||t.length!==1?!1:t[0].data?.__ignore_ng_zone__===!0}function vu(t,e,n,r,s){let i=e.inputs,o=s?"class":"style";td(t,n,i[o],o,r)}function L_(t,e,n,r,s,i){let o=e.consts,a=Xl(o,s),u=Oa(e,t,2,r,a);return bv(e,n,u,Xl(o,i)),u.attrs!==null&&zo(u,u.attrs,!1),u.mergedAttrs!==null&&zo(u,u.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,u),u}function Dr(t,e,n,r){let s=Me(),i=kn(),o=Wt+t,a=s[Je],u=i.firstCreatePass?L_(o,i,s,e,n,r):i.data[o],c=N_(i,s,u,a,e,t);s[o]=c;let p=zu(u);return ns(u,!0),Uh(a,c,u),!M_(u)&&ch()&&Bh(i,s,c,u),tm()===0&&Tn(c,s),nm(),p&&(pv(i,s,u),qh(i,u,s)),r!==null&&gv(s,u),Dr}function Pn(){let t=ht();eh()?cm():(t=t.parent,ns(t,!1));let e=t;sm(e)&&om(),rm();let n=kn();return n.firstCreatePass&&(uh(n,t),Wu(t)&&n.queries.elementEnd(t)),e.classesWithoutHost!=null&&ym(e)&&vu(n,e,Me(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&Cm(e)&&vu(n,e,Me(),e.stylesWithoutHost,!1),Pn}function Qt(t,e,n,r){return Dr(t,e,n,r),Pn(),Qt}var N_=(t,e,n,r,s,i)=>(lh(!0),Oh(r,s,gm()));function fd(){return Me()}var Yi="en-US";var P_=Yi;function F_(t){typeof t=="string"&&(P_=t.toLowerCase().replace(/_/g,"-"))}function Er(t,e,n,r){let s=Me(),i=kn(),o=ht();return H_(i,s,s[Je],o,t,e,r),Er}function B_(t,e,n,r){let s=t.cleanup;if(s!=null)for(let i=0;i<s.length-1;i+=2){let o=s[i];if(o===n&&s[i+1]===r){let a=e[hr],u=s[i+2];return a.length>u?a[u]:null}typeof o=="string"&&(i+=2)}return null}function H_(t,e,n,r,s,i,o){let a=zu(r),c=t.firstCreatePass&&Jh(t),p=e[at],g=Xh(e),C=!0;if(r.type&3||o){let d=ut(r,e),h=o?o(d):d,f=g.length,m=o?S=>o(vt(S[r.index])):r.index,_=null;if(!o&&a&&(_=B_(t,e,s,r.index)),_!==null){let S=_.__ngLastListenerFn__||_;S.__ngNextListenerFn__=i,_.__ngLastListenerFn__=i,C=!1}else{i=yu(r,e,p,i,!1);let S=n.listen(h,s,i);g.push(i,S),c&&c.push(s,m,f,f+1)}}else i=yu(r,e,p,i,!1);let y=r.outputs,l;if(C&&y!==null&&(l=y[s])){let d=l.length;if(d)for(let h=0;h<d;h+=2){let f=l[h],m=l[h+1],b=e[f][m].subscribe(i),v=g.length;g.push(i,b),c&&c.push(s,r.index,v,-(v+1))}}}function _u(t,e,n,r){let s=le(null);try{return it(6,e,n),n(r)!==!1}catch(i){return ed(t,i),!1}finally{it(7,e,n),le(s)}}function yu(t,e,n,r,s){return function i(o){if(o===Function)return r;let a=t.componentOffset>-1?Rn(t.index,e):e;Pa(a);let u=_u(e,n,r,o),c=i.__ngNextListenerFn__;for(;c;)u=_u(e,n,c,o)&&u,c=c.__ngNextListenerFn__;return s&&u===!1&&o.preventDefault(),u}}function pd(t,e,n){D_(t,e,n)}function Ua(t){let e=Me(),n=kn(),r=th();Ca(r+1);let s=Ba(n,r);if(t.dirty&&Qg(e)===((s.metadata.flags&2)===2)){if(s.matches===null)t.reset([]);else{let i=x_(e,r);t.reset(i,Om),t.notifyOnChanges()}return!0}return!1}function $a(){return w_(Me(),th())}function Va(t,e=""){let n=Me(),r=kn(),s=t+Wt,i=r.firstCreatePass?Oa(r,s,1,e,null):r.data[s],o=j_(r,n,i,e,t);n[s]=o,ch()&&Bh(r,n,o,i),ns(i,!1)}var j_=(t,e,n,r,s)=>(lh(!0),qm(e[Je],r));var U_=(()=>{let e=class e{constructor(r){this._injector=r,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(r){if(!r.standalone)return null;if(!this.cachedInjectors.has(r)){let s=Hu(!1,r.type),i=s.length>0?Ha([s],this._injector,`Standalone[${r.type.name}]`):null;this.cachedInjectors.set(r,i)}return this.cachedInjectors.get(r)}ngOnDestroy(){try{for(let r of this.cachedInjectors.values())r!==null&&r.destroy()}finally{this.cachedInjectors.clear()}}};e.\u0275prov=X({token:e,providedIn:"environment",factory:()=>new e(ce(ze))});let t=e;return t})();function Fn(t){cd("NgStandalone"),t.getStandaloneInjector=e=>e.get(U_).getOrCreateStandaloneInjector(t)}var as=(()=>{let e=class e{log(r){console.log(r)}warn(r){console.warn(r)}};e.\u0275fac=function(s){return new(s||e)},e.\u0275prov=X({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})();var gd=new ae("");function Ir(t){return!!t&&typeof t.then=="function"}function md(t){return!!t&&typeof t.subscribe=="function"}var vd=new ae(""),_d=(()=>{let e=class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,s)=>{this.resolve=r,this.reject=s}),this.appInits=V(vd,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let r=[];for(let i of this.appInits){let o=i();if(Ir(o))r.push(o);else if(md(o)){let a=new Promise((u,c)=>{o.subscribe({complete:u,error:c})});r.push(a)}}let s=()=>{this.done=!0,this.resolve()};Promise.all(r).then(()=>{s()}).catch(i=>{this.reject(i)}),r.length===0&&s(),this.initialized=!0}};e.\u0275fac=function(s){return new(s||e)},e.\u0275prov=X({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Wa=new ae("");function $_(){hl(()=>{throw new K(600,!1)})}function V_(t){return t.isBoundToModule}function W_(t,e,n){try{let r=n();return Ir(r)?r.catch(s=>{throw e.runOutsideAngular(()=>t.handleError(s)),s}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}var xr=(()=>{let e=class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=V(bh),this.afterRenderEffectManager=V(ld),this.externalTestViews=new Set,this.beforeRender=new Ae,this.afterTick=new Ae,this.componentTypes=[],this.components=[],this.isStable=V(os).hasPendingTasks.pipe(oe(r=>!r)),this._injector=V(ze)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(r,s){let i=r instanceof qi;if(!this._injector.get(_d).done){let y=!i&&Nu(r),l=!1;throw new K(405,l)}let a;i?a=r:a=this._injector.get(ss).resolveComponentFactory(r),this.componentTypes.push(a.componentType);let u=V_(a)?void 0:this._injector.get(kt),c=s||a.selector,p=a.create(br.NULL,[],c,u),g=p.location.nativeElement,C=p.injector.get(gd,null);return C?.registerApplication(g),p.onDestroy(()=>{this.detachView(p.hostView),Co(this.components,p),C?.unregisterApplication(g)}),this._loadComponent(p),p}tick(){this._tick(!0)}_tick(r){if(this._runningTick)throw new K(101,!1);let s=le(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(r)}catch(i){this.internalErrorHandler(i)}finally{this.afterTick.next(),this._runningTick=!1,le(s)}}detectChangesInAttachedViews(r){let s=0,i=this.afterRenderEffectManager;for(;;){if(s===rd)throw new K(103,!1);if(r){let o=s===0;this.beforeRender.next(o);for(let{_lView:a,notifyErrorHandler:u}of this._views)z_(a,o,u)}if(s++,i.executeInternalCallbacks(),![...this.externalTestViews.keys(),...this._views].some(({_lView:o})=>ra(o))&&(i.execute(),![...this.externalTestViews.keys(),...this._views].some(({_lView:o})=>ra(o))))break}}attachView(r){let s=r;this._views.push(s),s.attachToAppRef(this)}detachView(r){let s=r;Co(this._views,s),s.detachFromAppRef()}_loadComponent(r){this.attachView(r.hostView),this.tick(),this.components.push(r);let s=this._injector.get(Wa,[]);[...this._bootstrapListeners,...s].forEach(i=>i(r))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(r=>r()),this._views.slice().forEach(r=>r.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(r){return this._destroyListeners.push(r),()=>Co(this._destroyListeners,r)}destroy(){if(this._destroyed)throw new K(406,!1);let r=this._injector;r.destroy&&!r.destroyed&&r.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};e.\u0275fac=function(s){return new(s||e)},e.\u0275prov=X({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Co(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function z_(t,e,n){!e&&!ra(t)||q_(t,n,e)}function ra(t){return va(t)}function q_(t,e,n){let r;n?(r=0,t[G]|=1024):t[G]&64?r=0:r=1,id(t,e,r)}var ia=class{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},za=(()=>{let e=class e{compileModuleSync(r){return new ta(r)}compileModuleAsync(r){return Promise.resolve(this.compileModuleSync(r))}compileModuleAndAllComponentsSync(r){let s=this.compileModuleSync(r),i=Pu(r),o=kh(i.declarations).reduce((a,u)=>{let c=$t(u);return c&&a.push(new _r(c)),a},[]);return new ia(s,o)}compileModuleAndAllComponentsAsync(r){return Promise.resolve(this.compileModuleAndAllComponentsSync(r))}clearCache(){}clearCacheFor(r){}getModuleId(r){}};e.\u0275fac=function(s){return new(s||e)},e.\u0275prov=X({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var G_=(()=>{let e=class e{constructor(){this.zone=V(ye),this.applicationRef=V(xr)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};e.\u0275fac=function(s){return new(s||e)},e.\u0275prov=X({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function K_(t){return[{provide:ye,useFactory:t},{provide:En,multi:!0,useFactory:()=>{let e=V(G_,{optional:!0});return()=>e.initialize()}},{provide:En,multi:!0,useFactory:()=>{let e=V(X_);return()=>{e.initialize()}}},{provide:bh,useFactory:Y_}]}function Y_(){let t=V(ye),e=V(_t);return n=>t.runOutsideAngular(()=>e.handleError(n))}function Z_(t){let e=K_(()=>new ye(Q_(t)));return Xi([[],e])}function Q_(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var X_=(()=>{let e=class e{constructor(){this.subscription=new Ce,this.initialized=!1,this.zone=V(ye),this.pendingTasks=V(os)}initialize(){if(this.initialized)return;this.initialized=!0;let r=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(r=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{ye.assertNotInAngularZone(),queueMicrotask(()=>{r!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(r),r=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{ye.assertInAngularZone(),r??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}};e.\u0275fac=function(s){return new(s||e)},e.\u0275prov=X({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function J_(){return typeof $localize<"u"&&$localize.locale||Yi}var qa=new ae("",{providedIn:"root",factory:()=>V(qa,ee.Optional|ee.SkipSelf)||J_()});var yd=new ae("");var Ni=null;function ey(t=[],e){return br.create({name:e,providers:[{provide:Ji,useValue:"platform"},{provide:yd,useValue:new Set([()=>Ni=null])},...t]})}function ty(t=[]){if(Ni)return Ni;let e=ey(t);return Ni=e,$_(),ny(e),e}function ny(t){t.get(Ia,null)?.forEach(n=>n())}var Mr=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=ry;let t=e;return t})();function ry(t){return iy(ht(),Me(),(t&16)===16)}function iy(t,e,n){if(ga(t)&&!n){let r=Rn(t.index,e);return new Gt(r,r)}else if(t.type&47){let r=e[lt];return new Gt(r,e)}return null}function Cd(t){try{let{rootComponent:e,appProviders:n,platformProviders:r}=t,s=ty(r),i=[Z_(),...n||[]],a=new Ki({providers:i,parent:s,debugName:"",runEnvironmentInitializers:!1}).injector,u=a.get(ye);return u.run(()=>{a.resolveInjectorInitializers();let c=a.get(_t,null),p;u.runOutsideAngular(()=>{p=u.onError.subscribe({next:y=>{c.handleError(y)}})});let g=()=>a.destroy(),C=s.get(yd);return C.add(g),a.onDestroy(()=>{p.unsubscribe(),C.delete(g)}),W_(c,u,()=>{let y=a.get(_d);return y.runInitializers(),y.donePromise.then(()=>{let l=a.get(qa,Yi);F_(l||Yi);let d=a.get(xr);return e!==void 0&&d.bootstrap(e),d})})})}catch(e){return Promise.reject(e)}}var xd=null;function Bn(){return xd}function Md(t){xd??=t}var cs=class{};var qe=new ae(""),Td=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(s){return new(s||e)},e.\u0275prov=X({token:e,factory:()=>V(ly),providedIn:"platform"});let t=e;return t})();var ly=(()=>{let e=class e extends Td{constructor(){super(),this._doc=V(qe),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Bn().getBaseHref(this._doc)}onPopState(r){let s=Bn().getGlobalEventTarget(this._doc,"window");return s.addEventListener("popstate",r,!1),()=>s.removeEventListener("popstate",r)}onHashChange(r){let s=Bn().getGlobalEventTarget(this._doc,"window");return s.addEventListener("hashchange",r,!1),()=>s.removeEventListener("hashchange",r)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(r){this._location.pathname=r}pushState(r,s,i){this._history.pushState(r,s,i)}replaceState(r,s,i){this._history.replaceState(r,s,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(r=0){this._history.go(r)}getState(){return this._history.state}};e.\u0275fac=function(s){return new(s||e)},e.\u0275prov=X({token:e,factory:()=>new e,providedIn:"platform"});let t=e;return t})();function Ad(t,e){if(t.length==0)return e;if(e.length==0)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,n==2?t+e.substring(1):n==1?t+e:t+"/"+e}function Sd(t){let e=t.match(/#|\?|$/),n=e&&e.index||t.length,r=n-(t[n-1]==="/"?1:0);return t.slice(0,r)+t.slice(n)}function Xt(t){return t&&t[0]!=="?"?"?"+t:t}var us=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(s){return new(s||e)},e.\u0275prov=X({token:e,factory:()=>V(Rd),providedIn:"root"});let t=e;return t})(),uy=new ae(""),Rd=(()=>{let e=class e extends us{constructor(r,s){super(),this._platformLocation=r,this._removeListenerFns=[],this._baseHref=s??this._platformLocation.getBaseHrefFromDOM()??V(qe).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}prepareExternalUrl(r){return Ad(this._baseHref,r)}path(r=!1){let s=this._platformLocation.pathname+Xt(this._platformLocation.search),i=this._platformLocation.hash;return i&&r?`${s}${i}`:s}pushState(r,s,i,o){let a=this.prepareExternalUrl(i+Xt(o));this._platformLocation.pushState(r,s,a)}replaceState(r,s,i,o){let a=this.prepareExternalUrl(i+Xt(o));this._platformLocation.replaceState(r,s,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(s){return new(s||e)(ce(Td),ce(uy,8))},e.\u0275prov=X({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Ar=(()=>{let e=class e{constructor(r){this._subject=new We,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=r;let s=this._locationStrategy.getBaseHref();this._basePath=fy(Sd(wd(s))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(r=!1){return this.normalize(this._locationStrategy.path(r))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(r,s=""){return this.path()==this.normalize(r+Xt(s))}normalize(r){return e.stripTrailingSlash(dy(this._basePath,wd(r)))}prepareExternalUrl(r){return r&&r[0]!=="/"&&(r="/"+r),this._locationStrategy.prepareExternalUrl(r)}go(r,s="",i=null){this._locationStrategy.pushState(i,"",r,s),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+Xt(s)),i)}replaceState(r,s="",i=null){this._locationStrategy.replaceState(i,"",r,s),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+Xt(s)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(r=0){this._locationStrategy.historyGo?.(r)}onUrlChange(r){return this._urlChangeListeners.push(r),this._urlChangeSubscription??=this.subscribe(s=>{this._notifyUrlChangeListeners(s.url,s.state)}),()=>{let s=this._urlChangeListeners.indexOf(r);this._urlChangeListeners.splice(s,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(r="",s){this._urlChangeListeners.forEach(i=>i(r,s))}subscribe(r,s,i){return this._subject.subscribe({next:r,error:s,complete:i})}};e.normalizeQueryParams=Xt,e.joinWithSlash=Ad,e.stripTrailingSlash=Sd,e.\u0275fac=function(s){return new(s||e)(ce(us))},e.\u0275prov=X({token:e,factory:()=>hy(),providedIn:"root"});let t=e;return t})();function hy(){return new Ar(ce(us))}function dy(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function wd(t){return t.replace(/\/index.html$/,"")}function fy(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}function kd(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[s,i]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(s.trim()===e)return decodeURIComponent(i)}return null}var Od="browser",py="server";function Ga(t){return t===py}var ls=class{};var Za=class extends cs{constructor(){super(...arguments),this.supportsDOMEvents=!0}},Qa=class t extends Za{static makeCurrent(){Md(new t)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=my();return n==null?null:vy(n)}resetBaseElement(){Rr=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return kd(document.cookie,e)}},Rr=null;function my(){return Rr=Rr||document.querySelector("base"),Rr?Rr.getAttribute("href"):null}function vy(t){return new URL(t,document.baseURI).pathname}var _y=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(s){return new(s||e)},e.\u0275prov=X({token:e,factory:e.\u0275fac});let t=e;return t})(),Xa=new ae(""),Fd=(()=>{let e=class e{constructor(r,s){this._zone=s,this._eventNameToPlugin=new Map,r.forEach(i=>{i.manager=this}),this._plugins=r.slice().reverse()}addEventListener(r,s,i){return this._findPluginFor(s).addEventListener(r,s,i)}getZone(){return this._zone}_findPluginFor(r){let s=this._eventNameToPlugin.get(r);if(s)return s;if(s=this._plugins.find(o=>o.supports(r)),!s)throw new K(5101,!1);return this._eventNameToPlugin.set(r,s),s}};e.\u0275fac=function(s){return new(s||e)(ce(Xa),ce(ye))},e.\u0275prov=X({token:e,factory:e.\u0275fac});let t=e;return t})(),hs=class{constructor(e){this._doc=e}},Ka="ng-app-id",Bd=(()=>{let e=class e{constructor(r,s,i,o={}){this.doc=r,this.appId=s,this.nonce=i,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Ga(o),this.resetHostNodes()}addStyles(r){for(let s of r)this.changeUsageCount(s,1)===1&&this.onStyleAdded(s)}removeStyles(r){for(let s of r)this.changeUsageCount(s,-1)<=0&&this.onStyleRemoved(s)}ngOnDestroy(){let r=this.styleNodesInDOM;r&&(r.forEach(s=>s.remove()),r.clear());for(let s of this.getAllStyles())this.onStyleRemoved(s);this.resetHostNodes()}addHost(r){this.hostNodes.add(r);for(let s of this.getAllStyles())this.addStyleToHost(r,s)}removeHost(r){this.hostNodes.delete(r)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(r){for(let s of this.hostNodes)this.addStyleToHost(s,r)}onStyleRemoved(r){let s=this.styleRef;s.get(r)?.elements?.forEach(i=>i.remove()),s.delete(r)}collectServerRenderedStyles(){let r=this.doc.head?.querySelectorAll(`style[${Ka}="${this.appId}"]`);if(r?.length){let s=new Map;return r.forEach(i=>{i.textContent!=null&&s.set(i.textContent,i)}),s}return null}changeUsageCount(r,s){let i=this.styleRef;if(i.has(r)){let o=i.get(r);return o.usage+=s,o.usage}return i.set(r,{usage:s,elements:[]}),s}getStyleElement(r,s){let i=this.styleNodesInDOM,o=i?.get(s);if(o?.parentNode===r)return i.delete(s),o.removeAttribute(Ka),o;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=s,this.platformIsServer&&a.setAttribute(Ka,this.appId),r.appendChild(a),a}}addStyleToHost(r,s){let i=this.getStyleElement(r,s),o=this.styleRef,a=o.get(s)?.elements;a?a.push(i):o.set(s,{elements:[i],usage:1})}resetHostNodes(){let r=this.hostNodes;r.clear(),r.add(this.doc.head)}};e.\u0275fac=function(s){return new(s||e)(ce(qe),ce(Ea),ce(xa,8),ce(Ln))},e.\u0275prov=X({token:e,factory:e.\u0275fac});let t=e;return t})(),Ya={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},ec=/%COMP%/g,Hd="%COMP%",yy=`_nghost-${Hd}`,Cy=`_ngcontent-${Hd}`,Sy=!0,wy=new ae("",{providedIn:"root",factory:()=>Sy});function by(t){return Cy.replace(ec,t)}function Dy(t){return yy.replace(ec,t)}function jd(t,e){return e.map(n=>n.replace(ec,t))}var Ld=(()=>{let e=class e{constructor(r,s,i,o,a,u,c,p=null){this.eventManager=r,this.sharedStylesHost=s,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=a,this.platformId=u,this.ngZone=c,this.nonce=p,this.rendererByCompId=new Map,this.platformIsServer=Ga(u),this.defaultRenderer=new kr(r,a,c,this.platformIsServer)}createRenderer(r,s){if(!r||!s)return this.defaultRenderer;this.platformIsServer&&s.encapsulation===ot.ShadowDom&&(s=_e(z({},s),{encapsulation:ot.Emulated}));let i=this.getOrCreateRenderer(r,s);return i instanceof ds?i.applyToHost(r):i instanceof Or&&i.applyStyles(),i}getOrCreateRenderer(r,s){let i=this.rendererByCompId,o=i.get(s.id);if(!o){let a=this.doc,u=this.ngZone,c=this.eventManager,p=this.sharedStylesHost,g=this.removeStylesOnCompDestroy,C=this.platformIsServer;switch(s.encapsulation){case ot.Emulated:o=new ds(c,p,s,this.appId,g,a,u,C);break;case ot.ShadowDom:return new Ja(c,p,r,s,a,u,this.nonce,C);default:o=new Or(c,p,s,g,a,u,C);break}i.set(s.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(s){return new(s||e)(ce(Fd),ce(Bd),ce(Ea),ce(wy),ce(qe),ce(Ln),ce(ye),ce(xa))},e.\u0275prov=X({token:e,factory:e.\u0275fac});let t=e;return t})(),kr=class{constructor(e,n,r,s){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=s,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(Ya[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(Nd(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(Nd(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new K(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,s){if(s){n=s+":"+n;let i=Ya[s];i?e.setAttributeNS(i,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let s=Ya[r];s?e.removeAttributeNS(s,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,s){s&(Zt.DashCase|Zt.Important)?e.style.setProperty(n,r,s&Zt.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&Zt.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r){if(typeof e=="string"&&(e=Bn().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function Nd(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var Ja=class extends kr{constructor(e,n,r,s,i,o,a,u){super(e,i,o,u),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let c=jd(s.id,s.styles);for(let p of c){let g=document.createElement("style");a&&g.setAttribute("nonce",a),g.textContent=p,this.shadowRoot.appendChild(g)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Or=class extends kr{constructor(e,n,r,s,i,o,a,u){super(e,i,o,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=s,this.styles=u?jd(u,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},ds=class extends Or{constructor(e,n,r,s,i,o,a,u){let c=s+"-"+r.id;super(e,n,r,i,o,a,u,c),this.contentAttr=by(c),this.hostAttr=Dy(c)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}},Ey=(()=>{let e=class e extends hs{constructor(r){super(r)}supports(r){return!0}addEventListener(r,s,i){return r.addEventListener(s,i,!1),()=>this.removeEventListener(r,s,i)}removeEventListener(r,s,i){return r.removeEventListener(s,i)}};e.\u0275fac=function(s){return new(s||e)(ce(qe))},e.\u0275prov=X({token:e,factory:e.\u0275fac});let t=e;return t})(),Pd=["alt","control","meta","shift"],Iy={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},xy={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},My=(()=>{let e=class e extends hs{constructor(r){super(r)}supports(r){return e.parseEventName(r)!=null}addEventListener(r,s,i){let o=e.parseEventName(s),a=e.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Bn().onAndCancel(r,o.domEventName,a))}static parseEventName(r){let s=r.toLowerCase().split("."),i=s.shift();if(s.length===0||!(i==="keydown"||i==="keyup"))return null;let o=e._normalizeKey(s.pop()),a="",u=s.indexOf("code");if(u>-1&&(s.splice(u,1),a="code."),Pd.forEach(p=>{let g=s.indexOf(p);g>-1&&(s.splice(g,1),a+=p+".")}),a+=o,s.length!=0||o.length===0)return null;let c={};return c.domEventName=i,c.fullKey=a,c}static matchEventFullKeyCode(r,s){let i=Iy[r.key]||r.key,o="";return s.indexOf("code.")>-1&&(i=r.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),Pd.forEach(a=>{if(a!==i){let u=xy[a];u(r)&&(o+=a+".")}}),o+=i,o===s)}static eventCallback(r,s,i){return o=>{e.matchEventFullKeyCode(o,r)&&i.runGuarded(()=>s(o))}}static _normalizeKey(r){return r==="esc"?"escape":r}};e.\u0275fac=function(s){return new(s||e)(ce(qe))},e.\u0275prov=X({token:e,factory:e.\u0275fac});let t=e;return t})();function Ud(t,e){return Cd(z({rootComponent:t},Ty(e)))}function Ty(t){return{appProviders:[...Ly,...t?.providers??[]],platformProviders:Oy}}function Ay(){Qa.makeCurrent()}function Ry(){return new _t}function ky(){return Ah(document),document}var Oy=[{provide:Ln,useValue:Od},{provide:Ia,useValue:Ay,multi:!0},{provide:qe,useFactory:ky,deps:[]}];var Ly=[{provide:Ji,useValue:"root"},{provide:_t,useFactory:Ry,deps:[]},{provide:Xa,useClass:Ey,multi:!0,deps:[qe,ye,Ln]},{provide:Xa,useClass:My,multi:!0,deps:[qe]},Ld,Bd,Fd,{provide:vr,useExisting:Ld},{provide:ls,useClass:_y,deps:[]},[]];var $d=(()=>{let e=class e{constructor(r){this._doc=r}getTitle(){return this._doc.title}setTitle(r){this._doc.title=r||""}};e.\u0275fac=function(s){return new(s||e)(ce(qe))},e.\u0275prov=X({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var J="primary",Kr=Symbol("RouteTitle"),sc=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function Vn(t){return new sc(t)}function Py(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let s={};for(let i=0;i<r.length;i++){let o=r[i],a=t[i];if(o.startsWith(":"))s[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:s}}function Fy(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!dt(t[n],e[n]))return!1;return!0}function dt(t,e){let n=t?oc(t):void 0,r=e?oc(e):void 0;if(!n||!r||n.length!=r.length)return!1;let s;for(let i=0;i<n.length;i++)if(s=n[i],!Kd(t[s],e[s]))return!1;return!0}function oc(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function Kd(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((s,i)=>r[i]===s)}else return t===e}function Yd(t){return t.length>0?t[t.length-1]:null}function Nt(t){return ro(t)?t:Ir(t)?Se(Promise.resolve(t)):Z(t)}var By={exact:Qd,subset:Xd},Zd={exact:Hy,subset:jy,ignored:()=>!0};function Vd(t,e,n){return By[n.paths](t.root,e.root,n.matrixParams)&&Zd[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function Hy(t,e){return dt(t,e)}function Qd(t,e,n){if(!en(t.segments,e.segments)||!gs(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!Qd(t.children[r],e.children[r],n))return!1;return!0}function jy(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>Kd(t[n],e[n]))}function Xd(t,e,n){return Jd(t,e,e.segments,n)}function Jd(t,e,n,r){if(t.segments.length>n.length){let s=t.segments.slice(0,n.length);return!(!en(s,n)||e.hasChildren()||!gs(s,n,r))}else if(t.segments.length===n.length){if(!en(t.segments,n)||!gs(t.segments,n,r))return!1;for(let s in e.children)if(!t.children[s]||!Xd(t.children[s],e.children[s],r))return!1;return!0}else{let s=n.slice(0,t.segments.length),i=n.slice(t.segments.length);return!en(t.segments,s)||!gs(t.segments,s,r)||!t.children[J]?!1:Jd(t.children[J],e,i,r)}}function gs(t,e,n){return e.every((r,s)=>Zd[n](t[s].parameters,r.parameters))}var Ot=class{constructor(e=new he([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Vn(this.queryParams),this._queryParamMap}toString(){return Vy.serialize(this)}},he=class{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return ms(this)}},Jt=class{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=Vn(this.parameters),this._parameterMap}toString(){return tf(this)}};function Uy(t,e){return en(t,e)&&t.every((n,r)=>dt(n.parameters,e[r].parameters))}function en(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function $y(t,e){let n=[];return Object.entries(t.children).forEach(([r,s])=>{r===J&&(n=n.concat(e(s,r)))}),Object.entries(t.children).forEach(([r,s])=>{r!==J&&(n=n.concat(e(s,r)))}),n}var kc=(()=>{let e=class e{};e.\u0275fac=function(s){return new(s||e)},e.\u0275prov=X({token:e,factory:()=>new _s,providedIn:"root"});let t=e;return t})(),_s=class{parse(e){let n=new cc(e);return new Ot(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${Lr(e.root,!0)}`,r=qy(e.queryParams),s=typeof e.fragment=="string"?`#${Wy(e.fragment)}`:"";return`${n}${r}${s}`}},Vy=new _s;function ms(t){return t.segments.map(e=>tf(e)).join("/")}function Lr(t,e){if(!t.hasChildren())return ms(t);if(e){let n=t.children[J]?Lr(t.children[J],!1):"",r=[];return Object.entries(t.children).forEach(([s,i])=>{s!==J&&r.push(`${s}:${Lr(i,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=$y(t,(r,s)=>s===J?[Lr(t.children[J],!1)]:[`${s}:${Lr(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[J]!=null?`${ms(t)}/${n[0]}`:`${ms(t)}/(${n.join("//")})`}}function ef(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function fs(t){return ef(t).replace(/%3B/gi,";")}function Wy(t){return encodeURI(t)}function ac(t){return ef(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function vs(t){return decodeURIComponent(t)}function Wd(t){return vs(t.replace(/\+/g,"%20"))}function tf(t){return`${ac(t.path)}${zy(t.parameters)}`}function zy(t){return Object.entries(t).map(([e,n])=>`;${ac(e)}=${ac(n)}`).join("")}function qy(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(s=>`${fs(n)}=${fs(s)}`).join("&"):`${fs(n)}=${fs(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var Gy=/^[^\/()?;#]+/;function tc(t){let e=t.match(Gy);return e?e[0]:""}var Ky=/^[^\/()?;=#]+/;function Yy(t){let e=t.match(Ky);return e?e[0]:""}var Zy=/^[^=?&#]+/;function Qy(t){let e=t.match(Zy);return e?e[0]:""}var Xy=/^[^&#]+/;function Jy(t){let e=t.match(Xy);return e?e[0]:""}var cc=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new he([],{}):new he([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[J]=new he(e,n)),r}parseSegment(){let e=tc(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new K(4009,!1);return this.capture(e),new Jt(vs(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=Yy(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let s=tc(this.remaining);s&&(r=s,this.capture(r))}e[vs(n)]=vs(r)}parseQueryParam(e){let n=Qy(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let o=Jy(this.remaining);o&&(r=o,this.capture(r))}let s=Wd(n),i=Wd(r);if(e.hasOwnProperty(s)){let o=e[s];Array.isArray(o)||(o=[o],e[s]=o),o.push(i)}else e[s]=i}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=tc(this.remaining),s=this.remaining[r.length];if(s!=="/"&&s!==")"&&s!==";")throw new K(4010,!1);let i;r.indexOf(":")>-1?(i=r.slice(0,r.indexOf(":")),this.capture(i),this.capture(":")):e&&(i=J);let o=this.parseChildren();n[i]=Object.keys(o).length===1?o[J]:new he([],o),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new K(4011,!1)}};function nf(t){return t.segments.length>0?new he([],{[J]:t}):t}function rf(t){let e={};for(let[r,s]of Object.entries(t.children)){let i=rf(s);if(r===J&&i.segments.length===0&&i.hasChildren())for(let[o,a]of Object.entries(i.children))e[o]=a;else(i.segments.length>0||i.hasChildren())&&(e[r]=i)}let n=new he(t.segments,e);return e0(n)}function e0(t){if(t.numberOfChildren===1&&t.children[J]){let e=t.children[J];return new he(t.segments.concat(e.segments),e.children)}return t}function Wn(t){return t instanceof Ot}function t0(t,e,n=null,r=null){let s=sf(t);return of(s,e,n,r)}function sf(t){let e;function n(i){let o={};for(let u of i.children){let c=n(u);o[u.outlet]=c}let a=new he(i.url,o);return i===t&&(e=a),a}let r=n(t.root),s=nf(r);return e??s}function of(t,e,n,r){let s=t;for(;s.parent;)s=s.parent;if(e.length===0)return nc(s,s,s,n,r);let i=n0(e);if(i.toRoot())return nc(s,s,new he([],{}),n,r);let o=r0(i,s,t),a=o.processChildren?Fr(o.segmentGroup,o.index,i.commands):cf(o.segmentGroup,o.index,i.commands);return nc(s,o.segmentGroup,a,n,r)}function ys(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function jr(t){return typeof t=="object"&&t!=null&&t.outlets}function nc(t,e,n,r,s){let i={};r&&Object.entries(r).forEach(([u,c])=>{i[u]=Array.isArray(c)?c.map(p=>`${p}`):`${c}`});let o;t===e?o=n:o=af(t,e,n);let a=nf(rf(o));return new Ot(a,i,s)}function af(t,e,n){let r={};return Object.entries(t.children).forEach(([s,i])=>{i===e?r[s]=n:r[s]=af(i,e,n)}),new he(t.segments,r)}var Cs=class{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&ys(r[0]))throw new K(4003,!1);let s=r.find(jr);if(s&&s!==Yd(r))throw new K(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function n0(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new Cs(!0,0,t);let e=0,n=!1,r=t.reduce((s,i,o)=>{if(typeof i=="object"&&i!=null){if(i.outlets){let a={};return Object.entries(i.outlets).forEach(([u,c])=>{a[u]=typeof c=="string"?c.split("/"):c}),[...s,{outlets:a}]}if(i.segmentPath)return[...s,i.segmentPath]}return typeof i!="string"?[...s,i]:o===0?(i.split("/").forEach((a,u)=>{u==0&&a==="."||(u==0&&a===""?n=!0:a===".."?e++:a!=""&&s.push(a))}),s):[...s,i]},[]);return new Cs(n,e,r)}var Un=class{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function r0(t,e,n){if(t.isAbsolute)return new Un(e,!0,0);if(!n)return new Un(e,!1,NaN);if(n.parent===null)return new Un(n,!0,0);let r=ys(t.commands[0])?0:1,s=n.segments.length-1+r;return i0(n,s,t.numberOfDoubleDots)}function i0(t,e,n){let r=t,s=e,i=n;for(;i>s;){if(i-=s,r=r.parent,!r)throw new K(4005,!1);s=r.segments.length}return new Un(r,!1,s-i)}function s0(t){return jr(t[0])?t[0].outlets:{[J]:t}}function cf(t,e,n){if(t??=new he([],{}),t.segments.length===0&&t.hasChildren())return Fr(t,e,n);let r=o0(t,e,n),s=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let i=new he(t.segments.slice(0,r.pathIndex),{});return i.children[J]=new he(t.segments.slice(r.pathIndex),t.children),Fr(i,0,s)}else return r.match&&s.length===0?new he(t.segments,{}):r.match&&!t.hasChildren()?lc(t,e,n):r.match?Fr(t,0,s):lc(t,e,n)}function Fr(t,e,n){if(n.length===0)return new he(t.segments,{});{let r=s0(n),s={};if(Object.keys(r).some(i=>i!==J)&&t.children[J]&&t.numberOfChildren===1&&t.children[J].segments.length===0){let i=Fr(t.children[J],e,n);return new he(t.segments,i.children)}return Object.entries(r).forEach(([i,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(s[i]=cf(t.children[i],e,o))}),Object.entries(t.children).forEach(([i,o])=>{r[i]===void 0&&(s[i]=o)}),new he(t.segments,s)}}function o0(t,e,n){let r=0,s=e,i={match:!1,pathIndex:0,commandIndex:0};for(;s<t.segments.length;){if(r>=n.length)return i;let o=t.segments[s],a=n[r];if(jr(a))break;let u=`${a}`,c=r<n.length-1?n[r+1]:null;if(s>0&&u===void 0)break;if(u&&c&&typeof c=="object"&&c.outlets===void 0){if(!qd(u,c,o))return i;r+=2}else{if(!qd(u,{},o))return i;r++}s++}return{match:!0,pathIndex:s,commandIndex:r}}function lc(t,e,n){let r=t.segments.slice(0,e),s=0;for(;s<n.length;){let i=n[s];if(jr(i)){let u=a0(i.outlets);return new he(r,u)}if(s===0&&ys(n[0])){let u=t.segments[e];r.push(new Jt(u.path,zd(n[0]))),s++;continue}let o=jr(i)?i.outlets[J]:`${i}`,a=s<n.length-1?n[s+1]:null;o&&a&&ys(a)?(r.push(new Jt(o,zd(a))),s+=2):(r.push(new Jt(o,{})),s++)}return new he(r,{})}function a0(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=lc(new he([],{}),0,r))}),e}function zd(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function qd(t,e,n){return t==n.path&&dt(e,n.parameters)}var Br="imperative",Te=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(Te||{}),Ge=class{constructor(e,n){this.id=e,this.url=n}},Ur=class extends Ge{constructor(e,n,r="imperative",s=null){super(e,n),this.type=Te.NavigationStart,this.navigationTrigger=r,this.restoredState=s}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},tn=class extends Ge{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=Te.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},He=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(He||{}),uc=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(uc||{}),Lt=class extends Ge{constructor(e,n,r,s){super(e,n),this.reason=r,this.code=s,this.type=Te.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},nn=class extends Ge{constructor(e,n,r,s){super(e,n),this.reason=r,this.code=s,this.type=Te.NavigationSkipped}},$r=class extends Ge{constructor(e,n,r,s){super(e,n),this.error=r,this.target=s,this.type=Te.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Ss=class extends Ge{constructor(e,n,r,s){super(e,n),this.urlAfterRedirects=r,this.state=s,this.type=Te.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},hc=class extends Ge{constructor(e,n,r,s){super(e,n),this.urlAfterRedirects=r,this.state=s,this.type=Te.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},dc=class extends Ge{constructor(e,n,r,s,i){super(e,n),this.urlAfterRedirects=r,this.state=s,this.shouldActivate=i,this.type=Te.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},fc=class extends Ge{constructor(e,n,r,s){super(e,n),this.urlAfterRedirects=r,this.state=s,this.type=Te.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},pc=class extends Ge{constructor(e,n,r,s){super(e,n),this.urlAfterRedirects=r,this.state=s,this.type=Te.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},gc=class{constructor(e){this.route=e,this.type=Te.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},mc=class{constructor(e){this.route=e,this.type=Te.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},vc=class{constructor(e){this.snapshot=e,this.type=Te.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},_c=class{constructor(e){this.snapshot=e,this.type=Te.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},yc=class{constructor(e){this.snapshot=e,this.type=Te.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Cc=class{constructor(e){this.snapshot=e,this.type=Te.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var Vr=class{},Wr=class{constructor(e){this.url=e}};var Sc=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new xs,this.attachRef=null}},xs=(()=>{let e=class e{constructor(){this.contexts=new Map}onChildOutletCreated(r,s){let i=this.getOrCreateContext(r);i.outlet=s,this.contexts.set(r,i)}onChildOutletDestroyed(r){let s=this.getContext(r);s&&(s.outlet=null,s.attachRef=null)}onOutletDeactivated(){let r=this.contexts;return this.contexts=new Map,r}onOutletReAttached(r){this.contexts=r}getOrCreateContext(r){let s=this.getContext(r);return s||(s=new Sc,this.contexts.set(r,s)),s}getContext(r){return this.contexts.get(r)||null}};e.\u0275fac=function(s){return new(s||e)},e.\u0275prov=X({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),ws=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=wc(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=wc(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=bc(e,this._root);return n.length<2?[]:n[n.length-2].children.map(s=>s.value).filter(s=>s!==e)}pathFromRoot(e){return bc(e,this._root).map(n=>n.value)}};function wc(t,e){if(t===e.value)return e;for(let n of e.children){let r=wc(t,n);if(r)return r}return null}function bc(t,e){if(t===e.value)return[e];for(let n of e.children){let r=bc(t,n);if(r.length)return r.unshift(e),r}return[]}var Be=class{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function jn(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var bs=class extends ws{constructor(e,n){super(e),this.snapshot=n,Lc(this,e)}toString(){return this.snapshot.toString()}};function lf(t){let e=c0(t),n=new Ee([new Jt("",{})]),r=new Ee({}),s=new Ee({}),i=new Ee({}),o=new Ee(""),a=new zn(n,r,i,o,s,J,t,e.root);return a.snapshot=e.root,new bs(new Be(a,[]),e)}function c0(t){let e={},n={},r={},s="",i=new zr([],e,r,s,n,J,t,null,{});return new Ds("",new Be(i,[]))}var zn=class{constructor(e,n,r,s,i,o,a,u){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=s,this.dataSubject=i,this.outlet=o,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(oe(c=>c[Kr]))??Z(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=s,this.data=i}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(oe(e=>Vn(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(oe(e=>Vn(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Oc(t,e,n="emptyOnly"){let r,{routeConfig:s}=t;return e!==null&&(n==="always"||s?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:z(z({},e.params),t.params),data:z(z({},e.data),t.data),resolve:z(z(z(z({},t.data),e.data),s?.data),t._resolvedData)}:r={params:z({},t.params),data:z({},t.data),resolve:z(z({},t.data),t._resolvedData??{})},s&&hf(s)&&(r.resolve[Kr]=s.title),r}var zr=class{get title(){return this.data?.[Kr]}constructor(e,n,r,s,i,o,a,u,c){this.url=e,this.params=n,this.queryParams=r,this.fragment=s,this.data=i,this.outlet=o,this.component=a,this.routeConfig=u,this._resolve=c}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Vn(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Vn(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},Ds=class extends ws{constructor(e,n){super(n),this.url=e,Lc(this,n)}toString(){return uf(this._root)}};function Lc(t,e){e.value._routerState=t,e.children.forEach(n=>Lc(t,n))}function uf(t){let e=t.children.length>0?` { ${t.children.map(uf).join(", ")} } `:"";return`${t.value}${e}`}function rc(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,dt(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),dt(e.params,n.params)||t.paramsSubject.next(n.params),Fy(e.url,n.url)||t.urlSubject.next(n.url),dt(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function Dc(t,e){let n=dt(t.params,e.params)&&Uy(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||Dc(t.parent,e.parent))}function hf(t){return typeof t.title=="string"||t.title===null}var l0=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=J,this.activateEvents=new We,this.deactivateEvents=new We,this.attachEvents=new We,this.detachEvents=new We,this.parentContexts=V(xs),this.location=V(Nn),this.changeDetector=V(Mr),this.environmentInjector=V(ze),this.inputBinder=V(Nc,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(r){if(r.name){let{firstChange:s,previousValue:i}=r.name;if(s)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(r){return this.parentContexts.getContext(r)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let r=this.parentContexts.getContext(this.name);r?.route&&(r.attachRef?this.attach(r.attachRef,r.route):this.activateWith(r.route,r.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new K(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new K(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new K(4012,!1);this.location.detach();let r=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(r.instance),r}attach(r,s){this.activated=r,this._activatedRoute=s,this.location.insert(r.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(r.instance)}deactivate(){if(this.activated){let r=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(r)}}activateWith(r,s){if(this.isActivated)throw new K(4013,!1);this._activatedRoute=r;let i=this.location,a=r.snapshot.component,u=this.parentContexts.getOrCreateContext(this.name).children,c=new Ec(r,u,i.injector);this.activated=i.createComponent(a,{index:i.length,injector:c,environmentInjector:s??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(s){return new(s||e)},e.\u0275dir=ha({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[ts]});let t=e;return t})(),Ec=class t{__ngOutletInjector(e){return new t(this.route,this.childContexts,e)}constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===zn?this.route:e===xs?this.childContexts:this.parent.get(e,n)}},Nc=new ae("");function u0(t,e,n){let r=qr(t,e._root,n?n._root:void 0);return new bs(r,e)}function qr(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let s=h0(t,e,n);return new Be(r,s)}else{if(t.shouldAttach(e.value)){let i=t.retrieve(e.value);if(i!==null){let o=i.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>qr(t,a)),o}}let r=d0(e.value),s=e.children.map(i=>qr(t,i));return new Be(r,s)}}function h0(t,e,n){return e.children.map(r=>{for(let s of n.children)if(t.shouldReuseRoute(r.value,s.value.snapshot))return qr(t,r,s);return qr(t,r)})}function d0(t){return new zn(new Ee(t.url),new Ee(t.params),new Ee(t.queryParams),new Ee(t.fragment),new Ee(t.data),t.outlet,t.component,t)}var df="ngNavigationCancelingError";function ff(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=Wn(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,s=pf(!1,He.Redirect);return s.url=n,s.navigationBehaviorOptions=r,s}function pf(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[df]=!0,n.cancellationCode=e,n}function f0(t){return gf(t)&&Wn(t.url)}function gf(t){return!!t&&t[df]}var p0=(()=>{let e=class e{};e.\u0275fac=function(s){return new(s||e)},e.\u0275cmp=An({type:e,selectors:[["ng-component"]],standalone:!0,features:[Fn],decls:1,vars:0,template:function(s,i){s&1&&Qt(0,"router-outlet")},dependencies:[l0],encapsulation:2});let t=e;return t})();function g0(t,e){return t.providers&&!t._injector&&(t._injector=Ha(t.providers,e,`Route: ${t.path}`)),t._injector??e}function Pc(t){let e=t.children&&t.children.map(Pc),n=e?_e(z({},t),{children:e}):z({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==J&&(n.component=p0),n}function ft(t){return t.outlet||J}function m0(t,e){let n=t.filter(r=>ft(r)===e);return n.push(...t.filter(r=>ft(r)!==e)),n}function Yr(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var v0=(t,e,n,r)=>oe(s=>(new Ic(e,s.targetRouterState,s.currentRouterState,n,r).activate(t),s)),Ic=class{constructor(e,n,r,s,i){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=s,this.inputBindingEnabled=i}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),rc(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let s=jn(n);e.children.forEach(i=>{let o=i.value.outlet;this.deactivateRoutes(i,s[o],r),delete s[o]}),Object.values(s).forEach(i=>{this.deactivateRouteAndItsChildren(i,r)})}deactivateRoutes(e,n,r){let s=e.value,i=n?n.value:null;if(s===i)if(s.component){let o=r.getContext(s.outlet);o&&this.deactivateChildRoutes(e,n,o.children)}else this.deactivateChildRoutes(e,n,r);else i&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),s=r&&e.value.component?r.children:n,i=jn(e);for(let o of Object.values(i))this.deactivateRouteAndItsChildren(o,s);if(r&&r.outlet){let o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),s=r&&e.value.component?r.children:n,i=jn(e);for(let o of Object.values(i))this.deactivateRouteAndItsChildren(o,s);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let s=jn(n);e.children.forEach(i=>{this.activateRoutes(i,s[i.value.outlet],r),this.forwardEvent(new Cc(i.value.snapshot))}),e.children.length&&this.forwardEvent(new _c(e.value.snapshot))}activateRoutes(e,n,r){let s=e.value,i=n?n.value:null;if(rc(s),s===i)if(s.component){let o=r.getOrCreateContext(s.outlet);this.activateChildRoutes(e,n,o.children)}else this.activateChildRoutes(e,n,r);else if(s.component){let o=r.getOrCreateContext(s.outlet);if(this.routeReuseStrategy.shouldAttach(s.snapshot)){let a=this.routeReuseStrategy.retrieve(s.snapshot);this.routeReuseStrategy.store(s.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),rc(a.route.value),this.activateChildRoutes(e,null,o.children)}else{let a=Yr(s.snapshot);o.attachRef=null,o.route=s,o.injector=a,o.outlet&&o.outlet.activateWith(s,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,r)}},Es=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},$n=class{constructor(e,n){this.component=e,this.route=n}};function _0(t,e,n){let r=t._root,s=e?e._root:null;return Nr(r,s,n,[r.value])}function y0(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function Gn(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!wu(t)?t:e.get(t):r}function Nr(t,e,n,r,s={canDeactivateChecks:[],canActivateChecks:[]}){let i=jn(e);return t.children.forEach(o=>{C0(o,i[o.value.outlet],n,r.concat([o.value]),s),delete i[o.value.outlet]}),Object.entries(i).forEach(([o,a])=>Hr(a,n.getContext(o),s)),s}function C0(t,e,n,r,s={canDeactivateChecks:[],canActivateChecks:[]}){let i=t.value,o=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(o&&i.routeConfig===o.routeConfig){let u=S0(o,i,i.routeConfig.runGuardsAndResolvers);u?s.canActivateChecks.push(new Es(r)):(i.data=o.data,i._resolvedData=o._resolvedData),i.component?Nr(t,e,a?a.children:null,r,s):Nr(t,e,n,r,s),u&&a&&a.outlet&&a.outlet.isActivated&&s.canDeactivateChecks.push(new $n(a.outlet.component,o))}else o&&Hr(e,a,s),s.canActivateChecks.push(new Es(r)),i.component?Nr(t,null,a?a.children:null,r,s):Nr(t,null,n,r,s);return s}function S0(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!en(t.url,e.url);case"pathParamsOrQueryParamsChange":return!en(t.url,e.url)||!dt(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Dc(t,e)||!dt(t.queryParams,e.queryParams);case"paramsChange":default:return!Dc(t,e)}}function Hr(t,e,n){let r=jn(t),s=t.value;Object.entries(r).forEach(([i,o])=>{s.component?e?Hr(o,e.children.getContext(i),n):Hr(o,null,n):Hr(o,e,n)}),s.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new $n(e.outlet.component,s)):n.canDeactivateChecks.push(new $n(null,s)):n.canDeactivateChecks.push(new $n(null,s))}function Zr(t){return typeof t=="function"}function w0(t){return typeof t=="boolean"}function b0(t){return t&&Zr(t.canLoad)}function D0(t){return t&&Zr(t.canActivate)}function E0(t){return t&&Zr(t.canActivateChild)}function I0(t){return t&&Zr(t.canDeactivate)}function x0(t){return t&&Zr(t.canMatch)}function mf(t){return t instanceof pt||t?.name==="EmptyError"}var ps=Symbol("INITIAL_VALUE");function qn(){return Ze(t=>xi(t.map(e=>e.pipe(gt(1),co(ps)))).pipe(oe(e=>{for(let n of e)if(n!==!0){if(n===ps)return ps;if(n===!1||n instanceof Ot)return n}return!0}),Ye(e=>e!==ps),gt(1)))}function M0(t,e){return we(n=>{let{targetSnapshot:r,currentSnapshot:s,guards:{canActivateChecks:i,canDeactivateChecks:o}}=n;return o.length===0&&i.length===0?Z(_e(z({},n),{guardsResult:!0})):T0(o,r,s,t).pipe(we(a=>a&&w0(a)?A0(r,i,t,e):Z(a)),oe(a=>_e(z({},n),{guardsResult:a})))})}function T0(t,e,n,r){return Se(t).pipe(we(s=>N0(s.component,s.route,n,e,r)),rt(s=>s!==!0,!0))}function A0(t,e,n,r){return Se(e).pipe(gn(s=>pn(k0(s.route.parent,r),R0(s.route,r),L0(t,s.path,n),O0(t,s.route,n))),rt(s=>s!==!0,!0))}function R0(t,e){return t!==null&&e&&e(new yc(t)),Z(!0)}function k0(t,e){return t!==null&&e&&e(new vc(t)),Z(!0)}function O0(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return Z(!0);let s=r.map(i=>Mi(()=>{let o=Yr(e)??n,a=Gn(i,o),u=D0(a)?a.canActivate(e,t):Kt(o,()=>a(e,t));return Nt(u).pipe(rt())}));return Z(s).pipe(qn())}function L0(t,e,n){let r=e[e.length-1],i=e.slice(0,e.length-1).reverse().map(o=>y0(o)).filter(o=>o!==null).map(o=>Mi(()=>{let a=o.guards.map(u=>{let c=Yr(o.node)??n,p=Gn(u,c),g=E0(p)?p.canActivateChild(r,t):Kt(c,()=>p(r,t));return Nt(g).pipe(rt())});return Z(a).pipe(qn())}));return Z(i).pipe(qn())}function N0(t,e,n,r,s){let i=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!i||i.length===0)return Z(!0);let o=i.map(a=>{let u=Yr(e)??s,c=Gn(a,u),p=I0(c)?c.canDeactivate(t,e,n,r):Kt(u,()=>c(t,e,n,r));return Nt(p).pipe(rt())});return Z(o).pipe(qn())}function P0(t,e,n,r){let s=e.canLoad;if(s===void 0||s.length===0)return Z(!0);let i=s.map(o=>{let a=Gn(o,t),u=b0(a)?a.canLoad(e,n):Kt(t,()=>a(e,n));return Nt(u)});return Z(i).pipe(qn(),vf(r))}function vf(t){return Js(Ie(e=>{if(Wn(e))throw ff(t,e)}),oe(e=>e===!0))}function F0(t,e,n,r){let s=e.canMatch;if(!s||s.length===0)return Z(!0);let i=s.map(o=>{let a=Gn(o,t),u=x0(a)?a.canMatch(e,n):Kt(t,()=>a(e,n));return Nt(u)});return Z(i).pipe(qn(),vf(r))}var Gr=class{constructor(e){this.segmentGroup=e||null}},Is=class extends Error{constructor(e){super(),this.urlTree=e}};function Hn(t){return fn(new Gr(t))}function B0(t){return fn(new K(4e3,!1))}function H0(t){return fn(pf(!1,He.GuardRejected))}var xc=class{constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],s=n.root;for(;;){if(r=r.concat(s.segments),s.numberOfChildren===0)return Z(r);if(s.numberOfChildren>1||!s.children[J])return B0(e.redirectTo);s=s.children[J]}}applyRedirectCommands(e,n,r){let s=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r);if(n.startsWith("/"))throw new Is(s);return s}applyRedirectCreateUrlTree(e,n,r,s){let i=this.createSegmentGroup(e,n.root,r,s);return new Ot(i,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([s,i])=>{if(typeof i=="string"&&i.startsWith(":")){let a=i.substring(1);r[s]=n[a]}else r[s]=i}),r}createSegmentGroup(e,n,r,s){let i=this.createSegments(e,n.segments,r,s),o={};return Object.entries(n.children).forEach(([a,u])=>{o[a]=this.createSegmentGroup(e,u,r,s)}),new he(i,o)}createSegments(e,n,r,s){return n.map(i=>i.path.startsWith(":")?this.findPosParam(e,i,s):this.findOrReturn(i,r))}findPosParam(e,n,r){let s=r[n.path.substring(1)];if(!s)throw new K(4001,!1);return s}findOrReturn(e,n){let r=0;for(let s of n){if(s.path===e.path)return n.splice(r),s;r++}return e}},Mc={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function j0(t,e,n,r,s){let i=Fc(t,e,n);return i.matched?(r=g0(e,r),F0(r,e,n,s).pipe(oe(o=>o===!0?i:z({},Mc)))):Z(i)}function Fc(t,e,n){if(e.path==="**")return U0(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?z({},Mc):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let s=(e.matcher||Py)(n,t,e);if(!s)return z({},Mc);let i={};Object.entries(s.posParams??{}).forEach(([a,u])=>{i[a]=u.path});let o=s.consumed.length>0?z(z({},i),s.consumed[s.consumed.length-1].parameters):i;return{matched:!0,consumedSegments:s.consumed,remainingSegments:n.slice(s.consumed.length),parameters:o,positionalParamSegments:s.posParams??{}}}function U0(t){return{matched:!0,parameters:t.length>0?Yd(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function Gd(t,e,n,r){return n.length>0&&W0(t,n,r)?{segmentGroup:new he(e,V0(r,new he(n,t.children))),slicedSegments:[]}:n.length===0&&z0(t,n,r)?{segmentGroup:new he(t.segments,$0(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new he(t.segments,t.children),slicedSegments:n}}function $0(t,e,n,r){let s={};for(let i of n)if(Ms(t,e,i)&&!r[ft(i)]){let o=new he([],{});s[ft(i)]=o}return z(z({},r),s)}function V0(t,e){let n={};n[J]=e;for(let r of t)if(r.path===""&&ft(r)!==J){let s=new he([],{});n[ft(r)]=s}return n}function W0(t,e,n){return n.some(r=>Ms(t,e,r)&&ft(r)!==J)}function z0(t,e,n){return n.some(r=>Ms(t,e,r))}function Ms(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function q0(t,e,n,r){return ft(t)!==r&&(r===J||!Ms(e,n,t))?!1:Fc(e,t,n).matched}function G0(t,e,n){return e.length===0&&!t.children[n]}var Tc=class{};function K0(t,e,n,r,s,i,o="emptyOnly"){return new Ac(t,e,n,r,s,o,i).recognize()}var Y0=31,Ac=class{constructor(e,n,r,s,i,o,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=s,this.urlTree=i,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new xc(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new K(4002,`'${e.segmentGroup}'`)}recognize(){let e=Gd(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(oe(n=>{let r=new zr([],Object.freeze({}),Object.freeze(z({},this.urlTree.queryParams)),this.urlTree.fragment,{},J,this.rootComponentType,null,{}),s=new Be(r,n),i=new Ds("",s),o=t0(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,i.url=this.urlSerializer.serialize(o),this.inheritParamsAndData(i._root,null),{state:i,tree:o}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e,J).pipe(xt(r=>{if(r instanceof Is)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Gr?this.noMatchError(r):r}))}inheritParamsAndData(e,n){let r=e.value,s=Oc(r,n,this.paramsInheritanceStrategy);r.params=Object.freeze(s.params),r.data=Object.freeze(s.data),e.children.forEach(i=>this.inheritParamsAndData(i,r))}processSegmentGroup(e,n,r,s){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r):this.processSegment(e,n,r,r.segments,s,!0).pipe(oe(i=>i instanceof Be?[i]:[]))}processChildren(e,n,r){let s=[];for(let i of Object.keys(r.children))i==="primary"?s.unshift(i):s.push(i);return Se(s).pipe(gn(i=>{let o=r.children[i],a=m0(n,i);return this.processSegmentGroup(e,a,o,i)}),ao((i,o)=>(i.push(...o),i)),Mt(null),oo(),we(i=>{if(i===null)return Hn(r);let o=_f(i);return Z0(o),Z(o)}))}processSegment(e,n,r,s,i,o){return Se(n).pipe(gn(a=>this.processSegmentAgainstRoute(a._injector??e,n,a,r,s,i,o).pipe(xt(u=>{if(u instanceof Gr)return Z(null);throw u}))),rt(a=>!!a),xt(a=>{if(mf(a))return G0(r,s,i)?Z(new Tc):Hn(r);throw a}))}processSegmentAgainstRoute(e,n,r,s,i,o,a){return q0(r,s,i,o)?r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,s,r,i,o):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,s,n,r,i,o):Hn(s):Hn(s)}expandSegmentAgainstRouteUsingRedirect(e,n,r,s,i,o){let{matched:a,consumedSegments:u,positionalParamSegments:c,remainingSegments:p}=Fc(n,s,i);if(!a)return Hn(n);s.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>Y0&&(this.allowRedirects=!1));let g=this.applyRedirects.applyRedirectCommands(u,s.redirectTo,c);return this.applyRedirects.lineralizeSegments(s,g).pipe(we(C=>this.processSegment(e,r,n,C.concat(p),o,!1)))}matchSegmentAgainstRoute(e,n,r,s,i){let o=j0(n,r,s,e,this.urlSerializer);return r.path==="**"&&(n.children={}),o.pipe(Ze(a=>a.matched?(e=r._injector??e,this.getChildConfig(e,r,s).pipe(Ze(({routes:u})=>{let c=r._loadedInjector??e,{consumedSegments:p,remainingSegments:g,parameters:C}=a,y=new zr(p,C,Object.freeze(z({},this.urlTree.queryParams)),this.urlTree.fragment,X0(r),ft(r),r.component??r._loadedComponent??null,r,J0(r)),{segmentGroup:l,slicedSegments:d}=Gd(n,p,g,u);if(d.length===0&&l.hasChildren())return this.processChildren(c,u,l).pipe(oe(f=>f===null?null:new Be(y,f)));if(u.length===0&&d.length===0)return Z(new Be(y,[]));let h=ft(r)===i;return this.processSegment(c,u,l,d,h?J:i,!0).pipe(oe(f=>new Be(y,f instanceof Be?[f]:[])))}))):Hn(n)))}getChildConfig(e,n,r){return n.children?Z({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?Z({routes:n._loadedRoutes,injector:n._loadedInjector}):P0(e,n,r,this.urlSerializer).pipe(we(s=>s?this.configLoader.loadChildren(e,n).pipe(Ie(i=>{n._loadedRoutes=i.routes,n._loadedInjector=i.injector})):H0(n))):Z({routes:[],injector:e})}};function Z0(t){t.sort((e,n)=>e.value.outlet===J?-1:n.value.outlet===J?1:e.value.outlet.localeCompare(n.value.outlet))}function Q0(t){let e=t.value.routeConfig;return e&&e.path===""}function _f(t){let e=[],n=new Set;for(let r of t){if(!Q0(r)){e.push(r);continue}let s=e.find(i=>r.value.routeConfig===i.value.routeConfig);s!==void 0?(s.children.push(...r.children),n.add(s)):e.push(r)}for(let r of n){let s=_f(r.children);e.push(new Be(r.value,s))}return e.filter(r=>!n.has(r))}function X0(t){return t.data||{}}function J0(t){return t.resolve||{}}function eC(t,e,n,r,s,i){return we(o=>K0(t,e,n,r,o.extractedUrl,s,i).pipe(oe(({state:a,tree:u})=>_e(z({},o),{targetSnapshot:a,urlAfterRedirects:u}))))}function tC(t,e){return we(n=>{let{targetSnapshot:r,guards:{canActivateChecks:s}}=n;if(!s.length)return Z(n);let i=new Set(s.map(u=>u.route)),o=new Set;for(let u of i)if(!o.has(u))for(let c of yf(u))o.add(c);let a=0;return Se(o).pipe(gn(u=>i.has(u)?nC(u,r,t,e):(u.data=Oc(u,u.parent,t).resolve,Z(void 0))),Ie(()=>a++),mn(1),we(u=>a===o.size?Z(n):Ne))})}function yf(t){let e=t.children.map(n=>yf(n)).flat();return[t,...e]}function nC(t,e,n,r){let s=t.routeConfig,i=t._resolve;return s?.title!==void 0&&!hf(s)&&(i[Kr]=s.title),rC(i,t,e,r).pipe(oe(o=>(t._resolvedData=o,t.data=Oc(t,t.parent,n).resolve,null)))}function rC(t,e,n,r){let s=oc(t);if(s.length===0)return Z({});let i={};return Se(s).pipe(we(o=>iC(t[o],e,n,r).pipe(rt(),Ie(a=>{i[o]=a}))),mn(1),so(i),xt(o=>mf(o)?Ne:fn(o)))}function iC(t,e,n,r){let s=Yr(e)??r,i=Gn(t,s),o=i.resolve?i.resolve(e,n):Kt(s,()=>i(e,n));return Nt(o)}function ic(t){return Ze(e=>{let n=t(e);return n?Se(n).pipe(oe(()=>e)):Z(e)})}var Cf=(()=>{let e=class e{buildTitle(r){let s,i=r.root;for(;i!==void 0;)s=this.getResolvedTitleForRoute(i)??s,i=i.children.find(o=>o.outlet===J);return s}getResolvedTitleForRoute(r){return r.data[Kr]}};e.\u0275fac=function(s){return new(s||e)},e.\u0275prov=X({token:e,factory:()=>V(sC),providedIn:"root"});let t=e;return t})(),sC=(()=>{let e=class e extends Cf{constructor(r){super(),this.title=r}updateTitle(r){let s=this.buildTitle(r);s!==void 0&&this.title.setTitle(s)}};e.\u0275fac=function(s){return new(s||e)(ce($d))},e.\u0275prov=X({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Bc=new ae("",{providedIn:"root",factory:()=>({})}),Hc=new ae(""),oC=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=V(za)}loadComponent(r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return Z(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let s=Nt(r.loadComponent()).pipe(oe(Sf),Ie(o=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=o}),sr(()=>{this.componentLoaders.delete(r)})),i=new dn(s,()=>new Ae).pipe(hn());return this.componentLoaders.set(r,i),i}loadChildren(r,s){if(this.childrenLoaders.get(s))return this.childrenLoaders.get(s);if(s._loadedRoutes)return Z({routes:s._loadedRoutes,injector:s._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(s);let o=aC(s,this.compiler,r,this.onLoadEndListener).pipe(sr(()=>{this.childrenLoaders.delete(s)})),a=new dn(o,()=>new Ae).pipe(hn());return this.childrenLoaders.set(s,a),a}};e.\u0275fac=function(s){return new(s||e)},e.\u0275prov=X({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function aC(t,e,n,r){return Nt(t.loadChildren()).pipe(oe(Sf),we(s=>s instanceof yr||Array.isArray(s)?Z(s):Se(e.compileModuleAsync(s))),oe(s=>{r&&r(t);let i,o,a=!1;return Array.isArray(s)?(o=s,a=!0):(i=s.create(n).injector,o=i.get(Hc,[],{optional:!0,self:!0}).flat()),{routes:o.map(Pc),injector:i}}))}function cC(t){return t&&typeof t=="object"&&"default"in t}function Sf(t){return cC(t)?t.default:t}var jc=(()=>{let e=class e{};e.\u0275fac=function(s){return new(s||e)},e.\u0275prov=X({token:e,factory:()=>V(lC),providedIn:"root"});let t=e;return t})(),lC=(()=>{let e=class e{shouldProcessUrl(r){return!0}extract(r){return r}merge(r,s){return r}};e.\u0275fac=function(s){return new(s||e)},e.\u0275prov=X({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),uC=new ae("");var hC=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Ae,this.transitionAbortSubject=new Ae,this.configLoader=V(oC),this.environmentInjector=V(ze),this.urlSerializer=V(kc),this.rootContexts=V(xs),this.location=V(Ar),this.inputBindingEnabled=V(Nc,{optional:!0})!==null,this.titleStrategy=V(Cf),this.options=V(Bc,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=V(jc),this.createViewTransition=V(uC,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>Z(void 0),this.rootComponentType=null;let r=i=>this.events.next(new gc(i)),s=i=>this.events.next(new mc(i));this.configLoader.onLoadEndListener=s,this.configLoader.onLoadStartListener=r}complete(){this.transitions?.complete()}handleNavigationRequest(r){let s=++this.navigationId;this.transitions?.next(_e(z(z({},this.transitions.value),r),{id:s}))}setupNavigations(r,s,i){return this.transitions=new Ee({id:0,currentUrlTree:s,currentRawUrl:s,extractedUrl:this.urlHandlingStrategy.extract(s),urlAfterRedirects:this.urlHandlingStrategy.extract(s),rawUrl:s,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Br,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Ye(o=>o.id!==0),oe(o=>_e(z({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),Ze(o=>{let a=!1,u=!1;return Z(o).pipe(Ze(c=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",He.SupersededByNewNavigation),Ne;this.currentTransition=o,this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?_e(z({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let p=!r.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),g=c.extras.onSameUrlNavigation??r.onSameUrlNavigation;if(!p&&g!=="reload"){let C="";return this.events.next(new nn(c.id,this.urlSerializer.serialize(c.rawUrl),C,uc.IgnoredSameUrlNavigation)),c.resolve(null),Ne}if(this.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return Z(c).pipe(Ze(C=>{let y=this.transitions?.getValue();return this.events.next(new Ur(C.id,this.urlSerializer.serialize(C.extractedUrl),C.source,C.restoredState)),y!==this.transitions?.getValue()?Ne:Promise.resolve(C)}),eC(this.environmentInjector,this.configLoader,this.rootComponentType,r.config,this.urlSerializer,this.paramsInheritanceStrategy),Ie(C=>{o.targetSnapshot=C.targetSnapshot,o.urlAfterRedirects=C.urlAfterRedirects,this.currentNavigation=_e(z({},this.currentNavigation),{finalUrl:C.urlAfterRedirects});let y=new Ss(C.id,this.urlSerializer.serialize(C.extractedUrl),this.urlSerializer.serialize(C.urlAfterRedirects),C.targetSnapshot);this.events.next(y)}));if(p&&this.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){let{id:C,extractedUrl:y,source:l,restoredState:d,extras:h}=c,f=new Ur(C,this.urlSerializer.serialize(y),l,d);this.events.next(f);let m=lf(this.rootComponentType).snapshot;return this.currentTransition=o=_e(z({},c),{targetSnapshot:m,urlAfterRedirects:y,extras:_e(z({},h),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=y,Z(o)}else{let C="";return this.events.next(new nn(c.id,this.urlSerializer.serialize(c.extractedUrl),C,uc.IgnoredByUrlHandlingStrategy)),c.resolve(null),Ne}}),Ie(c=>{let p=new hc(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(p)}),oe(c=>(this.currentTransition=o=_e(z({},c),{guards:_0(c.targetSnapshot,c.currentSnapshot,this.rootContexts)}),o)),M0(this.environmentInjector,c=>this.events.next(c)),Ie(c=>{if(o.guardsResult=c.guardsResult,Wn(c.guardsResult))throw ff(this.urlSerializer,c.guardsResult);let p=new dc(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(p)}),Ye(c=>c.guardsResult?!0:(this.cancelNavigationTransition(c,"",He.GuardRejected),!1)),ic(c=>{if(c.guards.canActivateChecks.length)return Z(c).pipe(Ie(p=>{let g=new fc(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects),p.targetSnapshot);this.events.next(g)}),Ze(p=>{let g=!1;return Z(p).pipe(tC(this.paramsInheritanceStrategy,this.environmentInjector),Ie({next:()=>g=!0,complete:()=>{g||this.cancelNavigationTransition(p,"",He.NoDataFromResolver)}}))}),Ie(p=>{let g=new pc(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects),p.targetSnapshot);this.events.next(g)}))}),ic(c=>{let p=g=>{let C=[];g.routeConfig?.loadComponent&&!g.routeConfig._loadedComponent&&C.push(this.configLoader.loadComponent(g.routeConfig).pipe(Ie(y=>{g.component=y}),oe(()=>{})));for(let y of g.children)C.push(...p(y));return C};return xi(p(c.targetSnapshot.root)).pipe(Mt(null),gt(1))}),ic(()=>this.afterPreactivation()),Ze(()=>{let{currentSnapshot:c,targetSnapshot:p}=o,g=this.createViewTransition?.(this.environmentInjector,c.root,p.root);return g?Se(g).pipe(oe(()=>o)):Z(o)}),oe(c=>{let p=u0(r.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return this.currentTransition=o=_e(z({},c),{targetRouterState:p}),this.currentNavigation.targetRouterState=p,o}),Ie(()=>{this.events.next(new Vr)}),v0(this.rootContexts,r.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),gt(1),Ie({next:c=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new tn(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),this.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{a=!0}}),lo(this.transitionAbortSubject.pipe(Ie(c=>{throw c}))),sr(()=>{!a&&!u&&this.cancelNavigationTransition(o,"",He.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),xt(c=>{if(u=!0,gf(c))this.events.next(new Lt(o.id,this.urlSerializer.serialize(o.extractedUrl),c.message,c.cancellationCode)),f0(c)?this.events.next(new Wr(c.url)):o.resolve(!1);else{this.events.next(new $r(o.id,this.urlSerializer.serialize(o.extractedUrl),c,o.targetSnapshot??void 0));try{o.resolve(r.errorHandler(c))}catch(p){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(p)}}return Ne}))}))}cancelNavigationTransition(r,s,i){let o=new Lt(r.id,this.urlSerializer.serialize(r.extractedUrl),s,i);this.events.next(o),r.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};e.\u0275fac=function(s){return new(s||e)},e.\u0275prov=X({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function dC(t){return t!==Br}var fC=(()=>{let e=class e{};e.\u0275fac=function(s){return new(s||e)},e.\u0275prov=X({token:e,factory:()=>V(pC),providedIn:"root"});let t=e;return t})(),Rc=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},pC=(()=>{let e=class e extends Rc{};e.\u0275fac=(()=>{let r;return function(i){return(r||(r=Da(e)))(i||e)}})(),e.\u0275prov=X({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),wf=(()=>{let e=class e{};e.\u0275fac=function(s){return new(s||e)},e.\u0275prov=X({token:e,factory:()=>V(gC),providedIn:"root"});let t=e;return t})(),gC=(()=>{let e=class e extends wf{constructor(){super(...arguments),this.location=V(Ar),this.urlSerializer=V(kc),this.options=V(Bc,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=V(jc),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Ot,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=lf(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(r){return this.location.subscribe(s=>{s.type==="popstate"&&r(s.url,s.state)})}handleRouterEvent(r,s){if(r instanceof Ur)this.stateMemento=this.createStateMemento();else if(r instanceof nn)this.rawUrlTree=s.initialUrl;else if(r instanceof Ss){if(this.urlUpdateStrategy==="eager"&&!s.extras.skipLocationChange){let i=this.urlHandlingStrategy.merge(s.finalUrl,s.initialUrl);this.setBrowserUrl(i,s)}}else r instanceof Vr?(this.currentUrlTree=s.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(s.finalUrl,s.initialUrl),this.routerState=s.targetRouterState,this.urlUpdateStrategy==="deferred"&&(s.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,s))):r instanceof Lt&&(r.code===He.GuardRejected||r.code===He.NoDataFromResolver)?this.restoreHistory(s):r instanceof $r?this.restoreHistory(s,!0):r instanceof tn&&(this.lastSuccessfulId=r.id,this.currentPageId=this.browserPageId)}setBrowserUrl(r,s){let i=this.urlSerializer.serialize(r);if(this.location.isCurrentPathEqualTo(i)||s.extras.replaceUrl){let o=this.browserPageId,a=z(z({},s.extras.state),this.generateNgRouterState(s.id,o));this.location.replaceState(i,"",a)}else{let o=z(z({},s.extras.state),this.generateNgRouterState(s.id,this.browserPageId+1));this.location.go(i,"",o)}}restoreHistory(r,s=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.currentUrlTree===r.finalUrl&&o===0&&(this.resetState(r),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(s&&this.resetState(r),this.resetUrlToCurrentUrlTree())}resetState(r){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,r.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(r,s){return this.canceledNavigationResolution==="computed"?{navigationId:r,\u0275routerPageId:s}:{navigationId:r}}};e.\u0275fac=(()=>{let r;return function(i){return(r||(r=Da(e)))(i||e)}})(),e.\u0275prov=X({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Pr=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(Pr||{});function mC(t,e){t.events.pipe(Ye(n=>n instanceof tn||n instanceof Lt||n instanceof $r||n instanceof nn),oe(n=>n instanceof tn||n instanceof nn?Pr.COMPLETE:(n instanceof Lt?n.code===He.Redirect||n.code===He.SupersededByNewNavigation:!1)?Pr.REDIRECTING:Pr.FAILED),Ye(n=>n!==Pr.REDIRECTING),gt(1)).subscribe(()=>{e()})}function vC(t){throw t}var _C={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},yC={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},bf=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=V(as),this.stateManager=V(wf),this.options=V(Bc,{optional:!0})||{},this.pendingTasks=V(os),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=V(hC),this.urlSerializer=V(kc),this.location=V(Ar),this.urlHandlingStrategy=V(jc),this._events=new Ae,this.errorHandler=this.options.errorHandler||vC,this.navigated=!1,this.routeReuseStrategy=V(fC),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=V(Hc,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!V(Nc,{optional:!0}),this.eventsSubscription=new Ce,this.isNgZoneEnabled=V(ye)instanceof ye&&ye.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:r=>{this.console.warn(r)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let r=this.navigationTransitions.events.subscribe(s=>{try{let i=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(s,o),s instanceof Lt&&s.code!==He.Redirect&&s.code!==He.SupersededByNewNavigation)this.navigated=!0;else if(s instanceof tn)this.navigated=!0;else if(s instanceof Wr){let a=this.urlHandlingStrategy.merge(s.url,i.currentRawUrl),u={info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||dC(i.source)};this.scheduleNavigation(a,Br,null,u,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}SC(s)&&this._events.next(s)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(r)}resetRootComponentType(r){this.routerState.root.component=r,this.navigationTransitions.rootComponentType=r}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Br,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((r,s)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(r,"popstate",s)},0)})}navigateToSyncWithBrowser(r,s,i){let o={replaceUrl:!0},a=i?.navigationId?i:null;if(i){let c=z({},i);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(o.state=c)}let u=this.parseUrl(r);this.scheduleNavigation(u,s,a,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(r){this.config=r.map(Pc),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(r,s={}){let{relativeTo:i,queryParams:o,fragment:a,queryParamsHandling:u,preserveFragment:c}=s,p=c?this.currentUrlTree.fragment:a,g=null;switch(u){case"merge":g=z(z({},this.currentUrlTree.queryParams),o);break;case"preserve":g=this.currentUrlTree.queryParams;break;default:g=o||null}g!==null&&(g=this.removeEmptyProps(g));let C;try{let y=i?i.snapshot:this.routerState.snapshot.root;C=sf(y)}catch{(typeof r[0]!="string"||!r[0].startsWith("/"))&&(r=[]),C=this.currentUrlTree.root}return of(C,r,g,p??null)}navigateByUrl(r,s={skipLocationChange:!1}){let i=Wn(r)?r:this.parseUrl(r),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,Br,null,s)}navigate(r,s={skipLocationChange:!1}){return CC(r),this.navigateByUrl(this.createUrlTree(r,s),s)}serializeUrl(r){return this.urlSerializer.serialize(r)}parseUrl(r){try{return this.urlSerializer.parse(r)}catch{return this.urlSerializer.parse("/")}}isActive(r,s){let i;if(s===!0?i=z({},_C):s===!1?i=z({},yC):i=s,Wn(r))return Vd(this.currentUrlTree,r,i);let o=this.parseUrl(r);return Vd(this.currentUrlTree,o,i)}removeEmptyProps(r){return Object.entries(r).reduce((s,[i,o])=>(o!=null&&(s[i]=o),s),{})}scheduleNavigation(r,s,i,o,a){if(this.disposed)return Promise.resolve(!1);let u,c,p;a?(u=a.resolve,c=a.reject,p=a.promise):p=new Promise((C,y)=>{u=C,c=y});let g=this.pendingTasks.add();return mC(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(g))}),this.navigationTransitions.handleNavigationRequest({source:s,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:r,extras:o,resolve:u,reject:c,promise:p,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),p.catch(C=>Promise.reject(C))}};e.\u0275fac=function(s){return new(s||e)},e.\u0275prov=X({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function CC(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new K(4008,!1)}function SC(t){return!(t instanceof Vr)&&!(t instanceof Wr)}var wC=new ae("");function Df(t,...e){return Xi([{provide:Hc,multi:!0,useValue:t},[],{provide:zn,useFactory:bC,deps:[bf]},{provide:Wa,multi:!0,useFactory:DC},e.map(n=>n.\u0275providers)])}function bC(t){return t.routerState.root}function DC(){let t=V(br);return e=>{let n=t.get(xr);if(e!==n.components[0])return;let r=t.get(bf),s=t.get(EC);t.get(IC)===1&&r.initialNavigation(),t.get(xC,null,ee.Optional)?.setUpPreloading(),t.get(wC,null,ee.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),s.closed||(s.next(),s.complete(),s.unsubscribe())}}var EC=new ae("",{factory:()=>new Ae}),IC=new ae("",{providedIn:"root",factory:()=>1});var xC=new ae("");var Ef=[];var If={providers:[Df(Ef)]};var ip=_p(Mf());var tt=Object.create(null);tt.open="0";tt.close="1";tt.ping="2";tt.pong="3";tt.message="4";tt.upgrade="5";tt.noop="6";var Qr=Object.create(null);Object.keys(tt).forEach(t=>{Qr[tt[t]]=t});var Xr={type:"error",data:"parser error"};var Rf=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",kf=typeof ArrayBuffer=="function",Of=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t&&t.buffer instanceof ArrayBuffer,Jr=({type:t,data:e},n,r)=>Rf&&e instanceof Blob?n?r(e):Tf(e,r):kf&&(e instanceof ArrayBuffer||Of(e))?n?r(e):Tf(new Blob([e]),r):r(tt[t]+(e||"")),Tf=(t,e)=>{let n=new FileReader;return n.onload=function(){let r=n.result.split(",")[1];e("b"+(r||""))},n.readAsDataURL(t)};function Af(t){return t instanceof Uint8Array?t:t instanceof ArrayBuffer?new Uint8Array(t):new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}var $c;function Lf(t,e){if(Rf&&t.data instanceof Blob)return t.data.arrayBuffer().then(Af).then(e);if(kf&&(t.data instanceof ArrayBuffer||Of(t.data)))return e(Af(t.data));Jr(t,!1,n=>{$c||($c=new TextEncoder),e($c.encode(n))})}var Nf="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ei=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let t=0;t<Nf.length;t++)ei[Nf.charCodeAt(t)]=t;var Pf=t=>{let e=t.length*.75,n=t.length,r,s=0,i,o,a,u;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);let c=new ArrayBuffer(e),p=new Uint8Array(c);for(r=0;r<n;r+=4)i=ei[t.charCodeAt(r)],o=ei[t.charCodeAt(r+1)],a=ei[t.charCodeAt(r+2)],u=ei[t.charCodeAt(r+3)],p[s++]=i<<2|o>>4,p[s++]=(o&15)<<4|a>>2,p[s++]=(a&3)<<6|u&63;return c};var MC=typeof ArrayBuffer=="function",ti=(t,e)=>{if(typeof t!="string")return{type:"message",data:Ff(t,e)};let n=t.charAt(0);return n==="b"?{type:"message",data:TC(t.substring(1),e)}:Qr[n]?t.length>1?{type:Qr[n],data:t.substring(1)}:{type:Qr[n]}:Xr},TC=(t,e)=>{if(MC){let n=Pf(t);return Ff(n,e)}else return{base64:!0,data:t}},Ff=(t,e)=>{switch(e){case"blob":return t instanceof Blob?t:new Blob([t]);case"arraybuffer":default:return t instanceof ArrayBuffer?t:t.buffer}};var Bf="",Hf=(t,e)=>{let n=t.length,r=new Array(n),s=0;t.forEach((i,o)=>{Jr(i,!1,a=>{r[o]=a,++s===n&&e(r.join(Bf))})})},jf=(t,e)=>{let n=t.split(Bf),r=[];for(let s=0;s<n.length;s++){let i=ti(n[s],e);if(r.push(i),i.type==="error")break}return r};function Uf(){return new TransformStream({transform(t,e){Lf(t,n=>{let r=n.length,s;if(r<126)s=new Uint8Array(1),new DataView(s.buffer).setUint8(0,r);else if(r<65536){s=new Uint8Array(3);let i=new DataView(s.buffer);i.setUint8(0,126),i.setUint16(1,r)}else{s=new Uint8Array(9);let i=new DataView(s.buffer);i.setUint8(0,127),i.setBigUint64(1,BigInt(r))}t.data&&typeof t.data!="string"&&(s[0]|=128),e.enqueue(s),e.enqueue(n)})}})}var Vc;function As(t){return t.reduce((e,n)=>e+n.length,0)}function Rs(t,e){if(t[0].length===e)return t.shift();let n=new Uint8Array(e),r=0;for(let s=0;s<e;s++)n[s]=t[0][r++],r===t[0].length&&(t.shift(),r=0);return t.length&&r<t[0].length&&(t[0]=t[0].slice(r)),n}function $f(t,e){Vc||(Vc=new TextDecoder);let n=[],r=0,s=-1,i=!1;return new TransformStream({transform(o,a){for(n.push(o);;){if(r===0){if(As(n)<1)break;let u=Rs(n,1);i=(u[0]&128)===128,s=u[0]&127,s<126?r=3:s===126?r=1:r=2}else if(r===1){if(As(n)<2)break;let u=Rs(n,2);s=new DataView(u.buffer,u.byteOffset,u.length).getUint16(0),r=3}else if(r===2){if(As(n)<8)break;let u=Rs(n,8),c=new DataView(u.buffer,u.byteOffset,u.length),p=c.getUint32(0);if(p>Math.pow(2,21)-1){a.enqueue(Xr);break}s=p*Math.pow(2,32)+c.getUint32(4),r=3}else{if(As(n)<s)break;let u=Rs(n,s);a.enqueue(ti(i?u:Vc.decode(u),e)),r=0}if(s===0||s>t){a.enqueue(Xr);break}}}})}var Wc=4;function ge(t){if(t)return AC(t)}function AC(t){for(var e in ge.prototype)t[e]=ge.prototype[e];return t}ge.prototype.on=ge.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this};ge.prototype.once=function(t,e){function n(){this.off(t,n),e.apply(this,arguments)}return n.fn=e,this.on(t,n),this};ge.prototype.off=ge.prototype.removeListener=ge.prototype.removeAllListeners=ge.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var n=this._callbacks["$"+t];if(!n)return this;if(arguments.length==1)return delete this._callbacks["$"+t],this;for(var r,s=0;s<n.length;s++)if(r=n[s],r===e||r.fn===e){n.splice(s,1);break}return n.length===0&&delete this._callbacks["$"+t],this};ge.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),n=this._callbacks["$"+t],r=1;r<arguments.length;r++)e[r-1]=arguments[r];if(n){n=n.slice(0);for(var r=0,s=n.length;r<s;++r)n[r].apply(this,e)}return this};ge.prototype.emitReserved=ge.prototype.emit;ge.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]};ge.prototype.hasListeners=function(t){return!!this.listeners(t).length};var St=typeof Promise=="function"&&typeof Promise.resolve=="function"?e=>Promise.resolve().then(e):(e,n)=>n(e,0),Re=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),Vf="arraybuffer";function ks(t,...e){return e.reduce((n,r)=>(t.hasOwnProperty(r)&&(n[r]=t[r]),n),{})}var RC=Re.setTimeout,kC=Re.clearTimeout;function wt(t,e){e.useNativeTimers?(t.setTimeoutFn=RC.bind(Re),t.clearTimeoutFn=kC.bind(Re)):(t.setTimeoutFn=Re.setTimeout.bind(Re),t.clearTimeoutFn=Re.clearTimeout.bind(Re))}var OC=1.33;function Wf(t){return typeof t=="string"?LC(t):Math.ceil((t.byteLength||t.size)*OC)}function LC(t){let e=0,n=0;for(let r=0,s=t.length;r<s;r++)e=t.charCodeAt(r),e<128?n+=1:e<2048?n+=2:e<55296||e>=57344?n+=3:(r++,n+=4);return n}function Os(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function zf(t){let e="";for(let n in t)t.hasOwnProperty(n)&&(e.length&&(e+="&"),e+=encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e}function qf(t){let e={},n=t.split("&");for(let r=0,s=n.length;r<s;r++){let i=n[r].split("=");e[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return e}var Ls=class extends Error{constructor(e,n,r){super(e),this.description=n,this.context=r,this.type="TransportError"}},bt=class extends ge{constructor(e){super(),this.writable=!1,wt(this,e),this.opts=e,this.query=e.query,this.socket=e.socket,this.supportsBinary=!e.forceBase64}onError(e,n,r){return super.emitReserved("error",new Ls(e,n,r)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){let n=ti(e,this.socket.binaryType);this.onPacket(n)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,n={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(n)}_hostname(){let e=this.opts.hostname;return e.indexOf(":")===-1?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(e){let n=zf(e);return n.length?"?"+n:""}};var ni=class extends bt{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(e){this.readyState="pausing";let n=()=>{this.readyState="paused",e()};if(this._polling||!this.writable){let r=0;this._polling&&(r++,this.once("pollComplete",function(){--r||n()})),this.writable||(r++,this.once("drain",function(){--r||n()}))}else n()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){let n=r=>{if(this.readyState==="opening"&&r.type==="open"&&this.onOpen(),r.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(r)};jf(e,this.socket.binaryType).forEach(n),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){let e=()=>{this.write([{type:"close"}])};this.readyState==="open"?e():this.once("open",e)}write(e){this.writable=!1,Hf(e,n=>{this.doWrite(n,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){let e=this.opts.secure?"https":"http",n=this.query||{};return this.opts.timestampRequests!==!1&&(n[this.opts.timestampParam]=Os()),!this.supportsBinary&&!n.sid&&(n.b64=1),this.createUri(e,n)}};var Gf=!1;try{Gf=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}var Kf=Gf;function NC(){}var zc=class extends ni{constructor(e){if(super(e),typeof location<"u"){let n=location.protocol==="https:",r=location.port;r||(r=n?"443":"80"),this.xd=typeof location<"u"&&e.hostname!==location.hostname||r!==e.port}}doWrite(e,n){let r=this.request({method:"POST",data:e});r.on("success",n),r.on("error",(s,i)=>{this.onError("xhr post error",s,i)})}doPoll(){let e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(n,r)=>{this.onError("xhr poll error",n,r)}),this.pollXhr=e}},Ns=(()=>{class t extends ge{constructor(n,r,s){super(),this.createRequest=n,wt(this,s),this._opts=s,this._method=s.method||"GET",this._uri=r,this._data=s.data!==void 0?s.data:null,this._create()}_create(){var n;let r=ks(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");r.xdomain=!!this._opts.xd;let s=this._xhr=this.createRequest(r);try{s.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){s.setDisableHeaderCheck&&s.setDisableHeaderCheck(!0);for(let i in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(i)&&s.setRequestHeader(i,this._opts.extraHeaders[i])}}catch{}if(this._method==="POST")try{s.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{s.setRequestHeader("Accept","*/*")}catch{}(n=this._opts.cookieJar)===null||n===void 0||n.addCookies(s),"withCredentials"in s&&(s.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(s.timeout=this._opts.requestTimeout),s.onreadystatechange=()=>{var i;s.readyState===3&&((i=this._opts.cookieJar)===null||i===void 0||i.parseCookies(s.getResponseHeader("set-cookie"))),s.readyState===4&&(s.status===200||s.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof s.status=="number"?s.status:0)},0))},s.send(this._data)}catch(i){this.setTimeoutFn(()=>{this._onError(i)},0);return}typeof document<"u"&&(this._index=t.requestsCount++,t.requests[this._index]=this)}_onError(n){this.emitReserved("error",n,this._xhr),this._cleanup(!0)}_cleanup(n){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=NC,n)try{this._xhr.abort()}catch{}typeof document<"u"&&delete t.requests[this._index],this._xhr=null}}_onLoad(){let n=this._xhr.responseText;n!==null&&(this.emitReserved("data",n),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}return t.requestsCount=0,t.requests={},t})();if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",Yf);else if(typeof addEventListener=="function"){let t="onpagehide"in Re?"pagehide":"unload";addEventListener(t,Yf,!1)}}function Yf(){for(let t in Ns.requests)Ns.requests.hasOwnProperty(t)&&Ns.requests[t].abort()}var PC=function(){let t=Zf({xdomain:!1});return t&&t.responseType!==null}(),Pt=class extends zc{constructor(e){super(e);let n=e&&e.forceBase64;this.supportsBinary=PC&&!n}request(e={}){return Object.assign(e,{xd:this.xd},this.opts),new Ns(Zf,this.uri(),e)}};function Zf(t){let e=t.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!e||Kf))return new XMLHttpRequest}catch{}if(!e)try{return new Re[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}var Qf=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative",Gc=class extends bt{get name(){return"websocket"}doOpen(){let e=this.uri(),n=this.opts.protocols,r=Qf?{}:ks(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(r.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,n,r)}catch(s){return this.emitReserved("error",s)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let n=0;n<e.length;n++){let r=e[n],s=n===e.length-1;Jr(r,this.supportsBinary,i=>{try{this.doWrite(r,i)}catch{}s&&St(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){let e=this.opts.secure?"wss":"ws",n=this.query||{};return this.opts.timestampRequests&&(n[this.opts.timestampParam]=Os()),this.supportsBinary||(n.b64=1),this.createUri(e,n)}},qc=Re.WebSocket||Re.MozWebSocket,Ft=class extends Gc{createSocket(e,n,r){return Qf?new qc(e,n,r):n?new qc(e,n):new qc(e)}doWrite(e,n){this.ws.send(n)}};var Kn=class extends bt{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(e){return this.emitReserved("error",e)}this._transport.closed.then(()=>{this.onClose()}).catch(e=>{this.onError("webtransport error",e)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(e=>{let n=$f(Number.MAX_SAFE_INTEGER,this.socket.binaryType),r=e.readable.pipeThrough(n).getReader(),s=Uf();s.readable.pipeTo(e.writable),this._writer=s.writable.getWriter();let i=()=>{r.read().then(({done:a,value:u})=>{a||(this.onPacket(u),i())}).catch(a=>{})};i();let o={type:"open"};this.query.sid&&(o.data=`{"sid":"${this.query.sid}"}`),this._writer.write(o).then(()=>this.onOpen())})})}write(e){this.writable=!1;for(let n=0;n<e.length;n++){let r=e[n],s=n===e.length-1;this._writer.write(r).then(()=>{s&&St(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;(e=this._transport)===null||e===void 0||e.close()}};var Kc={websocket:Ft,webtransport:Kn,polling:Pt};var FC=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,BC=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function Yn(t){if(t.length>8e3)throw"URI too long";let e=t,n=t.indexOf("["),r=t.indexOf("]");n!=-1&&r!=-1&&(t=t.substring(0,n)+t.substring(n,r).replace(/:/g,";")+t.substring(r,t.length));let s=FC.exec(t||""),i={},o=14;for(;o--;)i[BC[o]]=s[o]||"";return n!=-1&&r!=-1&&(i.source=e,i.host=i.host.substring(1,i.host.length-1).replace(/;/g,":"),i.authority=i.authority.replace("[","").replace("]","").replace(/;/g,":"),i.ipv6uri=!0),i.pathNames=HC(i,i.path),i.queryKey=jC(i,i.query),i}function HC(t,e){let n=/\/{2,9}/g,r=e.replace(n,"/").split("/");return(e.slice(0,1)=="/"||e.length===0)&&r.splice(0,1),e.slice(-1)=="/"&&r.splice(r.length-1,1),r}function jC(t,e){let n={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(r,s,i){s&&(n[s]=i)}),n}var Yc=typeof addEventListener=="function"&&typeof removeEventListener=="function",Ps=[];Yc&&addEventListener("offline",()=>{Ps.forEach(t=>t())},!1);var Fs=(()=>{class t extends ge{constructor(n,r){if(super(),this.binaryType=Vf,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,n&&typeof n=="object"&&(r=n,n=null),n){let s=Yn(n);r.hostname=s.host,r.secure=s.protocol==="https"||s.protocol==="wss",r.port=s.port,s.query&&(r.query=s.query)}else r.host&&(r.hostname=Yn(r.host).host);wt(this,r),this.secure=r.secure!=null?r.secure:typeof location<"u"&&location.protocol==="https:",r.hostname&&!r.port&&(r.port=this.secure?"443":"80"),this.hostname=r.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=r.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},r.transports.forEach(s=>{let i=s.prototype.name;this.transports.push(i),this._transportsByName[i]=s}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},r),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=qf(this.opts.query)),Yc&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},Ps.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(n){let r=Object.assign({},this.opts.query);r.EIO=Wc,r.transport=n,this.id&&(r.sid=this.id);let s=Object.assign({},this.opts,{query:r,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[n]);return new this._transportsByName[n](s)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}let n=this.opts.rememberUpgrade&&t.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";let r=this.createTransport(n);r.open(),this.setTransport(r)}setTransport(n){this.transport&&this.transport.removeAllListeners(),this.transport=n,n.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",r=>this._onClose("transport close",r))}onOpen(){this.readyState="open",t.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(n){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",n),this.emitReserved("heartbeat"),n.type){case"open":this.onHandshake(JSON.parse(n.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":let r=new Error("server error");r.code=n.data,this._onError(r);break;case"message":this.emitReserved("data",n.data),this.emitReserved("message",n.data);break}}onHandshake(n){this.emitReserved("handshake",n),this.id=n.sid,this.transport.query.sid=n.sid,this._pingInterval=n.pingInterval,this._pingTimeout=n.pingTimeout,this._maxPayload=n.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);let n=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+n,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},n),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){let n=this._getWritablePackets();this.transport.send(n),this._prevBufferLen=n.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let r=1;for(let s=0;s<this.writeBuffer.length;s++){let i=this.writeBuffer[s].data;if(i&&(r+=Wf(i)),s>0&&r>this._maxPayload)return this.writeBuffer.slice(0,s);r+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;let n=Date.now()>this._pingTimeoutTime;return n&&(this._pingTimeoutTime=0,St(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),n}write(n,r,s){return this._sendPacket("message",n,r,s),this}send(n,r,s){return this._sendPacket("message",n,r,s),this}_sendPacket(n,r,s,i){if(typeof r=="function"&&(i=r,r=void 0),typeof s=="function"&&(i=s,s=null),this.readyState==="closing"||this.readyState==="closed")return;s=s||{},s.compress=s.compress!==!1;let o={type:n,data:r,options:s};this.emitReserved("packetCreate",o),this.writeBuffer.push(o),i&&this.once("flush",i),this.flush()}close(){let n=()=>{this._onClose("forced close"),this.transport.close()},r=()=>{this.off("upgrade",r),this.off("upgradeError",r),n()},s=()=>{this.once("upgrade",r),this.once("upgradeError",r)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?s():n()}):this.upgrading?s():n()),this}_onError(n){if(t.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",n),this._onClose("transport error",n)}_onClose(n,r){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),Yc&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){let s=Ps.indexOf(this._offlineEventListener);s!==-1&&Ps.splice(s,1)}this.readyState="closed",this.id=null,this.emitReserved("close",n,r),this.writeBuffer=[],this._prevBufferLen=0}}}return t.protocol=Wc,t})(),Bs=class extends Fs{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])}_probe(e){let n=this.createTransport(e),r=!1;Fs.priorWebsocketSuccess=!1;let s=()=>{r||(n.send([{type:"ping",data:"probe"}]),n.once("packet",g=>{if(!r)if(g.type==="pong"&&g.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",n),!n)return;Fs.priorWebsocketSuccess=n.name==="websocket",this.transport.pause(()=>{r||this.readyState!=="closed"&&(p(),this.setTransport(n),n.send([{type:"upgrade"}]),this.emitReserved("upgrade",n),n=null,this.upgrading=!1,this.flush())})}else{let C=new Error("probe error");C.transport=n.name,this.emitReserved("upgradeError",C)}}))};function i(){r||(r=!0,p(),n.close(),n=null)}let o=g=>{let C=new Error("probe error: "+g);C.transport=n.name,i(),this.emitReserved("upgradeError",C)};function a(){o("transport closed")}function u(){o("socket closed")}function c(g){n&&g.name!==n.name&&i()}let p=()=>{n.removeListener("open",s),n.removeListener("error",o),n.removeListener("close",a),this.off("close",u),this.off("upgrading",c)};n.once("open",s),n.once("error",o),n.once("close",a),this.once("close",u),this.once("upgrading",c),this._upgrades.indexOf("webtransport")!==-1&&e!=="webtransport"?this.setTimeoutFn(()=>{r||n.open()},200):n.open()}onHandshake(e){this._upgrades=this._filterUpgrades(e.upgrades),super.onHandshake(e)}_filterUpgrades(e){let n=[];for(let r=0;r<e.length;r++)~this.transports.indexOf(e[r])&&n.push(e[r]);return n}},Zn=class extends Bs{constructor(e,n={}){let r=typeof e=="object"?e:n;(!r.transports||r.transports&&typeof r.transports[0]=="string")&&(r.transports=(r.transports||["polling","websocket","webtransport"]).map(s=>Kc[s]).filter(s=>!!s)),super(e,r)}};var vT=Zn.protocol;function Xf(t,e="",n){let r=t;n=n||typeof location<"u"&&location,t==null&&(t=n.protocol+"//"+n.host),typeof t=="string"&&(t.charAt(0)==="/"&&(t.charAt(1)==="/"?t=n.protocol+t:t=n.host+t),/^(https?|wss?):\/\//.test(t)||(typeof n<"u"?t=n.protocol+"//"+t:t="https://"+t),r=Yn(t)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";let i=r.host.indexOf(":")!==-1?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+i+":"+r.port+e,r.href=r.protocol+"://"+i+(n&&n.port===r.port?"":":"+r.port),r}var tl={};mp(tl,{Decoder:()=>Jc,Encoder:()=>Xc,PacketType:()=>re,protocol:()=>rp});var $C=typeof ArrayBuffer=="function",VC=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer,Jf=Object.prototype.toString,WC=typeof Blob=="function"||typeof Blob<"u"&&Jf.call(Blob)==="[object BlobConstructor]",zC=typeof File=="function"||typeof File<"u"&&Jf.call(File)==="[object FileConstructor]";function ii(t){return $C&&(t instanceof ArrayBuffer||VC(t))||WC&&t instanceof Blob||zC&&t instanceof File}function ri(t,e){if(!t||typeof t!="object")return!1;if(Array.isArray(t)){for(let n=0,r=t.length;n<r;n++)if(ri(t[n]))return!0;return!1}if(ii(t))return!0;if(t.toJSON&&typeof t.toJSON=="function"&&arguments.length===1)return ri(t.toJSON(),!0);for(let n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&ri(t[n]))return!0;return!1}function ep(t){let e=[],n=t.data,r=t;return r.data=Zc(n,e),r.attachments=e.length,{packet:r,buffers:e}}function Zc(t,e){if(!t)return t;if(ii(t)){let n={_placeholder:!0,num:e.length};return e.push(t),n}else if(Array.isArray(t)){let n=new Array(t.length);for(let r=0;r<t.length;r++)n[r]=Zc(t[r],e);return n}else if(typeof t=="object"&&!(t instanceof Date)){let n={};for(let r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=Zc(t[r],e));return n}return t}function tp(t,e){return t.data=Qc(t.data,e),delete t.attachments,t}function Qc(t,e){if(!t)return t;if(t&&t._placeholder===!0){if(typeof t.num=="number"&&t.num>=0&&t.num<e.length)return e[t.num];throw new Error("illegal attachments")}else if(Array.isArray(t))for(let n=0;n<t.length;n++)t[n]=Qc(t[n],e);else if(typeof t=="object")for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&(t[n]=Qc(t[n],e));return t}var qC=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],rp=5,re=function(t){return t[t.CONNECT=0]="CONNECT",t[t.DISCONNECT=1]="DISCONNECT",t[t.EVENT=2]="EVENT",t[t.ACK=3]="ACK",t[t.CONNECT_ERROR=4]="CONNECT_ERROR",t[t.BINARY_EVENT=5]="BINARY_EVENT",t[t.BINARY_ACK=6]="BINARY_ACK",t}(re||{}),Xc=class{constructor(e){this.replacer=e}encode(e){return(e.type===re.EVENT||e.type===re.ACK)&&ri(e)?this.encodeAsBinary({type:e.type===re.EVENT?re.BINARY_EVENT:re.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id}):[this.encodeAsString(e)]}encodeAsString(e){let n=""+e.type;return(e.type===re.BINARY_EVENT||e.type===re.BINARY_ACK)&&(n+=e.attachments+"-"),e.nsp&&e.nsp!=="/"&&(n+=e.nsp+","),e.id!=null&&(n+=e.id),e.data!=null&&(n+=JSON.stringify(e.data,this.replacer)),n}encodeAsBinary(e){let n=ep(e),r=this.encodeAsString(n.packet),s=n.buffers;return s.unshift(r),s}};function np(t){return Object.prototype.toString.call(t)==="[object Object]"}var Jc=class t extends ge{constructor(e){super(),this.reviver=e}add(e){let n;if(typeof e=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");n=this.decodeString(e);let r=n.type===re.BINARY_EVENT;r||n.type===re.BINARY_ACK?(n.type=r?re.EVENT:re.ACK,this.reconstructor=new el(n),n.attachments===0&&super.emitReserved("decoded",n)):super.emitReserved("decoded",n)}else if(ii(e)||e.base64)if(this.reconstructor)n=this.reconstructor.takeBinaryData(e),n&&(this.reconstructor=null,super.emitReserved("decoded",n));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+e)}decodeString(e){let n=0,r={type:Number(e.charAt(0))};if(re[r.type]===void 0)throw new Error("unknown packet type "+r.type);if(r.type===re.BINARY_EVENT||r.type===re.BINARY_ACK){let i=n+1;for(;e.charAt(++n)!=="-"&&n!=e.length;);let o=e.substring(i,n);if(o!=Number(o)||e.charAt(n)!=="-")throw new Error("Illegal attachments");r.attachments=Number(o)}if(e.charAt(n+1)==="/"){let i=n+1;for(;++n&&!(e.charAt(n)===","||n===e.length););r.nsp=e.substring(i,n)}else r.nsp="/";let s=e.charAt(n+1);if(s!==""&&Number(s)==s){let i=n+1;for(;++n;){let o=e.charAt(n);if(o==null||Number(o)!=o){--n;break}if(n===e.length)break}r.id=Number(e.substring(i,n+1))}if(e.charAt(++n)){let i=this.tryParse(e.substr(n));if(t.isPayloadValid(r.type,i))r.data=i;else throw new Error("invalid payload")}return r}tryParse(e){try{return JSON.parse(e,this.reviver)}catch{return!1}}static isPayloadValid(e,n){switch(e){case re.CONNECT:return np(n);case re.DISCONNECT:return n===void 0;case re.CONNECT_ERROR:return typeof n=="string"||np(n);case re.EVENT:case re.BINARY_EVENT:return Array.isArray(n)&&(typeof n[0]=="number"||typeof n[0]=="string"&&qC.indexOf(n[0])===-1);case re.ACK:case re.BINARY_ACK:return Array.isArray(n)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}},el=class{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){let n=tp(this.reconPack,this.buffers);return this.finishedReconstruction(),n}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}};function je(t,e,n){return t.on(e,n),function(){t.off(e,n)}}var GC=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1}),Qn=class extends ge{constructor(e,n,r){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=n,r&&r.auth&&(this.auth=r.auth),this._opts=Object.assign({},r),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;let e=this.io;this.subs=[je(e,"open",this.onopen.bind(this)),je(e,"packet",this.onpacket.bind(this)),je(e,"error",this.onerror.bind(this)),je(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...n){var r,s,i;if(GC.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(n.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(n),this;let o={type:re.EVENT,data:n};if(o.options={},o.options.compress=this.flags.compress!==!1,typeof n[n.length-1]=="function"){let p=this.ids++,g=n.pop();this._registerAckCallback(p,g),o.id=p}let a=(s=(r=this.io.engine)===null||r===void 0?void 0:r.transport)===null||s===void 0?void 0:s.writable,u=this.connected&&!(!((i=this.io.engine)===null||i===void 0)&&i._hasPingExpired());return this.flags.volatile&&!a||(u?(this.notifyOutgoingListeners(o),this.packet(o)):this.sendBuffer.push(o)),this.flags={},this}_registerAckCallback(e,n){var r;let s=(r=this.flags.timeout)!==null&&r!==void 0?r:this._opts.ackTimeout;if(s===void 0){this.acks[e]=n;return}let i=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let a=0;a<this.sendBuffer.length;a++)this.sendBuffer[a].id===e&&this.sendBuffer.splice(a,1);n.call(this,new Error("operation has timed out"))},s),o=(...a)=>{this.io.clearTimeoutFn(i),n.apply(this,a)};o.withError=!0,this.acks[e]=o}emitWithAck(e,...n){return new Promise((r,s)=>{let i=(o,a)=>o?s(o):r(a);i.withError=!0,n.push(i),this.emit(e,...n)})}_addToQueue(e){let n;typeof e[e.length-1]=="function"&&(n=e.pop());let r={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((s,...i)=>r!==this._queue[0]?void 0:(s!==null?r.tryCount>this._opts.retries&&(this._queue.shift(),n&&n(s)):(this._queue.shift(),n&&n(null,...i)),r.pending=!1,this._drainQueue())),this._queue.push(r),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||this._queue.length===0)return;let n=this._queue[0];n.pending&&!e||(n.pending=!0,n.tryCount++,this.flags=n.flags,this.emit.apply(this,n.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){typeof this.auth=="function"?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:re.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,n){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,n),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(e=>{if(!this.sendBuffer.some(r=>String(r.id)===e)){let r=this.acks[e];delete this.acks[e],r.withError&&r.call(this,new Error("socket has been disconnected"))}})}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case re.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case re.EVENT:case re.BINARY_EVENT:this.onevent(e);break;case re.ACK:case re.BINARY_ACK:this.onack(e);break;case re.DISCONNECT:this.ondisconnect();break;case re.CONNECT_ERROR:this.destroy();let r=new Error(e.data.message);r.data=e.data.data,this.emitReserved("connect_error",r);break}}onevent(e){let n=e.data||[];e.id!=null&&n.push(this.ack(e.id)),this.connected?this.emitEvent(n):this.receiveBuffer.push(Object.freeze(n))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){let n=this._anyListeners.slice();for(let r of n)r.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&typeof e[e.length-1]=="string"&&(this._lastOffset=e[e.length-1])}ack(e){let n=this,r=!1;return function(...s){r||(r=!0,n.packet({type:re.ACK,id:e,data:s}))}}onack(e){let n=this.acks[e.id];typeof n=="function"&&(delete this.acks[e.id],n.withError&&e.data.unshift(null),n.apply(this,e.data))}onconnect(e,n){this.id=e,this.recovered=n&&this._pid===n,this._pid=n,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:re.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){let n=this._anyListeners;for(let r=0;r<n.length;r++)if(e===n[r])return n.splice(r,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){let n=this._anyOutgoingListeners;for(let r=0;r<n.length;r++)if(e===n[r])return n.splice(r,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){let n=this._anyOutgoingListeners.slice();for(let r of n)r.apply(this,e.data)}}};function rn(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}rn.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),n=Math.floor(e*this.jitter*t);t=Math.floor(e*10)&1?t+n:t-n}return Math.min(t,this.max)|0};rn.prototype.reset=function(){this.attempts=0};rn.prototype.setMin=function(t){this.ms=t};rn.prototype.setMax=function(t){this.max=t};rn.prototype.setJitter=function(t){this.jitter=t};var Xn=class extends ge{constructor(e,n){var r;super(),this.nsps={},this.subs=[],e&&typeof e=="object"&&(n=e,e=void 0),n=n||{},n.path=n.path||"/socket.io",this.opts=n,wt(this,n),this.reconnection(n.reconnection!==!1),this.reconnectionAttempts(n.reconnectionAttempts||1/0),this.reconnectionDelay(n.reconnectionDelay||1e3),this.reconnectionDelayMax(n.reconnectionDelayMax||5e3),this.randomizationFactor((r=n.randomizationFactor)!==null&&r!==void 0?r:.5),this.backoff=new rn({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(n.timeout==null?2e4:n.timeout),this._readyState="closed",this.uri=e;let s=n.parser||tl;this.encoder=new s.Encoder,this.decoder=new s.Decoder,this._autoConnect=n.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,e||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var n;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(n=this.backoff)===null||n===void 0||n.setMin(e),this)}randomizationFactor(e){var n;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(n=this.backoff)===null||n===void 0||n.setJitter(e),this)}reconnectionDelayMax(e){var n;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(n=this.backoff)===null||n===void 0||n.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new Zn(this.uri,this.opts);let n=this.engine,r=this;this._readyState="opening",this.skipReconnect=!1;let s=je(n,"open",function(){r.onopen(),e&&e()}),i=a=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",a),e?e(a):this.maybeReconnectOnOpen()},o=je(n,"error",i);if(this._timeout!==!1){let a=this._timeout,u=this.setTimeoutFn(()=>{s(),i(new Error("timeout")),n.close()},a);this.opts.autoUnref&&u.unref(),this.subs.push(()=>{this.clearTimeoutFn(u)})}return this.subs.push(s),this.subs.push(o),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");let e=this.engine;this.subs.push(je(e,"ping",this.onping.bind(this)),je(e,"data",this.ondata.bind(this)),je(e,"error",this.onerror.bind(this)),je(e,"close",this.onclose.bind(this)),je(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(n){this.onclose("parse error",n)}}ondecoded(e){St(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,n){let r=this.nsps[e];return r?this._autoConnect&&!r.active&&r.connect():(r=new Qn(this,e,n),this.nsps[e]=r),r}_destroy(e){let n=Object.keys(this.nsps);for(let r of n)if(this.nsps[r].active)return;this._close()}_packet(e){let n=this.encoder.encode(e);for(let r=0;r<n.length;r++)this.engine.write(n[r],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(e,n){var r;this.cleanup(),(r=this.engine)===null||r===void 0||r.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,n),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;let e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{let n=this.backoff.duration();this._reconnecting=!0;let r=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open(s=>{s?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",s)):e.onreconnect()}))},n);this.opts.autoUnref&&r.unref(),this.subs.push(()=>{this.clearTimeoutFn(r)})}}onreconnect(){let e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}};var si={};function oi(t,e){typeof t=="object"&&(e=t,t=void 0),e=e||{};let n=Xf(t,e.path||"/socket.io"),r=n.source,s=n.id,i=n.path,o=si[s]&&i in si[s].nsps,a=e.forceNew||e["force new connection"]||e.multiplex===!1||o,u;return a?u=new Xn(r,e):(si[s]||(si[s]=new Xn(r,e)),u=si[s]),n.query&&!e.query&&(e.query=n.queryKey),u.socket(n.path,e)}Object.assign(oi,{Manager:Xn,Socket:Qn,io:oi,connect:oi});var KC=["terminalContainer"],sp=(()=>{let e=class e{constructor(){this.cols=80,this.rows=30,this.fontSize=14,this.charWidth=9,this.charHeight=18}ngAfterViewInit(){this.terminal=new ip.Terminal({cols:this.cols,rows:this.rows,cursorBlink:!0,fontFamily:"'FiraCode Nerd Font', monospace",fontSize:this.fontSize,theme:{background:"#000000",foreground:"#ffffff"}}),this.terminal.open(this.terminalContainer.nativeElement),this.socket=oi("http://96.19.42.234:3453"),this.socket.on("connect",()=>{console.log("Connected to WebSocket server"),this.socket.emit("resize",{cols:this.cols,rows:this.rows})}),this.socket.on("terminalOutput",r=>{this.terminal.write(r)}),this.socket.on("terminalExit",({code:r})=>{this.terminal.write(`\r
Terminal exited with code ${r}\r
`),this.socket.disconnect()}),this.socket.on("disconnect",()=>{this.terminal.write(`\r
Disconnected from server\r
`)}),this.terminal.onData(r=>{this.socket.emit("terminalInput",r)}),window.addEventListener("resize",this.handleResize.bind(this)),this.handleResize()}increaseFontSize(){this.fontSize<30&&(this.fontSize+=2,this.updateFontSize())}decreaseFontSize(){this.fontSize>8&&(this.fontSize-=2,this.updateFontSize())}updateFontSize(){this.terminal.options.fontSize=this.fontSize;let s=this.fontSize/14;this.charWidth=9*s,this.charHeight=18*s,this.handleResize()}handleResize(){let r=this.terminalContainer.nativeElement,s=Math.floor(r.clientWidth/this.charWidth),i=Math.floor(r.clientHeight/this.charHeight);(s!==this.cols||i!==this.rows)&&(this.cols=s,this.rows=i,this.terminal.resize(this.cols,this.rows),this.socket&&this.socket.connected&&this.socket.emit("resize",{cols:this.cols,rows:this.rows}))}ngOnDestroy(){this.socket&&this.socket.disconnect(),this.terminal.dispose(),window.removeEventListener("resize",this.handleResize.bind(this))}};e.\u0275fac=function(s){return new(s||e)},e.\u0275cmp=An({type:e,selectors:[["app-terminal"]],viewQuery:function(s,i){if(s&1&&pd(KC,5),s&2){let o;Ua(o=$a())&&(i.terminalContainer=o.first)}},standalone:!0,features:[Fn],decls:8,vars:0,consts:[["terminalContainer",""],[1,"terminal-wrapper"],[1,"font-size-controls"],["title","Increase font size",3,"click"],["title","Decrease font size",3,"click"],[1,"terminal-container"]],template:function(s,i){if(s&1){let o=fd();Dr(0,"div",1)(1,"div",2)(2,"button",3),Er("click",function(){return _a(o),ya(i.increaseFontSize())}),Va(3,"\u2191"),Pn(),Dr(4,"button",4),Er("click",function(){return _a(o),ya(i.decreaseFontSize())}),Va(5,"\u2193"),Pn()(),Qt(6,"div",5,0),Pn()}},styles:[".terminal-wrapper[_ngcontent-%COMP%]{position:relative;width:100%;height:100vh;background-color:#000}.terminal-container[_ngcontent-%COMP%]{width:100%;height:100%;padding:10px;font-family:Fira Code,monospace}.font-size-controls[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px;display:flex;gap:5px;z-index:10}.font-size-controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#333;color:#fff;border:none;border-radius:4px;padding:5px 10px;cursor:pointer;font-size:16px;line-height:1}.font-size-controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#555}.font-size-controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus{outline:none;box-shadow:0 0 0 2px #fff}"]});let t=e;return t})();var op=(()=>{let e=class e{};e.\u0275fac=function(s){return new(s||e)},e.\u0275cmp=An({type:e,selectors:[["app-root"]],standalone:!0,features:[Fn],decls:1,vars:0,template:function(s,i){s&1&&Qt(0,"app-terminal")},dependencies:[sp]});let t=e;return t})();Ud(op,If).catch(t=>console.error(t));
